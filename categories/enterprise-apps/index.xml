<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Enterprise Apps on HEUSSER.PRO</title>
        <link>https://heusser.pro/categories/enterprise-apps/</link>
        <description>Recent content in Enterprise Apps on HEUSSER.PRO</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Tue, 08 Jul 2025 06:10:29 +0000</lastBuildDate><atom:link href="https://heusser.pro/categories/enterprise-apps/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Understanding Entra ID App Registrations, Enterprise Applications and Service Principals Part 2</title>
        <link>https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/</link>
        <pubDate>Tue, 08 Jul 2025 06:10:29 +0000</pubDate>
        
        <guid>https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/</guid>
        <description>&lt;p&gt;At the end of 2024, I wrote the article &lt;a class=&#34;link&#34; href=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-ID-app-registration-and-an-enterprise-app-4yyib4g1sk5a&#34; &gt;Understanding Microsoft Entra ID App Registrations, Enterprise Apps and Service Principals&lt;/a&gt; which has quickly become one of my most read articles. Today I want to revisit that topic and reiterate on some of the things it covers. Especially since it seems like there is still a lot of confusion around the terminology and definitions of &lt;strong&gt;App registrations&lt;/strong&gt;, &lt;strong&gt;Enterprise Applications&lt;/strong&gt; and &lt;strong&gt;Service Principals&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;what-are-app-registrations&#34;&gt;What are App Registrations
&lt;/h2&gt;&lt;p&gt;This one is actually pretty easy to explain. Unlike in my original article, I&amp;rsquo;ll try to keep it shorter this time. An App registration is the application object that gets registered in Entra ID. The portal lists your registered apps as &lt;strong&gt;App registrations&lt;/strong&gt; and essentially transforms the verb of &lt;strong&gt;registering&lt;/strong&gt; an application to a noun. An app registration is an application that has been registered in Entra ID.&lt;/p&gt;
&lt;p&gt;The &lt;strong&gt;application&lt;/strong&gt; part of app registrations only refer to the part of an application that is integrating it in Entra ID. It&amp;rsquo;s by no means a full-fledged app that can be installed, executed or accessed through a browser. Creating app registrations for use with unattended &lt;strong&gt;scripts&lt;/strong&gt; is a totally valid use case as well. In that case, there is only a script but no real application. The script still needs an app registration and a service principal to authenticate and access resources like Microsoft Graph.&lt;/p&gt;
&lt;p&gt;Apps can be registered as single or multi tenant. This is called &lt;strong&gt;sign-in audience&lt;/strong&gt;. When you register an app yourself, the application object (app registration) will be created in your tenant. When you add a multi-tenant app owned by someone else to your tenant, like i.e. Zoom, you&amp;rsquo;re adding a service principal for Zoom to your tenant, which will then show up under &lt;strong&gt;Enterprise applications&lt;/strong&gt; in your tenant.&lt;/p&gt;
&lt;p&gt;In that case, Zoom owns the app registration and they&amp;rsquo;ve registered the app as a multi-tenant app. The app registrations serves as a blueprint and includes the required permissions, for which you&amp;rsquo;ll be asked for consent, when you add the app (a service principal for the multi-tenant app) to your tenant.&lt;/p&gt;
&lt;h2 id=&#34;enterprise-applications-and-service-principals&#34;&gt;Enterprise Applications and Service Principals
&lt;/h2&gt;&lt;p&gt;There are numerous blogs out there which claim that they are not the same thing. They&amp;rsquo;re wrong. Enterprise applications are &lt;strong&gt;pseudo objects&lt;/strong&gt;. There is no such thing as an Enterprise application object in Entra ID. That becomes abundantly clear when you go beyond the portal and start working with Microsoft Graph. I&amp;rsquo;m going to talk about that &lt;a class=&#34;link&#34; href=&#34;#proof-no-4---microsoft-graph&#34; &gt;later on&lt;/a&gt;&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-46.png&#34;
	width=&#34;500&#34;
	height=&#34;888&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-46_hu_152f99767420ac86.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-46_hu_7c247a596fcd0941.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Nothing beats a good old OG memeâ€¦&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;56&#34;
		data-flex-basis=&#34;135px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;You could say that all Enterprise applications are service principals but not all service principals are Enterprise applications. Basically, enterprise applications only describe one specific type of service principals. Only service principals for which an app registration either exists in your or in another tenant are considered enterprise applications.&lt;/p&gt;
&lt;p&gt;I totally get why people get confused here since the Entra ID portal does a bad job clearly labelling things.&lt;/p&gt;
&lt;p&gt;The entire menu in Entra ID is called &lt;strong&gt;Enterprise applications&lt;/strong&gt; but the default view in that menu defaults to a specific filter also called &lt;strong&gt;Enterprise Applications&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image.png&#34;
	width=&#34;1815&#34;
	height=&#34;614&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image_hu_842b4deba9e54967.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image_hu_f06d201cd0d66e11.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise applications Menu default filter&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;295&#34;
		data-flex-basis=&#34;709px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The Enterprise applications view lists all service principals for which an app registration exists either in your or in another tenant. However, it doesn&amp;rsquo;t list all your service principals.&lt;/p&gt;
&lt;p&gt;When you change the filter to &lt;strong&gt;Managed identities&lt;/strong&gt;, the menu title still says &lt;strong&gt;Enterprise applications&lt;/strong&gt; even though the menu is now displaying managed identities only. Managed identities are a type of &lt;strong&gt;service principal&lt;/strong&gt;. Remember, that technically, there is no such thing as an Enterprise application object in Entra ID. It&amp;rsquo;s just the name of the menu and the default filter that only shows apps for which an app registration exists in any tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-1.png&#34;
	width=&#34;1788&#34;
	height=&#34;612&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-1_hu_213020e067097d72.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-1_hu_985e407b590609c4.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise applications Menu with Managed identities filter&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;292&#34;
		data-flex-basis=&#34;701px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Even when you view a managed identity in detail, it still says &lt;strong&gt;Enterprise Application&lt;/strong&gt; in the top right corner of the managed identity service principal object.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-2.png&#34;
	width=&#34;871&#34;
	height=&#34;483&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-2_hu_cc891578ca45e65d.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-2_hu_cf930edfe4d4232d.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Managed identity detail view&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;180&#34;
		data-flex-basis=&#34;432px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Managed identities do have an application ID but there is no app registration object in your tenant. Since managed identities, including their certificates are managed by Microsoft, I&amp;rsquo;m assuming that there is an app registration in some Microsoft managed tenant somewhere but that is just an assumption.&lt;/p&gt;
&lt;h2 id=&#34;enterprise-applications--service-principals&#34;&gt;Enterprise applications == Service Principals
&lt;/h2&gt;&lt;h3 id=&#34;proof-no-1---documentation&#34;&gt;Proof No. 1 - Documentation
&lt;/h3&gt;&lt;p&gt;Luckily, it looks like Microsoft is acknowledging the problem around the terminology and starts to rectify this a bit by updating their documentation. &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/entra/identity-platform/app-objects-and-service-principals?tabs=browser&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;This&lt;/a&gt; Microsoft Learn article includes a lot of helpful information on the topic.&lt;/p&gt;
&lt;p&gt;In the Entra ID portal, you&amp;rsquo;re always going to see &lt;strong&gt;App registrations&lt;/strong&gt; and &lt;strong&gt;Enterprise application&lt;/strong&gt; menus. But when you look at the learn article linked above, you&amp;rsquo;ll see that they only mention &lt;strong&gt;Application&lt;/strong&gt; and &lt;strong&gt;Service principal&lt;/strong&gt; objects in the titles.&lt;/p&gt;
&lt;p&gt;In fact, when you search the page for &lt;strong&gt;Enterprise application&lt;/strong&gt; you&amp;rsquo;ll only get one hit. (At the time of writing this article.)&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;You can use the Enterprise applications page in the Microsoft Entra admin center to list and manage the service principals in a tenant. You can see the service principal&amp;rsquo;s permissions, user consented permissions, which users have done that consent, sign in information, and more.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Microsoft Learn&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;There is also a video embedded on that page:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-3.png&#34;
	width=&#34;1437&#34;
	height=&#34;774&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-3_hu_c7a132e0b9b1791.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-3_hu_651d15a16aad835.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Screenshot of the video that appears to be offline now.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;185&#34;
		data-flex-basis=&#34;445px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I transcribed the first part of the video:&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;App registrations and service principals are the backbone of secure application management. In the Microsoft Entra Admin Center, App registrations are listed as such and represent your app on a global scale across all tenants.
Conversely, service principals are listed as enterprise apps and they represent your app within a specific tenant.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Microsoft Learn&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/entra/fundamentals/users-default-permissions#owned-enterprise-applications&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Here&amp;rsquo;s&lt;/a&gt; another learn article that states:&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;Users can perform the following actions on owned enterprise applications. An enterprise application consists of a service principal, one or more application policies, and sometimes an application object in the same tenant as the service principal.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Microsoft Learn&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;And &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/application-properties#object-ID&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;here&amp;rsquo;s&lt;/a&gt; another one titled &lt;strong&gt;Properties of an enterprise application&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;&lt;p&gt;This ID is the unique identifier of the service principal object associated with the application. This identifier can be useful when performing management operations against this application using PowerShell or other programmatic interfaces. This identifier is different than the identifier for the application object.&lt;/p&gt;
&lt;p&gt;The identifier is used to update information for the local instance of the application, such as assigning users and groups to the application. The identifier can also be used to update the properties of the enterprise application or to configure single-sign on.&lt;/p&gt;
&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Microsoft Learn&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;While these two still kind of let you believe that Enterprise applications are a form of Entra ID objects, they at least mention the term service principal alongside enterprise application.&lt;/p&gt;
&lt;h3 id=&#34;proof-no-3---entra-id-portal&#34;&gt;Proof No. 3 - Entra ID Portal
&lt;/h3&gt;&lt;p&gt;I&amp;rsquo;m not sure if you&amp;rsquo;ll let me count the portal as proof that Enterprise applications are in fact service principals since I already said that the portal does it wrong in &lt;strong&gt;most&lt;/strong&gt; places. Anyway, if you only create an app registration and don&amp;rsquo;t add a service principal for it, the app registration overview will include a link to &lt;strong&gt;Create Service Principal&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-4.png&#34;
	width=&#34;1534&#34;
	height=&#34;670&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-4_hu_922625d54b6752a2.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-4_hu_cc8b3af22839a8f6.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration without a service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;228&#34;
		data-flex-basis=&#34;549px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-5.png&#34;
	width=&#34;1527&#34;
	height=&#34;611&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-5_hu_188536269c5eb80d.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-5_hu_123c7a50e84c7810.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration with service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;249&#34;
		data-flex-basis=&#34;599px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When you click on that link to &lt;strong&gt;Create Service Principal&lt;/strong&gt;, it directly takes you to the newly created service principal object but since this is Entra ID, it will still say &lt;strong&gt;Enterprise Application&lt;/strong&gt; at the top of the page.&lt;/p&gt;
&lt;p&gt;Under properties of an Enterprise application the tool tip for &lt;strong&gt;Object ID&lt;/strong&gt; also clearly states that this is service principal object.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-7.png&#34;
	width=&#34;1479&#34;
	height=&#34;953&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-7_hu_b8670c8155c56894.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-7_hu_a68f91cf363afe2d.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Tool tip for Service Principal Object ID&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;155&#34;
		data-flex-basis=&#34;372px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;proof-no-4---microsoft-graph&#34;&gt;Proof No. 4 - Microsoft Graph
&lt;/h3&gt;&lt;p&gt;All Microsoft Graph Functions, Cmdlets and endpoints are called &lt;code&gt;*MgApplication*&lt;/code&gt; for app registration and &lt;code&gt;*MgServicePrincipal*&lt;/code&gt; for service principal related management operations. You can check for yourself by running &lt;code&gt;Get-Command *EnterpriseApplication*&lt;/code&gt; in PowerShell. You&amp;rsquo;ll get zero results.&lt;/p&gt;
&lt;p&gt;Here are some more Microsoft learn links that mention enterprise application in their title but the Microsoft Graph commands are all for service principals.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/delete-application-portal?pivots=ms-powershell&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/delete-application-portal?pivots=ms-powershell&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/restore-application?pivots=entra-powershell&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/restore-application?pivots=entra-powershell&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/assign-app-owners?pivots=ms-powershell&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/assign-app-owners?pivots=ms-powershell&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;At the beginning, I mentioned some blogs claiming that Enterprise applications and service principals are not quite the same things. It&amp;rsquo;s usually not my style to call other people out but I&amp;rsquo;ve had so many discussions about this already that at this point, facts are all that matter to me.&lt;/p&gt;
&lt;p&gt;Of course I&amp;rsquo;m not saying that I&amp;rsquo;m the only one understanding the topic. There are other great blogs out there which nail it. Here are two examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ericonidentity.com/2023/03/11/aad-app-registrations-and-enterprise-applications-the-definitive-guide/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ericonidentity.com/2023/03/11/aad-app-registrations-and-enterprise-applications-the-definitive-guide/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://marileeturscak.com/posts/app-registrations-enterprise-applications-service-principals/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://marileeturscak.com/posts/app-registrations-enterprise-applications-service-principals/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now &lt;a class=&#34;link&#34; href=&#34;https://c-nunnets.medium.com/app-registrations-service-principals-and-enterprise-applications-the-most-misunderstood-parts-298c7b7cf886&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;this&lt;/a&gt; one is one I have a problem with.&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;An Enterprise Application is essentially a Service Principal with additional configurations specific to your tenant. It is created after the App Registration process but exists within your tenant&amp;rsquo;s context. The Enterprise Application object manages how the application is used within the organization, including SSO configurations, user and group assignments, and conditional access policies.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;C-Nunnets on Medium&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;So far, so good. That&amp;rsquo;s all correct. However, further down in the FAQ they state this:&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;&lt;p&gt;Q: Are Service Principals and Enterprise Applications the same thing?
A: Not quite. A Service Principal is an application&amp;rsquo;s identity to act within EntraID. An Enterprise Application is essentially a Service Principal with extra configurations specific to your tenant, such as user assignments and access policies.&lt;/p&gt;
&lt;p&gt;Q: Why do I need all three? Can&amp;rsquo;t I have one?
A: You need all three for a complete application lifecycle in EntraID. You register the app for its basic identity, the Service Principal provides the means for the app to act, and the Enterprise Application manages how it is used within your organization.&lt;/p&gt;
&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;C-Nunnets on Medium&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;These statements are not entirely wrong but they&amp;rsquo;re also not a quite correct. Saying that you need all three things when in reality there are only two kind of objects is just wrong. All the properties, such user and group assignments (who is allowed to use the app) are readable and writeable on service principal objects in Microsoft Graph. There are no settings exclusive to the Enterprise applications menu in Entra ID.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-8.png&#34;
	width=&#34;1798&#34;
	height=&#34;576&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-8_hu_42bbf14f1ea504d4.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-8_hu_7103a2c542bb5c48.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Users and groups of the service principal shown in Enterprise applications menu&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;312&#34;
		data-flex-basis=&#34;749px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-9.png&#34;
	width=&#34;1734&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-9_hu_febe20dfd2a7717f.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-9_hu_76b98df8737f9d96.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Same user returned in Microsoft Graph for the same service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;As you can see, the same properties you see in the portal&amp;rsquo;s Enterprise applications section are also available in Microsoft Graph on service principal objects.&lt;/p&gt;
&lt;h3 id=&#34;proof-no-5---microsoft-employees&#34;&gt;Proof No. 5 - Microsoft Employees
&lt;/h3&gt;&lt;p&gt;To be absolutely sure, I asked the question if Enterprise applications are real Entra ID objects or if they are essentially just a fancy term for service principals to two different Microsoft employees independently. One of them has a weekly newsletter about Entra ID and the other one actively contributes to application identity related documentation on Microsoft Learn. They both confirmed to me that there is no such thing as an enterprise application object in Entra ID and if you boil it down, all enterprise applications are service principals.&lt;/p&gt;
&lt;h2 id=&#34;other-myths-about-app-registrations-and-service-principals&#34;&gt;Other Myths about App Registrations and Service Principals
&lt;/h2&gt;&lt;p&gt;While I&amp;rsquo;m at it, I might as well just keep going and clear up some other myths about app registrations and service principals&amp;hellip;&lt;/p&gt;
&lt;h2 id=&#34;acting-identity-in-app-only-auth-sessions&#34;&gt;Acting Identity in App Only Auth Sessions
&lt;/h2&gt;&lt;p&gt;By now it should be clear, that you need both an app registration and a service principal to authenticate and perform actions against Microsoft Graph. You can&amp;rsquo;t have a service principal without an app registration. Keep in mind, that for multi-tenant apps, you won&amp;rsquo;t see the app registration in your tenant but it must definitely exist in another tenant. I covered what happens when a multi-tenant app registration is deleted from a 3rd party tenant &lt;a class=&#34;link&#34; href=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-ID-app-registration-and-an-enterprise-app-4yyib4g1sk5a/#a-multi-tenant-app-registration-which-you-own&#34; &gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Because service principals are basically spawned off app registrations, it&amp;rsquo;s theoretically possible to only have an app registration but no service principal. However, you won&amp;rsquo;t be able to do anything until you also have a service principal. I already covered that in detail in my &lt;a class=&#34;link&#34; href=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-ID-app-registration-and-an-enterprise-app-4yyib4g1sk5a/#am-i-using-the-service-principal-or-the-app-registration-to-sign-in&#34; &gt;first blog post&lt;/a&gt; about this topic.&lt;/p&gt;
&lt;p&gt;There is one scenario in which you actually want to have &lt;strong&gt;only&lt;/strong&gt; an app registration but no service principal in your tenant. I&amp;rsquo;ll talk about that &lt;a class=&#34;link&#34; href=&#34;#why-would-you-have-an-app-registration-only&#34; &gt;later&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s go over all the different Ids of app registrations and service principals before I actually establish a session using the Microsoft Graph Command Line Tools (Graph PowerShell SDK).&lt;/p&gt;
&lt;h3 id=&#34;app-registration-ids&#34;&gt;App Registration IDs
&lt;/h3&gt;&lt;p&gt;An app registration has two Ids: an Application (client) ID and an Object ID. If you want to learn more about what a client is in OAuth, I suggest reading &lt;a class=&#34;link&#34; href=&#34;https://auth0.com/intro-to-iam/what-is-oauth-2&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;this&lt;/a&gt; and &lt;a class=&#34;link&#34; href=&#34;https://www.oauth.com/oauth2-servers/client-registration/client-ID-secret/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;this&lt;/a&gt; blog post and watch &lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/watch?v=WVNvoiA_ktw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;this&lt;/a&gt; video. By the way, at &lt;code&gt;26:52&lt;/code&gt; John Savill also confirms that the Enterprise applications menu in Entra ID is enumerating your service principals.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-11.png&#34;
	width=&#34;1525&#34;
	height=&#34;660&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-11_hu_3bec0cf31b3cdd4e.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-11_hu_2d0d5961bfb5f4db.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Application (client) ID and Object ID on an app App registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;231&#34;
		data-flex-basis=&#34;554px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The application (client) ID is the globally unique (across all Entra tenants) ID of your application. This is used when you want to establish a session to Microsoft Graph from PowerShell or other applications.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s where it gets confusing again. When you use PowerShell to retrieve an application object (app registration) you must enter the app&amp;rsquo;s &lt;strong&gt;Object ID&lt;/strong&gt; for the &lt;code&gt;-ApplicationId&lt;/code&gt; parameter.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-13.png&#34;
	width=&#34;1734&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-13_hu_d2d537c50d721488.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-13_hu_8dec5441c39930b8.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Using the Application (client) ID from portal fails&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-14.png&#34;
	width=&#34;1734&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-14_hu_4436100704175e10.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-14_hu_235b782fa1d1a2f0.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Using the Object ID as param value for ApplicationId works&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;If you want to retrieve your application object by application (client) ID you need to use a filter:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Get-MgApplication&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-Filter&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;AppId eq &amp;#39;bfdc4320-01d3-4cb0-b033-03ddbe5125d5&amp;#39;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;service-principal-ids&#34;&gt;Service Principal IDs
&lt;/h3&gt;&lt;p&gt;Now let&amp;rsquo;s look at the IDs of service principals. A service principal has an Application ID and an Object ID. The Application ID is always the same as the Application (client) ID of the app registration it&amp;rsquo;s derived of. That is the case for both multi-tenant apps (like Zoom etc.) you&amp;rsquo;ve added to your tenant as well as apps you&amp;rsquo;ve registered in your tenant yourself.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-15.png&#34;
	width=&#34;1483&#34;
	height=&#34;1194&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-15_hu_46a5d41b8812bc5d.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-15_hu_6d138288390ecf84.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Service Principal IDs&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;124&#34;
		data-flex-basis=&#34;298px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When you want to retrieve a service principal with PowerShell, you do that also by passing its &lt;strong&gt;Object ID&lt;/strong&gt; for the param value of &lt;code&gt;ServicePrincipalId&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-16.png&#34;
	width=&#34;1734&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-16_hu_592e4ac7d3ef019f.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-16_hu_d4c56e0a977a0c8c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Get-MgServicePrincipal using the Object ID&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;To retrieve a service principal for an app ID (client ID), you must also use a filter:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Get-MgServicePrincipal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-Filter&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;AppId eq &amp;#39;bfdc4320-01d3-4cb0-b033-03ddbe5125d5&amp;#39;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;In both cases, you must use the object ID to retrieve the object, which kind of makes sense if you compare it to other object related commands in the Microsoft ecosystem. What doesn&amp;rsquo;t really make sense is that the param for &lt;code&gt;Get-MgApplication&lt;/code&gt; is called &lt;code&gt;-ApplicationId&lt;/code&gt; when we generally refer to an app&amp;rsquo;s client ID as the app/application ID but the param expects the object ID. In my opinion something like &lt;code&gt;-ApplicationObjectId&lt;/code&gt; would have made more sense here.&lt;/p&gt;
&lt;h3 id=&#34;establishing-an-app-only-auth-session&#34;&gt;Establishing an App Only Auth Session
&lt;/h3&gt;&lt;p&gt;Once signed in, &lt;code&gt;Get-MgContext&lt;/code&gt; will show your client ID but there&amp;rsquo;s absolutely no mention of the service principal ID being used in that session.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-12.png&#34;
	width=&#34;1734&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-12_hu_21147d4a34293e42.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-12_hu_f4c1ce3747cd54a2.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Client ID in Graph Context&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;So what&amp;rsquo;s the acting identity, is it the app registration or the service principal?&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s the fact that client secrets and certificates are configured on app registrations and not on service principals directly. On the other hand, a service principal literally includes the word &lt;strong&gt;principal&lt;/strong&gt;, as in security principal in its name.&lt;/p&gt;
&lt;p&gt;Luckily, I also have a &lt;a class=&#34;link&#34; href=&#34;https://heusser.pro/p/microsoft-graph-get-an-access-token-from-an-established-powershell-session-zv37e1xmxr86/&#34; &gt;blog post&lt;/a&gt; about how to get an access token of an already established Graph PowerShell session.&lt;/p&gt;
&lt;p&gt;So I inspected the token claims:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-10.png&#34;
	width=&#34;1714&#34;
	height=&#34;1236&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-10_hu_73bcaa8b642adff5.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-10_hu_290159cbb2f313b1.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Claims included in the access token&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;332px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The token claims clearly list the object ID as value of the service principal for &lt;strong&gt;oid&lt;/strong&gt;  alongside the app ID in &lt;strong&gt;app_id&lt;/strong&gt;. I already covered that the sign-in logs only list service principal ids but no application ids in my first blog so this makes sense.&lt;/p&gt;
&lt;p&gt;If I compare this against a token of a delegated session, where a user signed in using their credentials, we can see the the &lt;strong&gt;oid&lt;/strong&gt; is the user&amp;rsquo;s object ID.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-17.png&#34;
	width=&#34;1734&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-17_hu_1b6c5ac8cdf9cffd.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-17_hu_3fb4fb302591575b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Graph Context of Delegated Session with User ID&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-18.png&#34;
	width=&#34;1721&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-18_hu_e65e520174193b55.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-18_hu_9d30007c18a3aa70.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Token claims of delegated session listing user ID as oid&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;185&#34;
		data-flex-basis=&#34;445px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I think it&amp;rsquo;s safe to say that we all agree that in a delegated session, the authenticated user is the &lt;strong&gt;acting&lt;/strong&gt; principal. In that case the oid is the user&amp;rsquo;s ID whereas in an app only auth session the oid is the object ID of the service principal. This makes the service principal the acting identity and not the app registration.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s also the fact that in multi-tenant scenarios, your tenant won&amp;rsquo;t have an app registration object if you&amp;rsquo;re using a 3rd party app. You can&amp;rsquo;t use something to sign in, if you don&amp;rsquo;t have an object for it in the first place.&lt;/p&gt;
&lt;h3 id=&#34;testing-against-a-service-principals-own-object&#34;&gt;Testing against a Service Principal&amp;rsquo;s Own Object
&lt;/h3&gt;&lt;p&gt;I took this even further and made another test. I created an app registration and a service principal and didn&amp;rsquo;t grant any permissions to it. Why? Because security principals without permissions can usually only read and update their own object. I wanted to see if the service principal will be able to update only the service principal object or also the app registration object.&lt;/p&gt;
&lt;p&gt;This screenshot shows that there are no &lt;strong&gt;roles&lt;/strong&gt; listed between &lt;strong&gt;rh&lt;/strong&gt; and &lt;strong&gt;sub&lt;/strong&gt; if you compare it to the one above.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-19.png&#34;
	width=&#34;1709&#34;
	height=&#34;1107&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-19_hu_ff3ac6bda3317871.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-19_hu_a4de969e43c75f6c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Token claims do not include any roles at all&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;154&#34;
		data-flex-basis=&#34;370px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Even with no permissions at all, I&amp;rsquo;m still able to read both the app registration and service principal object of the app I used to sign in. I can&amp;rsquo;t however, read any other objects.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-20.png&#34;
	width=&#34;1723&#34;
	height=&#34;1027&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-20_hu_74934a57dc17877a.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-20_hu_fe9d12e4b38071b6.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Get-MgApplication&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;167&#34;
		data-flex-basis=&#34;402px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-21.png&#34;
	width=&#34;1723&#34;
	height=&#34;1027&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-21_hu_76c61662703bd79e.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-21_hu_bd615c8947fbd840.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Get-MgServicePrincipal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;167&#34;
		data-flex-basis=&#34;402px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Since I&amp;rsquo;m able to read both the application and service principal object, it doesn&amp;rsquo;t prove that the service principal is the acting identity yet.&lt;/p&gt;
&lt;p&gt;Next, I tried updating the display name of both objects. Both failed with &lt;strong&gt;403 forbidden&lt;/strong&gt;. I can only assume that this is because the service principal inherits its display name from the app registration object but since the service principal is the acting identity, it&amp;rsquo;s not allowed to update the app registration object. In other words, the app registration object is not the same object as the signed in, acting identity.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-22.png&#34;
	width=&#34;1716&#34;
	height=&#34;1024&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-22_hu_f207752240182b49.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-22_hu_5d13347e7d9da7b6.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Update-MgApplication and Update-MgServicePrincipal both fail&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;167&#34;
		data-flex-basis=&#34;402px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I then looked for a property which is unique to both objects and identified the &lt;strong&gt;Owners&lt;/strong&gt; property as a good test subject. Owners on app registration and service principal objects are different.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-23.png&#34;
	width=&#34;1723&#34;
	height=&#34;1036&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-23_hu_8b081addd5a67717.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-23_hu_5ae3dedbbd810e4f.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Test adding an owner to the service principal and the app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;166&#34;
		data-flex-basis=&#34;399px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The signed in service principal was allowed to add owners to its own object but was denied adding an owner to its associated app registration.&lt;/p&gt;
&lt;p&gt;Just to be absolutely sure, I tested adding an owner to a different service principal. As expected, this failed.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-24.png&#34;
	width=&#34;1719&#34;
	height=&#34;772&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-24_hu_c430733188d88c94.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-24_hu_fdfc86018aa81c05.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Test adding an owner to a different service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;222&#34;
		data-flex-basis=&#34;534px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;the-ultimate-and-final-test&#34;&gt;The Ultimate and Final Test
&lt;/h3&gt;&lt;p&gt;Just like user accounts, service principals can be disabled. This can be done from a service principal&amp;rsquo;s properties in the portal or through Graph PowerShell.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-28.png&#34;
	width=&#34;1474&#34;
	height=&#34;654&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-28_hu_b6ac5abd464ca4c8.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-28_hu_9ef499e43067a37c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Disabling a Service Principal in the Entra ID portal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;225&#34;
		data-flex-basis=&#34;540px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The equivalent in PowerShell is:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Update-MgServicePrincipal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-ServicePrincipalId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;d1e8a817&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;57e9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;4369&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-a31e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;3ef01c673607&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-AccountEnabled:&lt;/span&gt;&lt;span class=&#34;vm&#34;&gt;$false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;I disabled the service principal but didn&amp;rsquo;t sign out of the established session in PowerShell. When I tried to run a command that worked before again, I got the following error message: &lt;strong&gt;The authenticating application principal is disabled.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-26.png&#34;
	width=&#34;1703&#34;
	height=&#34;763&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-26_hu_79cf354952081ebe.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-26_hu_b61f0bf567f0b676.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Error message for disabled Service Principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;223&#34;
		data-flex-basis=&#34;535px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;And after some time, the token became invalid.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-27.png&#34;
	width=&#34;1719&#34;
	height=&#34;227&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-27_hu_1ed04ecb8b45d0d9.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-27_hu_8b48a86d3438b457.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Invalid Token error message&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;757&#34;
		data-flex-basis=&#34;1817px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;All of this definitely proves that a &lt;strong&gt;service principal&lt;/strong&gt; and not an app registration is the &lt;strong&gt;acting identity&lt;/strong&gt; in an app only auth session. This also ties in to the next topic: are permissions granted to app registrations or service principals?&lt;/p&gt;
&lt;h2 id=&#34;required-permissions-vs-granted-permissions&#34;&gt;Required Permissions vs Granted Permissions
&lt;/h2&gt;&lt;p&gt;I already covered permissions quite a bit in my original post. This time I&amp;rsquo;m trying to shed some light on what is happening when you configure permissions on an app registration and grant consent.&lt;/p&gt;
&lt;p&gt;First of all, permissions are not granted to app registrations. They wouldn&amp;rsquo;t be of any use to them anyway, since I&amp;rsquo;ve just proven that service principals are the identities which act against Microsoft Graph and other resources.&lt;/p&gt;
&lt;p&gt;Again, I totally understand why you&amp;rsquo;d think that permissions are granted to app registrations because of what the portal is doing. But I&amp;rsquo;m going to show you why that&amp;rsquo;s not the case.&lt;/p&gt;
&lt;p&gt;We already know that there&amp;rsquo;s different types of service principals. Service principals which have been created for an associated app registration are of type &lt;strong&gt;Application&lt;/strong&gt;. You can check this by running the following command:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Get-MgServicePrincipal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-ServicePrincipalId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;37b5562c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;7c23&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;46a8-ac32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;5ca4d96dc485&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;fl &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DisplayName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AppId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ServicePrincipalType&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# Output&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;DisplayName&lt;/span&gt;          &lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AdminUnitScopedServicePrincipal&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ID&lt;/span&gt;                   &lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;37b5562c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;7c23&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;46a8-ac32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;5ca4d96dc485&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;AppId&lt;/span&gt;                &lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bfdc4320&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;01d3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;4cb0-b033&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;03ddbe5125d5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ServicePrincipalType&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Application&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;And here&amp;rsquo;s an example of a managed identity:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Get-MgServicePrincipal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-ServicePrincipalId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;08c3773a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;83ca&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;4441&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-a6d4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;35d3bb0bf274&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;fl &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DisplayName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AppId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ServicePrincipalType&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# Output&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;DisplayName&lt;/span&gt;          &lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;mzz-automation&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-account&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;012&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ID&lt;/span&gt;                   &lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;08c3773a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;83ca&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;4441&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-a6d4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;35d3bb0bf274&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;AppId&lt;/span&gt;                &lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0dcc5d4a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;74c0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;4f04&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;88cc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;420a7539166e&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;ServicePrincipalType&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ManagedIdentity&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Managed identities still have an app ID but there is no app registration object in your tenant for them. If permissions where granted to app registrations, managed identities simply wouldn&amp;rsquo;t work.&lt;/p&gt;
&lt;p&gt;This is basically what people mean when they say that app registrations serve as a template or a blueprint for the service principals. On app registrations, developers configure (define) what permissions their app needs in order for it to function properly in your tenant.&lt;/p&gt;
&lt;p&gt;App registrations and configured permissions greatly simplify application management for tenant admins and owners of multi-tenant SaaS apps. You can create a service principal for an app like Zoom and grant all required permissions with a single click during the consent process.&lt;/p&gt;
&lt;p&gt;If app registrations didn&amp;rsquo;t offer this functionality, developers would need to create long and complicated guides to explain to their customers what permissions a customer needs to add manually for their app to work in a customer&amp;rsquo;s tenant.&lt;/p&gt;
&lt;p&gt;In fact, it&amp;rsquo;s not even possible to grant permissions to a service principal from the portal. There is no button to add permissions here. You can only do it from an app registration. To learn about all the ways in which permissions can be added, see &lt;a class=&#34;link&#34; href=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-ID-app-registration-and-an-enterprise-app-4yyib4g1sk5a/#add-permissions-to-applications&#34; &gt;this&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-25.png&#34;
	width=&#34;1927&#34;
	height=&#34;1400&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-25_hu_12c8bb0d6fd8b1a2.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-25_hu_a85b4747c12b8822.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permission on service principal in Entra ID: No add a permission button&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;137&#34;
		data-flex-basis=&#34;330px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-29.png&#34;
	width=&#34;1927&#34;
	height=&#34;1067&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-29_hu_53f5da7e5ec6da05.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-29_hu_6b245722af4ae6d2.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permissions on app registration in Entra ID: Add a permission button available&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;180&#34;
		data-flex-basis=&#34;433px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;If you want to, you can grant permissions directly to a service principal through PowerShell or by using the &lt;a class=&#34;link&#34; href=&#34;https://pnp.github.io/cli-microsoft365/cmd/entra/approleassignment/approleassignment-add&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CLI for M365&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Using the CLI for M365 is actually a lot easier than using Graph PowerShell in this case. Here&amp;rsquo;s an example on how to add a bunch of Graph permissions to a service principal:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# M365 CLI login&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;m365&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;login&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-appId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$appId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-tenant&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-authType&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;browser&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;m365&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;entra&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;approleassignment&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;add&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-appObjectId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$servicePrincipalObjectId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-resource&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Microsoft Graph&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;-scopes&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Application.Read.All,Sites.Selected,User.Read.All,CrossTenantInformation.ReadBasic.All&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Now I&amp;rsquo;m not going to lie, this is confusing to me as well. The param is called &lt;code&gt;--appObjectId&lt;/code&gt; and the description says: &lt;em&gt;Application objectId of the App Registration to which the configured scopes (app roles) should be applied&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;This doesn&amp;rsquo;t add up as I&amp;rsquo;m able to assign new permissions to a managed identity using it&amp;rsquo;s service principal object ID but not its application ID. It&amp;rsquo;s the same for an application service principal. The only ID that the above command works with is the service principal&amp;rsquo;s object ID. And unlike the param description, that makes total sense. (I&amp;rsquo;m going to reach out to the CLI for M365 team and ask for clarification.)&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve added the &lt;strong&gt;Directory.ReadWrite.All&lt;/strong&gt; Graph permission to a service principal now using the CLI for M365. You can see that it&amp;rsquo;s now granted to the service principal in the screenshot below.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-30.png&#34;
	width=&#34;2166&#34;
	height=&#34;1426&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-30_hu_d624dc42a42dca88.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-30_hu_fb1f6d421ae0f5ba.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permissions granted to the service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;151&#34;
		data-flex-basis=&#34;364px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Now if I switch to this service principal&amp;rsquo;s app registration, you can see that permissions are split up between &lt;strong&gt;Configured permissions&lt;/strong&gt; and &lt;strong&gt;Other permissions granted&lt;/strong&gt;. And just because permissions are configured, it doesn&amp;rsquo;t mean they&amp;rsquo;ve been granted as well. Permissions that &lt;strong&gt;actually&lt;/strong&gt; have been granted to the service principal feature a green check.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-31.png&#34;
	width=&#34;2168&#34;
	height=&#34;1673&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-31_hu_793fd2b43bb3ea69.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-31_hu_288d5e3feec3c645.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permissions on the app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;129&#34;
		data-flex-basis=&#34;311px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ChatMessage.Read.All&lt;/strong&gt; hasn&amp;rsquo;t been granted yet. If you go back to the screenshot of the service principal permissions, you can see that it&amp;rsquo;s not available there. This means that it can&amp;rsquo;t be used before consent is granted.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Other permissions granted&lt;/strong&gt; list permissions which have been granted to the service principal directly. Ideally, your apps will never look like this because keeping configured and granted permissions in sync is one of the main purposes of app registrations.&lt;/p&gt;
&lt;p&gt;The property that represents what the portal displays as &lt;strong&gt;configured permissions&lt;/strong&gt; is called &lt;code&gt;RequiredResourceAccess&lt;/code&gt; in Graph objects.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-32.png&#34;
	width=&#34;1734&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-32_hu_4d7dc1b54626abb1.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-32_hu_62ddc1bc38582b13.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Required Resource Access in Graph PowerShell output&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This can be verified by using the browser dev tools as well. When the an app registration&amp;rsquo;s permissions page is loaded, it first gets the app registration by app ID from &lt;code&gt;https://graph.microsoft.com/beta/myorganization/applications(appId=&#39;bfdc4320-01d3-4cb0-b033-03ddbe5125d5&#39;)&lt;/code&gt;.  The response then lists the configured permissions under requiredResourceAccess regardless of if the permissions have already been granted to the service principal.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-33.png&#34;
	width=&#34;770&#34;
	height=&#34;824&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-33_hu_3d144d4a79cb568a.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-33_hu_bd0192f18eb120b4.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Required Resource Access part in web response&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;93&#34;
		data-flex-basis=&#34;224px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Delegated permissions are listed as &lt;strong&gt;Scope&lt;/strong&gt; and application permissions are called &lt;strong&gt;Role&lt;/strong&gt;. In the &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/graph/permissions-reference#chatmessagereadall&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Microsoft Graph Permission Reference&lt;/a&gt; we can see that the ID of &lt;strong&gt;ChatMessage.Read.All&lt;/strong&gt; is &lt;code&gt;b9bb2381-47a4-46cd-aafb-00cb12f68504&lt;/code&gt; which is part of the required resource access even though it hasn&amp;rsquo;t been granted the the service principal yet. You can read more about application and delegated permissions &lt;a class=&#34;link&#34; href=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/#delegated-vs-application-permissions&#34; &gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If we check the ID of a permission which is listed under &lt;strong&gt;Other permissions granted&lt;/strong&gt;, for example &lt;strong&gt;Directory.ReadWrite.All&lt;/strong&gt; (&lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/graph/permissions-reference#directoryreadwriteall&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;19dbc75e-c2e2-444c-a770-ec69d8559fc7&lt;/a&gt;) we can see that it&amp;rsquo;s not part of the required resource access property.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s check the next request in the browser dev tools. This goes to &lt;code&gt;https://graph.microsoft.com/v1.0/servicePrincipals?$filter=appId eq &#39;bfdc4320-01d3-4cb0-b033-03ddbe5125d5&#39;&lt;/code&gt;. This endpoint does not return app role assignments (granted application permissions) or scopes (granted delegated permissions). It&amp;rsquo;s simply performed to find the service principal object ID by filtering service principals for a matching app (client) ID (the one of the current app registration).&lt;/p&gt;
&lt;p&gt;Finally, the portal is requesting the app role assignments (application permissions) and OAuth 2 permission grants (delegated permissions) for the current service principal ID using these requests:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;https://graph.microsoft.com/v1.0/servicePrincipals/37b5562c-7c23-46a8-ac32-5ca4d96dc485/appRoleAssignments?$top=999&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-34.png&#34;
	width=&#34;941&#34;
	height=&#34;1230&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-34_hu_75138299789d089c.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-34_hu_30df366bba4cab24.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Response including application permissions granted to the service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;76&#34;
		data-flex-basis=&#34;183px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The second last permission in the screenshot (19dbc75e-c2e2-444c-a770-ec69d8559fc7) is &lt;strong&gt;Directory.ReadWrite.All&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The second request shows the granted delegated permissions.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;https://graph.microsoft.com/v1.0/oauth2PermissionGrants?$filter=clientId%20eq%20%2737b5562c-7c23-46a8-ac32-5ca4d96dc485%27%20and%20consentType%20eq%20%27AllPrincipals%27&amp;amp;$top=999&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-35.png&#34;
	width=&#34;993&#34;
	height=&#34;377&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-35_hu_5db80da0721bb220.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-35_hu_bb9605ceb5d2c852.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Response including delegated permissions granted to the service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;263&#34;
		data-flex-basis=&#34;632px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;So, earlier I established that service principals are the acting identities in authenticated sessions and this proves that permissions are granted to service principals and not app registrations. App registrations merely define what permissions a service principal should have for the app to function properly.&lt;/p&gt;
&lt;p&gt;The problem is that the portal tricks you into believing that permissions are granted to app registrations because in the portal, granting permissions is only possible through the app registration menu. But behind the scenes permissions are granted to an app&amp;rsquo;s service principal when you grant admin consent to new permissions.&lt;/p&gt;
&lt;p&gt;I wasn&amp;rsquo;t able to fully trace what happens when you grant consent to a permission on an app registration in the browser dev tools but I was able to do it for when you revoke admin consent for a permission.&lt;/p&gt;
&lt;p&gt;In that case, a &lt;strong&gt;DELETE&lt;/strong&gt; request &lt;strong&gt;including the app role ID&lt;/strong&gt; and the &lt;strong&gt;service principal by object ID&lt;/strong&gt; is sent to &lt;code&gt;https://graph.microsoft.com/v1.0/servicePrincipals/37b5562c-7c23-46a8-ac32-5ca4d96dc485/appRoleAssignments/LFa1NyN8qEasMlyk2W3EhSrSirfW4XtPjJPVuu_KHX0&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The app role ID is only present on the service principal&amp;rsquo;s app role assignments and not on the app registration. An app registration simply doesn&amp;rsquo;t hold any privileges, roles or permissions despite the way it&amp;rsquo;s presented in the portal. This was also confirmed to me by the aforementioned Microsoft employees.&lt;/p&gt;
&lt;h2 id=&#34;adding-admin-roles-to-service-principals&#34;&gt;Adding Admin Roles to Service Principals
&lt;/h2&gt;&lt;p&gt;Not only Graph permissions can be assigned to service principals. It&amp;rsquo;s also possible to assign administrative roles, such as Groups Administrator to a service principal. Even in this case, Entra ID doesn&amp;rsquo;t make it easy for us to understand. When you add a role assignment to a service principal, the search result will list a service principal&amp;rsquo;s application ID instead of the object ID. To make it extra confusing, it will even list managed identities as Enterprise applications.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-44.png&#34;
	width=&#34;1982&#34;
	height=&#34;669&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-44_hu_537a2db3e053fc72.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-44_hu_4221820339e67c89.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Detials shows the app ID of a service principal instead of the object ID&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;296&#34;
		data-flex-basis=&#34;711px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-42.png&#34;
	width=&#34;1469&#34;
	height=&#34;951&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-42_hu_3e8ec2401bf72d38.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-42_hu_c2c7d39bea7d8508.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Managed identity properties&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;154&#34;
		data-flex-basis=&#34;370px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;After the role assignment has been added to the service principal, it still shows the app ID as user name but it does say &lt;strong&gt;ServicePrincipal&lt;/strong&gt; under &lt;strong&gt;Type&lt;/strong&gt;. Managed identities do have an app ID but there is no app registration object in the tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-45.png&#34;
	width=&#34;1641&#34;
	height=&#34;575&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-45_hu_582cd09eb7848cae.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-45_hu_4fbde3709c8f7037.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Administrative role assignment for a service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;285&#34;
		data-flex-basis=&#34;684px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Another peek into the browser dev tools also confirms that it&amp;rsquo;s returning the service principal object. (This is also the case for service principals for which an app registration object does exist in the same tenant.)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-41.png&#34;
	width=&#34;1155&#34;
	height=&#34;303&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-41_hu_18094dbdd8037872.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-41_hu_6e10261ce930d494.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Service principal object in web response&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;381&#34;
		data-flex-basis=&#34;914px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-43.png&#34;
	width=&#34;856&#34;
	height=&#34;430&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-43_hu_203f6e1759fc2d33.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-43_hu_3b8348ba806cd181.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Service principal object in web response&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;199&#34;
		data-flex-basis=&#34;477px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;While the portal lists the app ID, the web request to the role assignments endpoint clearly returns &lt;code&gt;Microsoft.DirectoryServices.ServicePrincipal&lt;/code&gt; as principal value and also features the service principal object ID. For comparison, a user role assignment&amp;rsquo;s principal is listed as &lt;code&gt;Microsoft.DirectoryServices.User&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&#34;why-would-you-have-an-app-registration-only&#34;&gt;Why Would you have an App Registration Only?
&lt;/h2&gt;&lt;p&gt;I&amp;rsquo;m not sure how common this misconception is but I want to talk about it anyway. Earlier I said that there is one scenario in which you might want to have an app registration only. That is when you&amp;rsquo;re the publisher of a multi-tenant app and you&amp;rsquo;re either using a dedicated tenant for the app registration or you don&amp;rsquo;t actually need to access any resources in the tenant where your app is registered.&lt;/p&gt;
&lt;p&gt;Most publishers of SaaS apps likely also use their own product but some companies choose to register their applications in a dedicated tenant which is only used to host the app registration and maybe some Azure resources. If I was building a SaaS app, I wouldn&amp;rsquo;t stick my app registration into the same tenant that&amp;rsquo;s used for daily business. I&amp;rsquo;d add the app as an external app to my internal operations tenant the same way as any customer would add the app.&lt;/p&gt;
&lt;p&gt;When I started dealing with app registrations, I always assumed that you need to grant admin consent in any case and that all the checks must be green in order for customers to be able to use the app. That&amp;rsquo;s not the case.&lt;/p&gt;
&lt;p&gt;A service principal only needs to have permissions granted or even needs to be created in each tenant where the app is being used. If I&amp;rsquo;m the provider of a multi-tenant app and I only want my app to access the data of my customers and don&amp;rsquo;t use the app myself in the tenant where the app registration lives, I don&amp;rsquo;t need to grant any permissions. In fact, I don&amp;rsquo;t even need a service principal for it in that tenant.&lt;/p&gt;
&lt;p&gt;As you can see, I only have a multi-tenant app registration but no service principal in the tenant where the app is registered. My app needs the &lt;strong&gt;User.Read.All&lt;/strong&gt; application permission but since there is no service principal for it in my tenant, the permission hasn&amp;rsquo;t been granted. (Granting consent would create the service principal automatically). Finally, the app has a client secret to connect to Microsoft Graph without a signed in user.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-36.png&#34;
	width=&#34;1526&#34;
	height=&#34;611&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-36_hu_5350a6153b7dae39.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-36_hu_5324bff7f8415078.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration in service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;249&#34;
		data-flex-basis=&#34;599px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-37.png&#34;
	width=&#34;1930&#34;
	height=&#34;910&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-37_hu_f349eb708dc5684b.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-37_hu_f8d99d2a91e444f3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Configured permissions of app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;212&#34;
		data-flex-basis=&#34;509px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-38.png&#34;
	width=&#34;1924&#34;
	height=&#34;767&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-38_hu_823dccdef3db6d18.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-38_hu_7efd267d00e57552.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Client secret on app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;250&#34;
		data-flex-basis=&#34;602px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve added the app to another test tenant of mine. (This would be a customer tenant.)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-39.png&#34;
	width=&#34;2215&#34;
	height=&#34;911&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-39_hu_b1226e46475494b6.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-39_hu_3be3ae73075f5bd5.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Multi-tenant app in customer tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;243&#34;
		data-flex-basis=&#34;583px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Now as the app owner, I can connect to the customer tenant using their tenant ID and the client ID of my registered app:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Read-Host&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-Prompt&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Enter the tenant ID&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$credentials&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Get-Credential&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-Message&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Enter the application (client) ID and secret&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Connect-MgGraph&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-TenantId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-ClientSecretCredential&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$credentials&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-NoWelcome&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Since I&amp;rsquo;m passing both the &lt;strong&gt;Tenant ID&lt;/strong&gt; and the &lt;strong&gt;App ID&lt;/strong&gt; in &lt;code&gt;Connect-MgGraph&lt;/code&gt;, I can now access the resources in the customer tenant using the service principal that was created in the customer tenant, when the customer added the app by granting admin consent.&lt;/p&gt;
&lt;p&gt;At first I thought it was weird that the application (client) ID is used for sign in, when the token is issued for the app&amp;rsquo;s service principal but after this test, it makes perfect sense.&lt;/p&gt;
&lt;p&gt;When both the app registration and a service principal exist in the same tenant (like with any single-tenant app), it&amp;rsquo;s easy to find the service principal ID. But when I look at this from a multi-tenant perspective, it becomes clear that I can&amp;rsquo;t possibly know the service principal object ids of all the tenants my app has been added to. And the sign in process/command would need to be unique for each tenant (different service principal ID).&lt;/p&gt;
&lt;p&gt;But by providing the tenant ID and the app ID during sing in, the correct service principal object ID can be determined by the target tenant and a token for it is issued.&lt;/p&gt;
&lt;p&gt;So, here you can see that I&amp;rsquo;m now able to use the &lt;strong&gt;User.Read.All&lt;/strong&gt; application permission which the customer tenant has granted consent to, to query a user from another tenant even though the tenant where the app is registered doesn&amp;rsquo;t even have any granted permissions or let alone a service principal object.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-40.png&#34;
	width=&#34;1734&#34;
	height=&#34;927&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-40_hu_90425f8212626296.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-40_hu_e31f1f254f4f2ebf.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Proof that no service principal is needed in app ownerâ€™s tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary
&lt;/h2&gt;&lt;p&gt;App registrations and service principals remain an extremely complex topic. I generally think it&amp;rsquo;s a good idea to stick to facts and technical terms. Frankly, I&amp;rsquo;m not sure how that will work out in this case as the term Enterprise applications is all over the place in Entra ID but not once mentioned in Graph/PowerShell.&lt;/p&gt;
&lt;p&gt;I guess I don&amp;rsquo;t really care whether we call them Enterprise applications or service principals as long as we&amp;rsquo;re aware of the following key takeaways:&lt;/p&gt;
&lt;p&gt;Enterprise applications is just a term for service principals which are associated with application objects (app registrations). All Enterprise applications are service principals but not all service principals types are considered Enterprise applications as well.&lt;/p&gt;
&lt;p&gt;Enterprise apps sometimes also describe multi-tenant apps for which the app registration lives in another tenant (i.e. Zoom etc.). However, that doesn&amp;rsquo;t bode too well with me either since the Enterprise applications menu in Entra ID also lists all service principals of the apps for which an app registration exists in the same tenant.&lt;/p&gt;
&lt;p&gt;In app only auth scenarios, service principals are the acting identity and permissions are always granted to service principals and not to app registrations.&lt;/p&gt;
&lt;p&gt;I hope that this blog provided new insights and answers to some of the questions you might have had. Gathering all of this information and proof was quite fun but also very time intensive. If you appreciate the effort, feel free to buy me a coffee.&lt;/p&gt;
&lt;p&gt;At this point I&amp;rsquo;d also like to thank all the people who already bought me a coffee after reading my original article.&lt;/p&gt;
&lt;h2 id=&#34;whats-next&#34;&gt;What&amp;rsquo;s Next?
&lt;/h2&gt;&lt;p&gt;I think most of the problems outlined in this blog post are owed to the fact that Entra ID uses two separate menus (App registrations and Enterprise applications) to manage the different types of objects, even though they&amp;rsquo;re closely related.&lt;/p&gt;
&lt;p&gt;Each app registration and service principal share two (visible and obvious) things: the application (client) ID and the application name. This got me thinking&amp;hellip; what if we stop thinking about them as two separate things but rather start thinking of them as &lt;strong&gt;one app&lt;/strong&gt; consisting of different objects.&lt;/p&gt;
&lt;p&gt;Wouldn&amp;rsquo;t it be great to see only an app&amp;rsquo;s name and ID but instantly know what kind of objects exist for any app in my tenant? Do I have an app registration and a service principal or is it an external app owned by someone else, in which case I only have a service principal?&lt;/p&gt;
&lt;p&gt;Over the past couple of weeks, I&amp;rsquo;ve been prototyping an Azure runbook that leverages the Graph API to gather and combine all the relevant information to then update a SharePoint list on a schedule. This gives me a single pane of glass type of thing where I can see all my apps, including all important properties.&lt;/p&gt;
&lt;p&gt;The list allows me to do all kinds of cool stuff like creating pre-built filters in different views but also offers great search and filtering capabilities. For example, I can search for any Graph permission and immediately see any apps that have that exact permission.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ll be sharing more information and the code to build this yourself over the next couple of months. Here&amp;rsquo;s a sneak peek of it:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-6.png&#34;
	width=&#34;3267&#34;
	height=&#34;997&#34;
	srcset=&#34;https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-6_hu_285110992b75b84f.png 480w, https://heusser.pro/p/understanding-entra-id-app-registrations-enterprise-applications-and-service-principals-part-2-os8rb48knqez/image-6_hu_ad2f9493ef28d99a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Sneak peek of Unified Entra Apps View in a SharePoint list&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;327&#34;
		data-flex-basis=&#34;786px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Stay tuned!&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Understanding Microsoft Entra ID App Registrations, Enterprise Apps and Service Principals</title>
        <link>https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/</link>
        <pubDate>Thu, 05 Dec 2024 15:17:25 +0000</pubDate>
        
        <guid>https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/</guid>
        <description>&lt;h2 id=&#34;intro&#34;&gt;Intro
&lt;/h2&gt;&lt;p&gt;I once read a joke on X which I just vaguely remembered. Somebody was looking for a job in IT and the person hiring was like:&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;&lt;em&gt;If you can tell me the difference between an Entra app registration and an enterprise app, I&amp;rsquo;ll hire you.&lt;/em&gt;&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Some guy on X&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/cover.png&#34;
	width=&#34;726&#34;
	height=&#34;669&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/cover_hu_79cae35b24a4d528.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/cover_hu_b8a8b0395ae5c27c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;108&#34;
		data-flex-basis=&#34;260px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;If you&amp;rsquo;re a seasoned developer, you might already know all of this but if you&amp;rsquo;re a systems administrator coming from a more traditional world, like I am, much of the stuff I&amp;rsquo;m covering today might be new, confusing, overwhelming or all the above to you. But rest assured, I didn&amp;rsquo;t fully understand it either until today.&lt;/p&gt;
&lt;p&gt;I want to highlight that identity isn&amp;rsquo;t my primary focus, but it was still very important to me to understand all aspects of Entra applications. Most of the blog posts that already exist about Entra applications are written by professional developers and just assume that you&amp;rsquo;re already familiar with certain things. That&amp;rsquo;s what I&amp;rsquo;m trying to do differently with this article.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ll give you an example. Let&amp;rsquo;s say you need to change the usage location of an Entra ID user, and you want to do it with PowerShell. A couple of years ago, you could just install the AzureAD PowerShell module, log in with your account and get it done by running &lt;code&gt;Set-AzureADUser -ObjectId user@domain.com -UsageLocation CH&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;In today&amp;rsquo;s world you need to connect to Microsoft Graph using the Microsoft Graph PowerShell SDK (Microsoft.Graph.* PowerShell modules) and you need to make sure that the appropriate permissions have been granted to the enterprise app before you can do that, even if the account you&amp;rsquo;re using to sign in already has the permissions to do the same action in the Entra Admin Center.&lt;/p&gt;
&lt;p&gt;In this particular example, I&amp;rsquo;m talking about what&amp;rsquo;s referred to as an enterprise app or an enterprise application. The name of the official enterprise app that&amp;rsquo;s used to access your tenant when using the Graph PowerShell modules is &lt;strong&gt;Microsoft Graph Command Line Tools&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image_hu_96263d9e9aee30a.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image_hu_b23b3e1ed1942567.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Microsoft Graph Command Line Tools Enterprise Application&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;You can see that it says &lt;strong&gt;Enterprise Application&lt;/strong&gt; below the name in the screenshot above. However, when you search for its Application ID, it lists the name under &lt;strong&gt;Enterprise Applications&lt;/strong&gt;, but it also says &lt;strong&gt;Service Principal&lt;/strong&gt; next to it.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-1.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-1_hu_a7d43b28fd91fa6.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-1_hu_eda6b27c5396877a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Application ID search results&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Because this app is owned and published by Microsoft, there&amp;rsquo;s no app registration for it in your tenant. You can only see the enterprise app. Only Microsoft can see the app registration in the tenant in which they registered the app (created the app registration).&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s recap this quickly. Microsoft created an app registration for the Microsoft Graph Command Line Tools and published it. Any Entra ID admin can now add this app to their tenant as an enterprise app and use it to connect to Microsoft Graph via PowerShell.&lt;/p&gt;
&lt;p&gt;So, when I use &lt;code&gt;Connect-MgGraph&lt;/code&gt; and don&amp;rsquo;t specify my own Client Id, I&amp;rsquo;m automatically signing in to Microsoft&amp;rsquo;s enterprise app.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-3.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-3_hu_ba3d95f260795a3c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-3_hu_7cfa598ab939230e.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Partial output of Get-MgContext&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;whats-the-difference-between-an-enterprise-app-and-a-service-principal&#34;&gt;What&amp;rsquo;s the difference between an enterprise app and a service principal?
&lt;/h2&gt;&lt;p&gt;They are the same thing. Enterprise apps are just what they are called in the Entra Admin Center but they&amp;rsquo;re essentially service principals. The naming and UI elements here are very confusing. We already saw that searching for the app id in Entra Admin Center will say Service Principal next to the app but throughout this article, I&amp;rsquo;m going to show you more proof why every enterprise app is a service principal.&lt;/p&gt;
&lt;p&gt;What&amp;rsquo;s a service principal then?&lt;/p&gt;
&lt;p&gt;A service principal is always linked to an application (registration) either in your tenant or in another tenant. They inherit and share some of their properties, like the app id from their linked application. In essence, a service principal is an instance, or a child object, if you will, of a global application registered in Entra ID but it&amp;rsquo;s unique to your tenant. Even if another tenant owns the app, service principals will allow you to manage how and by which users the app will be used.&lt;/p&gt;
&lt;p&gt;If you search for &lt;code&gt;Service Principal&lt;/code&gt; in the global Entra Admin Center search box it will list &lt;strong&gt;Enterprise applications&lt;/strong&gt; as the top result.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-4.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-4_hu_c5e5a15bfee28006.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-4_hu_8fb91e57aab5e3f4.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Entra Admin Center search results&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;whats-the-difference-between-the-application-id-and-the-object-id-of-an-enterprise-app&#34;&gt;What&amp;rsquo;s the difference between the application ID and the Object ID of an Enterprise App?
&lt;/h3&gt;&lt;p&gt;These are the descriptions when you click on the little (i) icons on an enterprise app in Entra Admin Center:&lt;/p&gt;
&lt;h4 id=&#34;application-id&#34;&gt;Application ID
&lt;/h4&gt;&lt;blockquote&gt;
    &lt;p&gt;This is the unique application ID of this application in your directory. You can use this application ID if you ever need help from Microsoft Support, or if you want to perform operations against this specific instance of the application using Microsoft Graph or PowerShell APIs.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Entra Admin Center&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;The application id is the same in all tenants where the enterprise app has been added to.&lt;/p&gt;
&lt;h4 id=&#34;object-id&#34;&gt;Object ID
&lt;/h4&gt;&lt;blockquote&gt;
    &lt;p&gt;This is the unique ID of the service principal object associated with this application. This ID can be useful when performing management operations against this application using PowerShell or other programmatic interfaces.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Entra Admin Center&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;The object id is unique in every tenant to which the enterprise app has been added to. If an enterprise app is deleted and later added again, the object id will also change. The application id on the other hand is the same in every tenant because it&amp;rsquo;s derived of the application id of the registered app for which the service principal was created.&lt;/p&gt;
&lt;h3 id=&#34;adding-an-enterprise-app-to-your-tenant&#34;&gt;Adding an Enterprise App to Your Tenant
&lt;/h3&gt;&lt;p&gt;Providers/publishers of enterprise apps will typically give you a link which you have to open in order to grant admin consent on behalf of your organization. Granting admin consent will add the enterprise app to your tenant and requires global administrator rights.&lt;/p&gt;
&lt;p&gt;In the case of the Microsoft Graph Command Line Tools, the enterprise app can be added simply by running &lt;code&gt;Connect-MgGraph&lt;/code&gt;. This will open the browser and ask you for your consent.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-6.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-6_hu_cb95241fa5bb298a.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-6_hu_d06298f67c7aa572.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Grant admin consent to add the enterprise app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve just added the Microsoft Graph Command Line Tools enterprise app to a tenant where it didn&amp;rsquo;t exist before. If I check the audit log of the enterprise app, I can clearly see that there&amp;rsquo;s been an action for &lt;strong&gt;Add service principal&lt;/strong&gt; even though the portal is calling it an enterprise application.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-7.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-7_hu_1c541fef0100fa4f.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-7_hu_632cb95c0d77d8c0.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise application audit log&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-8.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-8_hu_3352a86bb5b65a88.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-8_hu_a4093eb35702e4bb.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add service principal audit log details&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Since it&amp;rsquo;s obvious that the same thing is sometimes called an enterprise app but sometimes it&amp;rsquo;s also called a service principal, I&amp;rsquo;ll try my best to stick to whatever the screenshots or code examples are calling it at the time. So, if the screenshot/code example is saying enterprise app, I&amp;rsquo;ll call it an enterprise app. If it&amp;rsquo;s saying service principal, I&amp;rsquo;m referring to it as a service principal as well.&lt;/p&gt;
&lt;h2 id=&#34;im-a-sys-admin-why-should-i-care-about-all-of-this&#34;&gt;I&amp;rsquo;m a Sys Admin, why should I care about all of this?
&lt;/h2&gt;&lt;p&gt;Let&amp;rsquo;s quickly go back to the example I used in the intro of this post. Let&amp;rsquo;s assume that all you want to do is to use PowerShell to change the usage location of a user. Why should you care about all of this? Why do you need an app for this? And what even is an app in this context? Is it an enterprise app or an app registration?&lt;/p&gt;
&lt;p&gt;If you use the official Microsoft Graph Command Line Tools enterprise app, which you are when you run &lt;code&gt;Connect-MgGraph&lt;/code&gt; without specifying your own &lt;code&gt;-ClientId&lt;/code&gt; then you don&amp;rsquo;t need to worry about all this too much. All you need to do is to ask somebody with global admin permissions to add the enterprise app to your tenant and consent to the &lt;code&gt;User.Write.All&lt;/code&gt; permission. That is, if you don&amp;rsquo;t have global admin rights yourself.&lt;/p&gt;
&lt;p&gt;I purposely chose the Microsoft Graph Command Line Tools enterprise app for this example because a lot of Sys Admins will need that to do their job. The thing with PowerShell scripts is that there won&amp;rsquo;t always be something that&amp;rsquo;s graspable, something that can be referred to as an app. A script is not really an app, but it still needs an Entra application to sign into Microsoft Graph to do whatever it needs to do.&lt;/p&gt;
&lt;p&gt;This is different from when we look at a &lt;em&gt;real&lt;/em&gt;, graspable app like Zoom for example. In that case, we have the Zoom app (the Zoom client installed on a device). But we&amp;rsquo;ll also need to grant permissions the Zoom enterprise app to read/write the signed in user&amp;rsquo;s calendar information if users want to link their Exchange calendar to Zoom.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-10.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-10_hu_569c1f1df82738c5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-10_hu_a42209a2fc4066e7.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Example: Zoom enterprise app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The Zoom app and the Zoom enterprise app are definitely not the same thing even though both are called an app. Assigning the enterprise app to users won&amp;rsquo;t install Zoom on their devices. That&amp;rsquo;s what Intune is for.&lt;/p&gt;
&lt;p&gt;So, as a Sys Admin, you might not be developing the next Zoom app that will be used by millions of people in thousands of Entra ID tenants, but you simply want to create a PowerShell script that changes the usage location of an Entra ID user.&lt;/p&gt;
&lt;p&gt;The Microsoft Graph Command Line Tools enterprise app can only exist once in each tenant so if the entire IT staff of a company is using the same app to manage Entra ID, consented permissions can accumulate and spiral out of control rather quickly. There is a good article about that from Tony Redmond over at &lt;a class=&#34;link&#34; href=&#34;https://practical365.com/connect-microsoft-graph-powershell-sdk/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Practical 365&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you want to avoid that, then you&amp;rsquo;ll need to create your own app to connect to Graph. This is where you&amp;rsquo;ll have to deal with app registrations.&lt;/p&gt;
&lt;h2 id=&#34;what-are-app-registrations&#34;&gt;What Are App Registrations?
&lt;/h2&gt;&lt;p&gt;Adding an enterprise app is only possible when an app registration already exists either in your own tenant or in an external one.&lt;/p&gt;
&lt;p&gt;When I go to enterprise apps in Entra Admin Center and click on &lt;strong&gt;Create your own application&lt;/strong&gt; and then select &lt;strong&gt;Register an application to integrate with Microsoft Entra ID (App you&amp;rsquo;re developing)&lt;/strong&gt; and click &lt;strong&gt;Create&lt;/strong&gt; nothing happens just yet. Instead, I&amp;rsquo;m redirected to the &lt;strong&gt;App registrations&lt;/strong&gt; page.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-11.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-11_hu_c9861e2986b0040e.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-11_hu_3530a8176326e3d9.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Trying to create a new enterprise appâ€¦&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-9.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-9_hu_6f8fe73ad55f4294.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-9_hu_f9ed2205ba4ca686.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;â€¦will take you to App registrations&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This means that there is no such thing as an enterprise app without an existing app registration. Not even in PowerShell. I&amp;rsquo;ll talk more about this later.&lt;/p&gt;
&lt;p&gt;The Entra Admin Center specifically says &lt;strong&gt;App you&amp;rsquo;re developing&lt;/strong&gt; but it could also be &lt;em&gt;just&lt;/em&gt; a script that you&amp;rsquo;re developing.&lt;/p&gt;
&lt;h3 id=&#34;create-an-app-registration&#34;&gt;Create an App Registration
&lt;/h3&gt;&lt;h4 id=&#34;in-entra-admin-center&#34;&gt;In Entra Admin Center
&lt;/h4&gt;&lt;p&gt;App registrations can be found in the Entra Portal under &lt;code&gt;Identity\Applications\App registrations&lt;/code&gt;. Enterprise applications are also found in the same menu, which is another reason why it&amp;rsquo;s so hard to differentiate between the two. As you can see in the screenshot below, there is no app registration for &lt;strong&gt;Microsoft Graph Command Line Tools&lt;/strong&gt; in my tenant even though I&amp;rsquo;ve added the enterprise app before.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-12.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-12_hu_215a71c17754e958.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-12_hu_9717079fced8f001.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registrations in Microsoft Entra Admin Center&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;An app registration is essentially exactly what the name says. It simply registers an app in Entra ID. When you create a new app registration, you&amp;rsquo;re basically just telling Entra ID that this app now exists but you can&amp;rsquo;t really do anything with the app registration alone.&lt;/p&gt;
&lt;p&gt;An Entra app can be registered to be added to either a single tenant (the tenant in which you register it), Multitenant (any Entra ID tenant) or Multitenant + personal Microsoft Accounts which are used for sign-ins with Microsoft 365 Family/Outlook.com/Skype/Xbox etc.&lt;/p&gt;
&lt;p&gt;If you want to use this app to connect to Graph PowerShell in a script and you only need to manage your own tenant, making it available in your tenant only is the choice to go with. If you were in fact developing the next Zoom, you should choose to make it multi-tenant.&lt;/p&gt;
&lt;p&gt;Here I&amp;rsquo;m creating a new single-tenant app registration called &lt;strong&gt;Graph PowerShell Demo (Created in Portal)&lt;/strong&gt;. If you want to sign into your app in Graph PowerShell, you also need to set the &lt;strong&gt;Redirect URI&lt;/strong&gt; to &lt;strong&gt;Public client/native (mobile &amp;amp; desktop)&lt;/strong&gt; and configure &lt;code&gt;http://localhost&lt;/code&gt; as the redirect URI.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-13.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-13_hu_c11a9b2d342776d3.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-13_hu_de77d22d1a62c0ad.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Register a new application&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This is what you&amp;rsquo;ll see after the app registration has been created.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-16.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-16_hu_7af48fd2ed59da16.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-16_hu_5f8e08a3a6017951.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration after itâ€™s been created in the portal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;A very important part which is not often mentioned is that when you register a new app in the portal, an enterprise app (service principal) is automatically created for it as well.&lt;/p&gt;
&lt;p&gt;When I search for the &lt;strong&gt;application (client) ID&lt;/strong&gt; of the newly created app in Entra ID, two objects are returned. An app registration (application) and an enterprise application (service principal).&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-14.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-14_hu_db88a2ac764698c2.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-14_hu_543d45edae755870.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration and enterprise application in search results&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;We can also see this very clearly in the audit log. First the application (app registration) is added and immediately after that, the service principal (enterprise app) is added as well.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-15.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-15_hu_fa3b13b0b2763fc8.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-15_hu_642beffd97ca7fd3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Audit log after creating a new app registration in the portal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;In the details for the &lt;strong&gt;Add application&lt;/strong&gt; activity the modified properties include a property named &lt;strong&gt;ServicePrincipalLockConfiguration&lt;/strong&gt; which is a Json object and includes &lt;code&gt;&amp;quot;IsEnabled&amp;quot;: &amp;quot;true&amp;quot;&lt;/code&gt;. I &lt;em&gt;think&lt;/em&gt; that this is the part where the Entra Admin Center tells the provisioning backend to create a service principal for the app registration as well.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-18.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-18_hu_bbf1282aac997bde.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-18_hu_2ac4f322832ae06.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add application log details&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;For the &lt;strong&gt;Add service principal&lt;/strong&gt; activity we can see that the modified properties include the &lt;strong&gt;Application (client) ID&lt;/strong&gt; as value for the &lt;strong&gt;ServicePrincipalName&lt;/strong&gt; and &lt;strong&gt;TargetId.ServicePrincipalNames&lt;/strong&gt; properties.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-17.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-17_hu_24aa6a2fade84e52.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-17_hu_28f1008dec6d6558.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add service principal log details&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;in-powershell&#34;&gt;In PowerShell
&lt;/h4&gt;&lt;p&gt;To register a new app in PowerShell you have two options. You can either use the recently &lt;a class=&#34;link&#34; href=&#34;https://techcommunity.microsoft.com/t5/microsoft-entra-blog/introducing-the-microsoft-entra-powershell-module/ba-p/4173546/page/2&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;announced&lt;/a&gt; &lt;strong&gt;Microsoft.Graph.Entra&lt;/strong&gt; module which is still in preview at the time of writing, or you can use the Cmdlet which is part of the &lt;strong&gt;Microsoft.Graph.Applications&lt;/strong&gt; module.&lt;/p&gt;
&lt;h5 id=&#34;with-entra-powershell-module&#34;&gt;With Entra PowerShell Module
&lt;/h5&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.entra/new-entraapplication?view=entra-powershell&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Docs&lt;/a&gt; for &lt;code&gt;New-EntraApplication&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PowerShell&#34; data-lang=&#34;PowerShell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Connect-Entra&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-Scopes&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Application.ReadWrite.All&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$appName&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Graph PowerShell Demo (Created with Entra PS)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$newApp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;New-EntraApplication&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-DisplayName&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$appName&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h5 id=&#34;with-microsoft-graph-powershell&#34;&gt;With Microsoft Graph PowerShell
&lt;/h5&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.applications/new-mgapplication?view=graph-powershell-1.0&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Docs&lt;/a&gt; for &lt;code&gt;New-MgApplication&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PowerShell&#34; data-lang=&#34;PowerShell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Connect-MgGraph&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-Scopes&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Application.ReadWrite.All&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$appName&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Graph PowerShell Demo (Created with Graph PS)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$newApp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;New-MgApplication&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-DisplayName&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$appName&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Both Cmdlets are called &lt;code&gt;New-*Application&lt;/code&gt; but in the portal this action is called &lt;strong&gt;Register an application&lt;/strong&gt;. The menu which lists applications in the portal is called &lt;strong&gt;App registrations&lt;/strong&gt; but in PowerShell we use &lt;code&gt;Get-EntraApplication&lt;/code&gt; or &lt;code&gt;Get-MgApplication&lt;/code&gt; to retrieve registered apps.&lt;/p&gt;
&lt;p&gt;As if this wasn&amp;rsquo;t confusing enough already, we now have to understand that what is presented to us as an &lt;strong&gt;app registration&lt;/strong&gt; in the portal is sometimes also called &lt;em&gt;just&lt;/em&gt; an &lt;strong&gt;application&lt;/strong&gt;. When you create a new app registration, you&amp;rsquo;re creating a new application by registering it. The portal takes the verb &lt;strong&gt;registering&lt;/strong&gt; and converts it into a noun by calling it an &lt;strong&gt;app registration&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The outcome of both the above examples is exactly the same. For the sake of simplicity, I&amp;rsquo;m only going to focus on &lt;strong&gt;Graph PowerShell Demo (Created with Entra PS)&lt;/strong&gt; in this section.&lt;/p&gt;
&lt;p&gt;As you can see below, when the app is created through PowerShell, no enterprise app is created automatically. Only the application is created (registered).&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-19.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-19_hu_d3baf158c8ac2a9c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-19_hu_896013b4b3edeef8.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;The enterprise app/service principal is missing&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;We have the audit log to back this up. It&amp;rsquo;s only showing an &lt;strong&gt;Add application&lt;/strong&gt; action.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-20.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-20_hu_906f42a891559c3c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-20_hu_ea3130e717c2acea.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Audit log is only showing add application&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;h6 id=&#34;add-a-service-principal-with-powershell&#34;&gt;Add a Service Principal with PowerShell
&lt;/h6&gt;&lt;p&gt;When you view the &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/powershell/entra-powershell/manage-apps?view=entra-powershell&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;documentation&lt;/a&gt; for managing applications using the Entra PowerShell module, it becomes clear that registering an application and adding a service principal are two separate actions requiring different Cmdelts. There is absolutely no reference at all about enterprise apps on that Microsoft Learn page. They only talk about service principals.&lt;/p&gt;
&lt;p&gt;To add a service principal for an app you registered using &lt;code&gt;New-EntraApplication&lt;/code&gt; you&amp;rsquo;ll need to run this code to add a service principal for it:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;New-EntraServicePrincipal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-AppId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$newApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;AppId&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;After this, you&amp;rsquo;ll see an app registration and an enterprise app when you search for the app id in the Entra Admin Center.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-21.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-21_hu_c3d1b401cf387193.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-21_hu_c30cbf154c3f2931.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app created with PowerShell&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I told you earlier that you cannot create an enterprise app/service principal if no app has been registered for it before.&lt;/p&gt;
&lt;p&gt;I tried to create a new service principal without specifying an app id anyway and I was immediately prompted for an AppId.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-23.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-23_hu_1828a45eddccfe0.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-23_hu_2f985137096462cc.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Prompt for required parameter -AppId&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;As expected, the &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.entra/new-entraserviceprincipal?view=entra-powershell#-appid&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;documentation&lt;/a&gt; for &lt;code&gt;NewEntraServicePrincipal&lt;/code&gt; lists the &lt;code&gt;-AppId&lt;/code&gt; parameter as required. Funny enough, the &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.applications/new-mgserviceprincipal?view=graph-powershell-1.0#-appid&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;docs&lt;/a&gt; for &lt;code&gt;New-MgServicePrincipal&lt;/code&gt; say it&amp;rsquo;s not required but that&amp;rsquo;s definitely not the case.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-24.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-24_hu_31de6e487d1e4b3.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-24_hu_1d1f9deb719a739.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Error details of New-MgServicePrincipal without -AppId&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;connect-to-graph-powershell-using-your-own-app&#34;&gt;Connect to Graph PowerShell Using Your Own App
&lt;/h2&gt;&lt;p&gt;Now that I have an app registration and a service principal, I can use the application id to sign into Graph PowerShell.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PowerShell&#34; data-lang=&#34;PowerShell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;4bffbf87-53a0-4fce-b58b-4179cb3a3b7d&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$appId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;90b85c34-0c3f-4d69-9668-ea74f20e5d62&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Connect-MgGraph&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-NoWelcome&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-TenantId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-ClientId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$appId&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;If I&amp;rsquo;m doing this for the first time, I&amp;rsquo;m prompted for admin consent. Note that you&amp;rsquo;ll need to specify the redirect URI either when creating the app registration through PowerShell or you&amp;rsquo;ll have to do it manually in the portal afterwards. Otherwise, this won&amp;rsquo;t work.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-26.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-26_hu_b4ac1020c17096f1.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-26_hu_5e0075b5da97ff3b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Admin consent request&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Now you can see that I&amp;rsquo;m signed in using my own app and I&amp;rsquo;m not using the &lt;strong&gt;Microsoft Graph Command Line Tools&lt;/strong&gt; app anymore.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-98.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-98_hu_fa8a8a9961191ac3.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-98_hu_c28c6f1e8c1b446b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Partial output of Get-MgContext&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When I finally try to update a user&amp;rsquo;s usage location with an account that has global admin rights, I still get an error message because of insufficient privileges. This is because the &lt;strong&gt;User.ReadWrite.All&lt;/strong&gt; permission is not part of the &lt;strong&gt;Scopes&lt;/strong&gt; yet. I&amp;rsquo;ll show you how to add that later on.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-27.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-27_hu_7d658d3680f5fd30.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-27_hu_e37d8416fb4eab8c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Insufficient privileges&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;what-if-there-is-no-enterprise-appservice-principal-yet&#34;&gt;What if there is no Enterprise App/Service Principal Yet?
&lt;/h3&gt;&lt;p&gt;When you&amp;rsquo;re automating the registering of an app through a script, there&amp;rsquo;s no reason why you wouldn&amp;rsquo;t also create the service principal through the same PowerShell script but since this is a deep dive, I&amp;rsquo;m going to show you an alternative way anyway.&lt;/p&gt;
&lt;p&gt;If an app registration is only telling Entra ID that an app exists, and no service principal exists for the app registration, will I still be able to sing in and use it?&lt;/p&gt;
&lt;p&gt;The answer to this question is yes and no. Technically, you cannot use only an app registration to sign into the app. However, when you connect to Microsoft Graph and specify the &lt;code&gt;-ClientId&lt;/code&gt; of an app registration that does not have a service principal yet, one is automatically created after you&amp;rsquo;ve granted admin consent.&lt;/p&gt;
&lt;p&gt;Since I&amp;rsquo;ve already added a service principal for &lt;strong&gt;Graph PowerShell Demo (Created with Entra PS)&lt;/strong&gt; with PowerShell, I&amp;rsquo;m going to demo this using the app called &lt;strong&gt;Graph PowerShell Demo (Created with Graph PS)&lt;/strong&gt; which I&amp;rsquo;ve created with &lt;code&gt;New-MgApplication&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This app currently only has an app registration but no enterprise app/service principal.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-25.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-25_hu_ca50d1bd6c25ee20.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-25_hu_cb683a4629c8efbe.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Graph PowerShell Demo (Created with Graph PS)&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I did however add &lt;code&gt;http://localhost&lt;/code&gt; as a redirect URI in the app registration through the portal after I&amp;rsquo;ve created the app with PowerShell.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-28.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-28_hu_68d327a8bf66cb0c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-28_hu_def9a61d9e1119ce.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Authentication page of the app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Now watch what happens when I sign into the app through &lt;code&gt;Connect-MgGraph&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;First of all, I need to grant consent for this app as well.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-30.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-30_hu_ecd8c5a1b1f2a855.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-30_hu_fb959ef2b554cb81.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Admin consent request&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;After granting the consent I&amp;rsquo;m in.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-29.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-29_hu_82dc275bc51301b6.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-29_hu_40de374f4ef6863b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Partial output of Get-MgContext&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;But how is that possible when there&amp;rsquo;s no service principal for this app registration yet? Well, this also triggered the creation of a new service principal, just like signing into Graph PowerShell using the Microsoft Graph Command Line Tools did.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-31.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-31_hu_a2d7a65f77fa279b.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-31_hu_9c211b345a72ba1b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;The enterprise app/service principal was created after consent was granted.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;And of course, this can also be seen in the audit log.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-35.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-35_hu_efe324c066177228.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-35_hu_859424e52c9cb847.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Audit log actions after signing into the app for the first time&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;quickly-switch-between-an-app-registration-and-its-service-principal&#34;&gt;Quickly Switch Between an App Registration and It&amp;rsquo;s Service Principal
&lt;/h3&gt;&lt;p&gt;When you&amp;rsquo;re managing apps and frequently need to switch between configuring the app registration and it&amp;rsquo;s enterprise app, the quickest way to do so is to open the &lt;strong&gt;API permissions&lt;/strong&gt; menu on the app registration or the &lt;strong&gt;Permissions&lt;/strong&gt; menu on the enterprise app.&lt;/p&gt;
&lt;p&gt;When you&amp;rsquo;re viewing an app registration, there&amp;rsquo;s a link called &lt;strong&gt;Enterprise applications&lt;/strong&gt; at the bottom of the browser window which will take you directly to the enterprise app of this app registration.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-32.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-32_hu_261a2eaf1a1e39a2.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-32_hu_73164bc3fbe3935e.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;API permissions in an app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;To get from an enterprise to its app registration (if it was registered in your tenant) you can click on the &lt;strong&gt;Application registration&lt;/strong&gt; link in the middle of the browser window.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-33.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-33_hu_b15133ba8a7b1cf5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-33_hu_3620e6a76e2ba28d.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permissions in enterprise app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Obviously, this part is missing from an enterprise app for which no app registration exists in your tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-34.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-34_hu_a2c39101c81fa360.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-34_hu_9f19262d3c0773d4.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Example: Microsoft Graph Command Line Tools&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;quick-recap&#34;&gt;Quick Recap
&lt;/h2&gt;&lt;p&gt;If you&amp;rsquo;re still with me, I&amp;rsquo;d like to recap and elaborate on a couple of things. App registrations register an app in the Microsoft Entra Eco System. An application (client) ID of an app registration is unique across all Entra ID tenants. That&amp;rsquo;s documented &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/powershell/entra-powershell/manage-apps?view=entra-powershell#register-an-application&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;here&lt;/a&gt;. Therefore, an app registration can only exist in &lt;strong&gt;one&lt;/strong&gt; tenant.&lt;/p&gt;
&lt;p&gt;An enterprise app is the same thing as a service principal. The Entra Admin center and other UI elements typically use the term enterprise application but Graph PowerShell and audit logs typically use the term service principal for them.&lt;/p&gt;
&lt;p&gt;Enterprise apps can be added and exist in any tenant. If you register a new app in the Entra Admin Center, you&amp;rsquo;ll see both an app registration and an enterprise app for it in your tenant. Because they&amp;rsquo;re directly linked to each other, they always share the same display name and application id.&lt;/p&gt;
&lt;p&gt;If you&amp;rsquo;re adding an enterprise app from a vendor, you won&amp;rsquo;t see an app registration in your tenant because the app was registered as a multi-tenant app in a different tenant.&lt;/p&gt;
&lt;p&gt;When you create an app registration in the portal, a service principal is automatically added as well. When you create a new app registration through PowerShell you have to manually create a service principal for it.&lt;/p&gt;
&lt;p&gt;App registrations are also called &lt;em&gt;just&lt;/em&gt; applications and until a service principal is created for them, they don&amp;rsquo;t really do anything except telling Entra ID that the app exists and specifying what permissions should be requested when an enterprise app for the app registration is added. When signing into your app, the service principal is used.&lt;/p&gt;
&lt;h2 id=&#34;renaming-apps&#34;&gt;Renaming Apps
&lt;/h2&gt;&lt;p&gt;Entra Admin Center will allow you to rename app registrations and enterprise apps. When you rename either one of them, the other one is automatically updated as well.&lt;/p&gt;
&lt;p&gt;I first changed the name of the enterprise app by adding &lt;code&gt; - Enterprise App&lt;/code&gt; to it, hoping this would result in different names to better distinguish between the app registration and the enterprise app. But this is not the case. In the audit log I can now see that both the service principal and the app registration were updated.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-36.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-36_hu_889865e684c75d92.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-36_hu_d0a28be6fd7a5051.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Service principal rename audit log&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-37.png&#34;
	width=&#34;2324&#34;
	height=&#34;1550&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-37_hu_6f097f80794cf86c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-37_hu_ea167b8db9da76b0.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration rename audit log&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;149&#34;
		data-flex-basis=&#34;359px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s the same case the other way around. When you change the name of an app registration, the enterprise app is renamed as well.&lt;/p&gt;
&lt;p&gt;What about renaming a multi-tenant enterprise app? If I&amp;rsquo;m not the owner of the app/if the app hasn&amp;rsquo;t been registered in my tenant, it&amp;rsquo;s not possible to rename an enterprise app. Here&amp;rsquo;s the example of the Microsoft Graph Command Line Tools enterprise app again to demonstrate this.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-38.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-38_hu_24f935ac95f9d9af.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-38_hu_63935db3bda7a281.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;The name is greyed out&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;â€‹Some of the displayed properties that are not editable are managed on the application registration in the application&amp;rsquo;s home tenant.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Entra Admin Center&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;To show you what happens to enterprise apps in other tenants, when you&amp;rsquo;re the owner of a multi-tenant app and you&amp;rsquo;re renaming the app registration, I must first create one.&lt;/p&gt;
&lt;h2 id=&#34;creating-a-multi-tenant-app&#34;&gt;Creating a Multi-Tenant App
&lt;/h2&gt;&lt;p&gt;As I&amp;rsquo;ve briefly explained before, the reason why you&amp;rsquo;d want to register a multi-tenant app is if you&amp;rsquo;re developing an app which will need to access data from customer tenants through Microsoft Graph. This could also be something much simpler though. For example, it could be a reporting solution which will access and process Teams call records from customer tenants.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s good practice to register multi-tenant apps in dedicated tenants. If you&amp;rsquo;re planning to develop an app which needs a registered Entra application, don&amp;rsquo;t create it in your main tenant you need for your internal day to day operations. Instead, create a dedicated service tenant which is only used to administer the resources needed for the app/service you&amp;rsquo;re developing/providing.&lt;/p&gt;
&lt;p&gt;For this article, I&amp;rsquo;ll call the tenant in which I register the multi-tenant app the &lt;strong&gt;Service Tenant&lt;/strong&gt;. After all, the call records I want to access are in my lab tenant and I want to show you how data in my lab tenant can be accessed from another tenant. So, if I registered the multi-tenant app in my lab tenant, I&amp;rsquo;d need another lab tenant with actual data in it. For this part, I&amp;rsquo;m going to call my lab tenant the &lt;strong&gt;Customer Tenant&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Note: Although the icons are very small, you can see which tenant I&amp;rsquo;m currently in by looking at the Edge profile icon (top left) or the user account icon (top right) in the screenshots.&lt;/p&gt;
&lt;p&gt;This time, I&amp;rsquo;m creating a new app registration for a multi-tenant app and I&amp;rsquo;m doing this in the service tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-40.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-40_hu_2a90c588eaf15222.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-40_hu_b9f3055fca9ecb93.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Register a new multi-tenant application&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Because I used the portal to do this, this creates an app registration and an enterprise app in the service tenant.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve added a couple of delegated permissions to this app now, but I didn&amp;rsquo;t grant admin consent in the service tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-39.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-39_hu_9c966924aa0c7a09.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-39_hu_2a808d44aa3b42e.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Delegated permissions of multi-tenant app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;adding-multi-tenant-app-to-another-tenant&#34;&gt;Adding Multi-Tenant App to Another Tenant
&lt;/h3&gt;&lt;p&gt;To add the multi-tenant app to my customer tenant, I&amp;rsquo;m simply connecting to Microsoft Graph PowerShell using it&amp;rsquo;s app id and the tenant id of the customer tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-41.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-41_hu_52a552f9ee79b34c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-41_hu_c9c7df7107e2e36a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Connect-MgGraph to add multi-tenant app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Of course, I&amp;rsquo;ll have to grant consent for this as well.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-42.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-42_hu_c07f4cfd494fe628.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-42_hu_8a2aad0a2ed0b785.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Consent request dialog&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;After granting admin consent, the enterprise app has been added to my customer tenant, even though the app registration was created in the service tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-43.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-43_hu_824f7396f79a2656.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-43_hu_d8f1652ed6156fe3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app of multi-tenant app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;In &lt;strong&gt;Permissions&lt;/strong&gt; I can see that the enterprise app has the same permissions that were configured on the app registration in the service tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-44.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-44_hu_3f0dca0048b1883b.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-44_hu_9404b5a8e9aa69a0.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Multi-tenant enterprise app permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;renaming-a-multi-tenant-app&#34;&gt;Renaming a Multi-Tenant App
&lt;/h3&gt;&lt;p&gt;Now that I have a multi-tenant app, let&amp;rsquo;s revisit what happens when it&amp;rsquo;s renamed.&lt;/p&gt;
&lt;p&gt;In the service tenant, I&amp;rsquo;ve now renamed the app from &lt;strong&gt;Graph PowerShell (Multi-Tenant)&lt;/strong&gt; to &lt;strong&gt;Graph PowerShell (Multi-Tenant) V2&lt;/strong&gt;. In my customer tenant, the name of the enterprise app/service principal was not updated, however, the name of the app was updated under properties.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-45.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-45_hu_29cb25b9bb5004c4.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-45_hu_fce38b4071d43049.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Updated name in properties&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When I check the Microsoft Graph context after signing in, I can also see the new app name. The tenant id is the one from my customer tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-46.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-46_hu_792005a3f4ce36e8.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-46_hu_cfc76d8c856a4973.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Partial output of Get-MgContext&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This is a great example to show that the app name and the app id of the enterprise app are in fact linked to the app registration of the service tenant but since the enterprise app is a unique instance with its own object id only present in the customer tenant, the enterprise app&amp;rsquo;s display name was not updated.&lt;/p&gt;
&lt;h2 id=&#34;am-i-using-the-service-principal-or-the-app-registration-to-sign-in&#34;&gt;Am I using the Service Principal or the App registration to Sign In?
&lt;/h2&gt;&lt;p&gt;Wait, didn&amp;rsquo;t I say before that the service principal and not the app registration is used to sign into an app? So why does it show the new name of the app and not the unchanged name of the service principal in Microsoft Graph context?&lt;/p&gt;
&lt;p&gt;This is very confusing indeed. But looking at this from a multi-tenant perspective should help clear things up. In the customer tenant, there is no app registration, only a service principal. How would I be able to sign into the customer tenant using the app registration, if it doesn&amp;rsquo;t exist in the customer tenant? It&amp;rsquo;s just not possible.&lt;/p&gt;
&lt;p&gt;But let&amp;rsquo;s compare the app registration and the enterprise app in the service tenant again. By the way, here you can see that both the app registration and the enterprise app were renamed, just like when I renamed the single tenant app in my customer tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-47.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-47_hu_593ae52e9782ac69.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-47_hu_fde595bccf18bbbe.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-48.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-48_hu_5669ba721e059c69.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-48_hu_301e530ac8e7dde0.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Notice how there is no &lt;strong&gt;Activity&lt;/strong&gt; section on the left navigation pane for the app registration. &lt;strong&gt;Sign-in logs&lt;/strong&gt; are only available for the enterprise app. This is another fact which proves that the service principal is used for signing in.&lt;/p&gt;
&lt;p&gt;Since I&amp;rsquo;ve never signed in to the app in the service tenant, the sign-in logs are empty there.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-49.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-49_hu_8c63fe561363e94b.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-49_hu_dea45fded1d7468f.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Empty sign-in logs in service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;In the customer tenant, the sign-in logs show two sign ins because I signed in again, after I changed the name of the app registration in the service tenant. The name of the enterprise app now says &lt;strong&gt;Graph PowerShell (Multi-Tenant) V2&lt;/strong&gt; because I&amp;rsquo;ve deleted the enterprise app and added it again, to test if it would be added with the new name. Since the log filter is set to &lt;strong&gt;application&lt;/strong&gt; it will show sign in logs from both the old and the new service principal but in this particular example, the name of the application changed to &lt;strong&gt;V2&lt;/strong&gt; without deleting and adding the app again.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-51.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-51_hu_1e9bccadd22969e5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-51_hu_770f9af13ed7db15.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Sign-in logs in the customer tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;As I&amp;rsquo;ve said before, the service principal object is created in the customer tenant, when the multi-tenant app is added. Therefore, the name of the service principal does not update when the app registration is renamed in the service (home) tenant but the name of the app that&amp;rsquo;s linked to this service principal does update in all tenants.&lt;/p&gt;
&lt;p&gt;If the enterprise app is deleted from the customer tenant and added again, the enterprise app/service principal will be created with the new name of the app registration.&lt;/p&gt;
&lt;p&gt;If you pay attention to the sign in logs of the enterprise app/service principal, you can see that that it filters for &lt;strong&gt;Application contains&lt;/strong&gt; and it&amp;rsquo;s using the app id and not the object id of the service principal as value. I couldn&amp;rsquo;t find any reference of the service principal&amp;rsquo;s object id in the sign-in logs. The key is that the service principal is linked to the app registration by its application id. I &lt;em&gt;think&lt;/em&gt; this is how Entra knows which service principal needs to be used.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s turn to Microsoft Graph to see if I can find more information. To get the properties of the service principal, I need to specify the object id of the service principal because the app registration does not exist in the customer tenant.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$mgServicePrincipal&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Get-MgServicePrincipal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-ServicePrincipalId&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;e66c003a-c7e0-46c0-906a-4e30e0d85ab4&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$mgServicePrincipal&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Format-List&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;*,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;*,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;princ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;*,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;audience&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;*&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-50.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-50_hu_f24c758f762b1827.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-50_hu_6d2a3d9fca9598c1.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Partial output of Get-MgServicePrincipal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;There are a couple of things to unwrap here. First of all, the &lt;strong&gt;AppOwnerOrganizationId&lt;/strong&gt; includes the tenant id of the service tenant (tenant in which the application was registered). The &lt;strong&gt;Id&lt;/strong&gt; of the service principal is what&amp;rsquo;s listed in Entra Admin Center as &lt;strong&gt;Object Id&lt;/strong&gt;. I should probably mention again that I deleted the enterprise app and added it again, that&amp;rsquo;s why both names are the same now.&lt;/p&gt;
&lt;p&gt;Both the &lt;strong&gt;AppId&lt;/strong&gt; and the &lt;strong&gt;ServicePrincipalNames&lt;/strong&gt; are set to the app id of the app registration in the service tenant. The portal doesn&amp;rsquo;t show you this, but I &lt;em&gt;think&lt;/em&gt; that&amp;rsquo;s why you only see the app id but never the object id of the service principal.&lt;/p&gt;
&lt;p&gt;I wouldn&amp;rsquo;t be me if I didn&amp;rsquo;t rename the app registration in the service tenant to &lt;strong&gt;Graph PowerShell (Multi-Tenant) V3&lt;/strong&gt; again after discovering this.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-52.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-52_hu_28f4809ec777a0ee.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-52_hu_d47ce6b5ca690.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;AppDisplayName and DisplayName are now different&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This tells us that the &lt;strong&gt;AppDisplayName&lt;/strong&gt; is the display name of the app registration which comes from the service (home) tenant. The &lt;strong&gt;DisplayName&lt;/strong&gt; is the name of the enterprise app/service principal display name specific to the customer tenant.&lt;/p&gt;
&lt;p&gt;In conclusion, you&amp;rsquo;re using the application to sign in, but you&amp;rsquo;ll need a service principal for the app to do so.&lt;/p&gt;
&lt;h2 id=&#34;control-who-can-sign-into-your-app&#34;&gt;Control Who Can Sign Into Your App
&lt;/h2&gt;&lt;p&gt;Further proof that enterprise apps/service principals are used when signing in is that you define who can use/access your app on the enterprise app configuration page and not on the app registration. If you want to limit who can sign into your app, you need to enable &lt;strong&gt;Assignment required?&lt;/strong&gt; and set this to &lt;strong&gt;Yes&lt;/strong&gt; on the enterprise app&amp;rsquo;s &lt;strong&gt;Properties&lt;/strong&gt;. In the screenshot below, I&amp;rsquo;m modifying the properties of the multi-tenant enterprise app which I&amp;rsquo;ve previously added to my customer tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-54.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-54_hu_a8f562b04dfa30cc.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-54_hu_85e7fc7395ada832.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Set assignment required to yes&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Under &lt;strong&gt;Users and groups&lt;/strong&gt; I can now define which users and/or groups are allowed to sign into the app.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-53.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-53_hu_f6b395e4790d5acc.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-53_hu_893a4327184b59d1.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Users and groups configuration of enterprise app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When I try to sign in with a user which isn&amp;rsquo;t allowed under &lt;strong&gt;Users and groups&lt;/strong&gt; I get an error message.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-55.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-55_hu_fb852084957fbeb3.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-55_hu_4d85cc8e465eb6c0.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Error message when user doesnâ€™t have the enterprise app assigned&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;If assignment required? is enabled, not even global admins can sign in, if they&amp;rsquo;re not explicitly allowed.&lt;/p&gt;
&lt;h2 id=&#34;permissions-on-applications&#34;&gt;Permissions on Applications
&lt;/h2&gt;&lt;p&gt;As you may have noticed, there are permissions in both app registrations and enterprise apps. But what do they do?&lt;/p&gt;
&lt;h3 id=&#34;delegated-vs-application-permissions&#34;&gt;Delegated vs Application Permissions
&lt;/h3&gt;&lt;p&gt;First, you need to understand the difference between delegated and application permissions. Delegated permissions require a signed in user and requests are made as the signed in user but the app which is used to connect to Graph has to have the appropriate delegated permissions.&lt;/p&gt;
&lt;p&gt;For example, if you want to change the usage location of an Entra ID user via Graph PowerShell, your account needs to have the &lt;strong&gt;User Administrator&lt;/strong&gt; role assigned and the app which you are using to connect to Graph needs to have the delegated permission &lt;strong&gt;User.Write.All&lt;/strong&gt; configured and consented.&lt;/p&gt;
&lt;p&gt;Just because your account can perform an action in the Entra Admin Center, it doesn&amp;rsquo;t mean that you&amp;rsquo;ll also be able to perform the same action in Graph PowerShell unless the delegated permission has been specifically configured on the app that you&amp;rsquo;re using to connect to Graph. Configuring something in the portal doesn&amp;rsquo;t require explicit permissions in addition to having an Entra Admin role assigned. But doing the same action through the Graph API requires an explicit permission on the app you want to use.&lt;/p&gt;
&lt;p&gt;You should always follow the &lt;strong&gt;least&lt;/strong&gt; &lt;strong&gt;privilege&lt;/strong&gt; principle and only configure the permission that are actually needed. This &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/graph/permissions-reference&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;link&lt;/a&gt; is a good reference to learn what each permission does. I also highly recommend checking all your existing applications which can access Graph via PowerShell and make sure that only admin users are allowed to sign into the apps.&lt;/p&gt;
&lt;p&gt;Application permissions mean that an app will be able to perform actions without a signed in user. In this case, the action is performed as the app itself. You&amp;rsquo;ll need either a client secret or a certificate for that.&lt;/p&gt;
&lt;h2 id=&#34;add-permissions-to-applications&#34;&gt;Add Permissions to Applications
&lt;/h2&gt;&lt;p&gt;Let&amp;rsquo;s look at different examples/scenarios.&lt;/p&gt;
&lt;h3 id=&#34;you-own-the-app-registration&#34;&gt;You own the App Registration
&lt;/h3&gt;&lt;p&gt;In this example, I&amp;rsquo;m using the &lt;strong&gt;Graph PowerShell Demo (Created in Portal)&lt;/strong&gt; app which was created in the customer tenant again. When the app registration is created through the portal, the delegated permission &lt;strong&gt;User.Read&lt;/strong&gt; is added as a &lt;strong&gt;configured&lt;/strong&gt; permission by default. Admin consent has not been granted yet and I&amp;rsquo;ve never signed into this app before. Thus, the permissions of the enterprise app are empty.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-56.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-56_hu_a43f4a693c647559.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-56_hu_3439b3849a9b8f81.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Configured permissions of app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-57.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-57_hu_740d4126d8a1b982.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-57_hu_178e51d088955217.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permissions of enterprise app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When I click &lt;strong&gt;Grant admin consent&lt;/strong&gt; on the enterprise app, a new browser window opens and asks me to consent to the permissions which are configured in the app registration. Signing into this app through Graph PowerShell for the first time would have the same effect.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-58.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-58_hu_7ee771578e0b00e5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-58_hu_11d0ea7a7b7333ad.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Admin consent request&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Let me add a new configured permission on the app registration.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-59.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-59_hu_b0fd00e22ffb5d2b.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-59_hu_d7ec25a1d79496a3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;User.Read.All added to configured permissions of app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I have not yet consented &lt;strong&gt;User.Read.All&lt;/strong&gt;, that&amp;rsquo;s why it&amp;rsquo;s showing as &lt;strong&gt;Not granted&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;When I sign into Graph PowerShell using the app id of this app, the scope is not added to the session.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-60.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-60_hu_5a5267369e8e7ec2.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-60_hu_1d94417ae47e224.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;User.Read.All scope is missing&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I can grant admin consent for the added permission on the app registration from the portal.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-61.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-61_hu_5c8ffa19a1b31018.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-61_hu_c9a7b4d0f4571f1a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Grant admin consent on app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When I connect to Graph again and check the context again, I can now see the &lt;strong&gt;User.Read.All&lt;/strong&gt; scope.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-62.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-62_hu_b4c8cc061dd0341b.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-62_hu_f20d5b718cb96c9a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Available scopes/permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The configured permissions of an app registration tell the enterprise app what permissions should be requested during the consent process.&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;Applications are authorized to call APIs when they are granted permissions by users/admins as part of the consent process. The list of configured permissions should include all the permissions the application needs.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Entra Admin Center&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;When I check the permissions of the enterprise app, I can see that the &lt;strong&gt;User.Read.All&lt;/strong&gt; permission was also added to the enterprise app.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-63.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-63_hu_5f808091225125d5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-63_hu_62b54b3ed17240ed.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Added permission on enterprise app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;add-a-permission-without-adding-it-configured-permissions-first&#34;&gt;Add a permission without adding it configured permissions first
&lt;/h4&gt;&lt;p&gt;Although this isn&amp;rsquo;t following best practice, it&amp;rsquo;s also possible to add new permissions to the enterprise app without adding them to the app registration&amp;rsquo;s configured permissions first. To do so, I&amp;rsquo;m simply adding the scopes I want when I&amp;rsquo;m connecting to Graph PowerShell.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Connect-MgGraph&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-NoWelcome&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-TenantId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-ClientId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$appId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-Scopes&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Group.Read.All&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Guess what happens now? Yep, I&amp;rsquo;m prompted to consent again.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-64.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-64_hu_5cc9a2f57533d25b.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-64_hu_f319f20f87fb86a3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;New consent request dialog&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When I check the permissions of the enterprise app, I can see that the &lt;strong&gt;Group.Read.All&lt;/strong&gt; permission was added to it.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-65.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-65_hu_cc90cb38e541b92b.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-65_hu_35d308fe4889a75a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;However, when I go back to the app registration, the freshly consented permission shows up under &lt;strong&gt;Other permissions granted&lt;/strong&gt; and not under &lt;strong&gt;Configured permissions&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-66.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-66_hu_ff95f616ff886e2e.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-66_hu_d4eb8854c3d51f10.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Entra Admin Center says the following about this:&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;These permissions have been granted for NoCapTech but aren&amp;rsquo;t in the configured permissions list. If your application requires these permissions, you should consider adding them to the configured permissions list.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Entra Admin Center&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;If a permission is required for your app, you can use the three dots to add other permissions to the app&amp;rsquo;s configured permissions.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-99.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-99_hu_650dd29f15fa4f68.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-99_hu_42814f299ecb514a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add other permissions to configured permissions of app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;remove-permissions&#34;&gt;Remove Permissions
&lt;/h3&gt;&lt;p&gt;Let&amp;rsquo;s not forget that we&amp;rsquo;re still on a mission to change a user&amp;rsquo;s usage location using PowerShell. The &lt;strong&gt;Users.Read.All&lt;/strong&gt; permission won&amp;rsquo;t help us here because it doesn&amp;rsquo;t include &lt;strong&gt;write&lt;/strong&gt; permission. Let&amp;rsquo;s remove that one and add &lt;strong&gt;Users.Write.All&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;I can either remove a permission or only revoke its admin consent. In this case I want to remove it entirely, so I must first remove it and then revoke the admin consent.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-100.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-100_hu_fd1c44287fb94cf2.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-100_hu_eaac84311b700301.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Remove permission from app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-101.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-101_hu_90173876dfe440ad.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-101_hu_652de3aada54597b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Revoke admin consent for permission&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Now I&amp;rsquo;m going to add the &lt;strong&gt;Users.ReadWrite.All&lt;/strong&gt; permission and grant admin consent for it.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-102.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-102_hu_def984ec1abd2f3d.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-102_hu_55b7bc7c7602f6ac.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add permission&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-103.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-103_hu_251cb4c768598e95.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-103_hu_78546bb6a60a02f5.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Grant admin consent&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Because I&amp;rsquo;ve added this permission to the configured permissions, the next time I&amp;rsquo;m signing into Graph PowerShell using this app id, the permission will be available by default.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-104.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-104_hu_12ca02eb2c4a365e.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-104_hu_848fe65ccd2e7fb6.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Partial output of Get-MgContext&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This means that I&amp;rsquo;m now finally able to update a user&amp;rsquo;s usage location using PowerShell.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-105.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-105_hu_6833fdbb91afcb83.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-105_hu_f4f0e8537ddf677a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;No more error messages!&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;In case you were wondering, this doesn&amp;rsquo;t work if the signed in user doesn&amp;rsquo;t have the &lt;strong&gt;User Administrator&lt;/strong&gt; (or higher permissions) assigned to them. Just because a delegated permission like &lt;strong&gt;User.Write.All&lt;/strong&gt; has been configured and consented on an Entra application, it doesn&amp;rsquo;t mean that any user which is allowed to sign into Graph PowerShell will be able to perform write actions on users.&lt;/p&gt;
&lt;p&gt;Because I didn&amp;rsquo;t set &lt;strong&gt;Assignment required?&lt;/strong&gt; to &lt;strong&gt;Yes&lt;/strong&gt;, any user (including non-admin users) in the customer tenant can now sign into Graph PowerShell but they can&amp;rsquo;t use all the consented scopes/permissions.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-124.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-124_hu_8f8930fa591021c5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-124_hu_745bfb4800b1fafa.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Error message when the signed in user doesnâ€™t have admin permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;you-do-not-own-the-app-registration&#34;&gt;You do not own the App registration
&lt;/h3&gt;&lt;p&gt;In this example, I&amp;rsquo;m using the &lt;strong&gt;Graph PowerShell (Multi-Tenant)&lt;/strong&gt; from the service tenant. Note: I&amp;rsquo;ve re-created this app in the service tenant and named it &lt;strong&gt;V4&lt;/strong&gt; so Ids in screenshots are now different.&lt;/p&gt;
&lt;p&gt;Here are the configured permissions of the service tenant&amp;rsquo;s app registration and the customer tenant&amp;rsquo;s enterprise app in comparison. I&amp;rsquo;m not sure why &lt;strong&gt;email&lt;/strong&gt; hasn&amp;rsquo;t been added to enterprise app. It might be because it&amp;rsquo;s already part of one of the other permissions.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-67.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-67_hu_b01f1dea9ad0bcb3.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-67_hu_76b3fcdbe5094853.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration permissions in service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-68.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-68_hu_4a45b084a71cbf9f.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-68_hu_77475a7028e2fe85.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app permissions in customer tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Interestingly enough, &lt;strong&gt;email&lt;/strong&gt; appears in the Graph context.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-69.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-69_hu_5de02b571f68fd5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-69_hu_136115ed6adc8dd.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Output of Graph context&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Because the app registration in the service tenant has configured permissions, they&amp;rsquo;re automatically requested during the consent process when the app is added as an enterprise app to the customer tenant.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s start playing around by adding a new delegated permission to the enterprise app in the customer tenant. For this, I&amp;rsquo;m signing into Graph again by specifying the customer tenant id and the app id of the multi-tenant app that is registered in the service tenant and I&amp;rsquo;m adding &lt;code&gt;-Scopes &amp;quot;User.Read.All&amp;quot;&lt;/code&gt; to &lt;code&gt;Connect-MgGraph&lt;/code&gt;. Because this is a new permission, I have to grant consent for it.&lt;/p&gt;
&lt;p&gt;As expected, the &lt;strong&gt;User.Read.All&lt;/strong&gt; permission is now listed on the enterprise app in the customer tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-70.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-70_hu_6700d66ae453c256.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-70_hu_724cd26fd372a28.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This permission has not been added to &lt;strong&gt;Other permissions granted&lt;/strong&gt; in the app registration of the service tenant like it was the case when both the app registration and the enterprise app were available in the same tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-71.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-71_hu_42959b0f1324e5ba.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-71_hu_2098b25c50f99762.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permissions on app registration in service tenant remain unchanged&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This actually makes a lot of sense. Imagine how many permissions would be here if this was the Microsoft Graph Command Line Tools in Microsoft&amp;rsquo;s service tenant.&lt;/p&gt;
&lt;h3 id=&#34;quick-recap-1&#34;&gt;Quick Recap
&lt;/h3&gt;&lt;p&gt;This means that the owner/publisher of the app registration defines what permissions are needed for their app by adding the required permissions as configured permissions. Whatever permissions are configured on the app registration will be the permissions for which the enterprise app will request consent for. Basically, the configured permissions are the minimal permissions required but if you want, you can still add more permissions to your enterprise app because that is specific to your tenant.&lt;/p&gt;
&lt;p&gt;Another interesting discovery is that the service tenant doesn&amp;rsquo;t actually need to have admin consent granted for the permissions on the app registration or on the enterprise app. When the enterprise app is added to the customer tenant, the consent is granted for this tenant only.&lt;/p&gt;
&lt;p&gt;Admin consent in the service tenant would only be required if the publisher of the app needed to access information in their own service tenant through their own app.&lt;/p&gt;
&lt;p&gt;When I was researching this topic, I briefly panicked and thought that all permissions which are added to the enterprise app/service principal would automatically allow the owner of the app to use these permissions. That would be especially problematic for application permissions. But as I&amp;rsquo;ve just proven, that&amp;rsquo;s not the case. The owner of the app can only use what they&amp;rsquo;ve added under &lt;strong&gt;configured permissions&lt;/strong&gt;. They won&amp;rsquo;t even see what other delegated permissions you&amp;rsquo;ve added to your own enterprise app.&lt;/p&gt;
&lt;h4 id=&#34;delegated-permissions&#34;&gt;Delegated Permissions
&lt;/h4&gt;&lt;p&gt;With delegated permissions, a signed-in user is required. Now what does that mean exactly? When we&amp;rsquo;re talking about using Microsoft Graph PowerShell, this is pretty clear. When you run &lt;code&gt;Connect-MgGraph&lt;/code&gt; you&amp;rsquo;re prompted to sign using your username, password and hopefully MFA.&lt;/p&gt;
&lt;p&gt;After signing in, the PowerShell session will have an access token which includes information about your user account and the app id that you used to sign in.&lt;/p&gt;
&lt;p&gt;This is great for managing Entra ID users and Microsoft 365 services with PowerShell on the fly, like changing the usage location of a user. What delegated permissions are not great for is trying to use them in PowerShell scripts which should run autonomously. If a script is running on some server or in an Azure automation account, there&amp;rsquo;s no way that you&amp;rsquo;ll securely get a token for another user. In that case, you&amp;rsquo;ll want to use application permissions.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s examine another example of delegated permissions using Zoom as a &lt;em&gt;real&lt;/em&gt; app example again. The difference between Zoom and a PowerShell script is that you&amp;rsquo;re signed into Zoom using Entra SSO, so Zoom knows your Entra identity, and it also knows that the signed in user is allowed to read/write the calendar. Unlike a PowerShell script, the Zoom app is something that is continuously running on a user&amp;rsquo;s machine, and there&amp;rsquo;s a server piece to it.&lt;/p&gt;
&lt;p&gt;When you&amp;rsquo;re launching the app, you&amp;rsquo;re authenticating yourself to Zoom and that&amp;rsquo;s when Zoom acquires the token which allows it to read/write your calendar. Therefore, Zoom can&amp;rsquo;t access your calendar when the app is not running or when you&amp;rsquo;re not signed in.&lt;/p&gt;
&lt;h5 id=&#34;microsoft-authentication-library-msal&#34;&gt;Microsoft Authentication Library (MSAL)
&lt;/h5&gt;&lt;p&gt;Then there&amp;rsquo;s the &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/entra/identity-platform/msal-overview&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;MSAL&lt;/a&gt; which is available as a PowerShell module (MSAL.PS). In theory, it could be used in a script but if you&amp;rsquo;re not a developer (like I&amp;rsquo;m not) then this will be a whole new rabbit hole to go down. Anyway, even if you were using the MSAL authentication library in a PowerShell script, it would still require the user&amp;rsquo;s credentials which must be passed in an interactive log in flow in order to acquire a token which could then be used inside the script.&lt;/p&gt;
&lt;p&gt;In other words, delegated permissions which typically end in &lt;code&gt;*Read|Write.All&lt;/code&gt; are most commonly used by IT admins when they sign into Microsoft Graph PowerShell interactively by providing their admin credentials. Delegated permissions which do not end in &lt;code&gt;*.All&lt;/code&gt; usually allow an app to only read/write information of the signed in user. They&amp;rsquo;re commonly used by apps like Zoom to access relevant data like a user&amp;rsquo;s calendar.&lt;/p&gt;
&lt;h4 id=&#34;application-permissions&#34;&gt;Application Permissions
&lt;/h4&gt;&lt;p&gt;Application permissions are used if an app or a script needs access to Entra ID resources without a signed in user. Let&amp;rsquo;s just say you have a script which runs daily and checks if all the usage location is matching the country property for all Entra ID users. If that script were to use delegated permissions, somebody would need to manually run it every day because the script would prompt for admin credentials in a browser pop-up every time. Such a script will need to utilize application permissions to run in a truly automated way.&lt;/p&gt;
&lt;p&gt;To be able to use application permissions, you need a client secret or a certificate and these can only be created on the app registration. That means that if a multi-tenant app were to require application permissions, they would need to be part of the app registration&amp;rsquo;s configured permissions and you would be prompted to grant consent when you&amp;rsquo;re adding the enterprise app.&lt;/p&gt;
&lt;p&gt;If you own the app registration yourself, you can add new application permissions to the app registration yourself, but you can&amp;rsquo;t add them directly to the enterprise app, like you can with delegated permissions.&lt;/p&gt;
&lt;h2 id=&#34;application-permissions--app-only-authentication&#34;&gt;Application Permissions / App Only Authentication
&lt;/h2&gt;&lt;h3 id=&#34;accessing-graph-as-application-from-the-service-tenant&#34;&gt;Accessing Graph as application from the Service Tenant
&lt;/h3&gt;&lt;p&gt;I&amp;rsquo;m still using &lt;strong&gt;Graph PowerShell (Multi-Tenant) V4&lt;/strong&gt; as an example. This time, I&amp;rsquo;m going to add a new application permission to the app registration in the service tenant. For this example, I&amp;rsquo;m going to add &lt;strong&gt;CallRecords.Read.All&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-72.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-72_hu_26b44d6c7718dd24.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-72_hu_726b7c5872ea3d63.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add application permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CallRecords.Read.All&lt;/strong&gt; is now added as &lt;strong&gt;application&lt;/strong&gt; permission in &lt;strong&gt;configured permissions&lt;/strong&gt;. Note that admin consent hasn&amp;rsquo;t been granted for the service tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-73.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-73_hu_8f8a3b7a68a2d6c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-73_hu_3bc2c09749d3e10f.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Configured permissions of app registration in service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Because this is an application permission, I can&amp;rsquo;t simply run &lt;code&gt;Connect-MgGraph&lt;/code&gt; and add &lt;code&gt;-Scopes &amp;quot;CallRecords.Read.All&lt;/code&gt;. &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/graph/permissions-reference#callrecordsreadall&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;This permission&lt;/a&gt; doesn&amp;rsquo;t even exist as a delegated permission.&lt;/p&gt;
&lt;p&gt;Additionally, adding &lt;code&gt;-Scopes&lt;/code&gt; is not supported when &lt;code&gt;-ClientSecretCredential&lt;/code&gt; is also specified.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-107.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-107_hu_ef6460e5a0eba62.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-107_hu_213b3147102182ec.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Invalid parameter combination error&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;To add the application permission, I need to get a hold of the admin consent link. Normally, when you add an enterprise app, you don&amp;rsquo;t need to manually copy and paste a link. This process is usually neatly integrated into the UI of apps that request permission to access your data through Microsoft Graph.&lt;/p&gt;
&lt;p&gt;As an example, this is the web page that lets me connect Zoom to my Microsoft 365 calendar. As you can see, there is a nice little &lt;strong&gt;Authorize&lt;/strong&gt; button directly embedded in the Zoom admin portal.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-74.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-74_hu_e03aeaf58d87205f.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-74_hu_efa921ae79e60549.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Zoom authorization UI/UX example&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When I click &lt;strong&gt;Authorize&lt;/strong&gt; the admin consent dialog is opened in the browser.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-75.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-75_hu_8ff1e7786020d778.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-75_hu_58b3652e24fed9cf.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Zoom admin consent example&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Granting the consent will add the enterprise app. While I&amp;rsquo;m at it, let&amp;rsquo;s check out the permissions which were added for Zoom.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-76.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-76_hu_5792c9ff59d02eaa.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-76_hu_68f5713a45bb1856.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Zoom enterprise app permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Since these are all delegated permissions, it means that the Zoom app can only access my calendar and contacts when I&amp;rsquo;m signed into the Zoom app. But the consent flow is the same for both application and delegated permissions.&lt;/p&gt;
&lt;h4 id=&#34;get-admin-consent-url&#34;&gt;Get Admin Consent URL
&lt;/h4&gt;&lt;p&gt;With the above example, I just wanted to show you what adding an enterprise app usually looks like. I&amp;rsquo;m not sure if there&amp;rsquo;s a better way to obtain the consent link to implement it in your own app but for now, what I&amp;rsquo;m showing you will have to do.&lt;/p&gt;
&lt;p&gt;From the enterprise app in the service tenant, I can click &lt;strong&gt;Grant admin consent&lt;/strong&gt; which will open a new browser window. This only works from the enterprise app. If you clicked grant admin consent on the app registration, the grant consent button will open on the same page, and you won&amp;rsquo;t be able to copy the URL.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-77.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-77_hu_9c09585a62def349.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-77_hu_7f529ea8663c01e9.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Grant admin consent button&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-108.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-108_hu_38e9b0775f2eee19.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-108_hu_4a02a988d453217e.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;New browser window with admin consent URL&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The new browser window will allow me to copy the URL which will look something like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://login.microsoftonline.com/536f948a-babb-4048-836d-717833aa0da5/adminConsent?client_id=c199b3df-a49b-4739-b314-c2ee50e6c0bc&amp;amp;redirect_uri=https://entra.microsoft.com/TokenAuthorize
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;The first GUID after &lt;strong&gt;login.microsoftonline.com&lt;/strong&gt; is the tenant id of the service tenant. Now I can either replace it with a specific tenant id or just replace it with &lt;code&gt;common&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://login.microsoftonline.com/common/adminConsent?client_id=c199b3df-a49b-4739-b314-c2ee50e6c0bc&amp;amp;redirect_uri=https://entra.microsoft.com/TokenAuthorize
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;When I open this link and sign in with the global admin of the customer tenant, I can see the name of the app and that it&amp;rsquo;s requesting the &lt;strong&gt;Read all call records&lt;/strong&gt; permission.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-109.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-109_hu_9d3d319f2a8bad9.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-109_hu_a6dcb2c51caf540a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Admin consent request for Read all call records&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Unfortunately, application permissions are not labeled explicitly as such which makes it hard to understand what permissions are really requested unless the vendor of the enterprise app includes this info in their documentation. An easy way to figure it out is to search for the permission title or the description in the &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/graph/permissions-reference#callrecordsreadall&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;permission reference&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Back in Entra Admin Center, I can now see that the &lt;strong&gt;CallRecords.Read.All&lt;/strong&gt; permission has been added to my enterprise app.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-78.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-78_hu_4191d42244df55a6.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-78_hu_853f07bc488bea75.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app permissions before granting consent&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-79.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-79_hu_fb0ed3dedb631de4.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-79_hu_bf7bb37654771b1c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app permissions after granting permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Just to emphasize on this again, I did not grant admin consent to the configured permissions on the app registration in the service tenant. Remember that consent is always tenant specific.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-80.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-80_hu_46c77f31596e5a2c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-80_hu_fb1eeb4bfcb475f3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration permissions in service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;create-a-secret&#34;&gt;Create a Secret
&lt;/h3&gt;&lt;p&gt;An application can access Graph without a signed in user either through a certificate or a client secret. I&amp;rsquo;m only going to focus on client secrets today.&lt;/p&gt;
&lt;p&gt;On the app registration in the service tenant, I&amp;rsquo;m creating a new client secret.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-81.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-81_hu_80e1778cb6d50704.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-81_hu_8a991ed9c0f7392c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Add a client secret&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Important: the secret is only shown once. As soon as you navigate away from this page, you won&amp;rsquo;t be able to access it again. When you do this, you&amp;rsquo;ll see your client secret. It&amp;rsquo;s only showing a bunch of asterisks for me because I&amp;rsquo;m using the &lt;a class=&#34;link&#34; href=&#34;https://github.com/microsoft/cloudcloak&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Cloud Cloak&lt;/a&gt; extension for Microsoft Edge.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-83.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-83_hu_34076d0105e6dda5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-83_hu_818454b745a80e8b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Added client secret&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Using the code below, I (or rather the service tenant) can now sign into the customer tenant using the enterprise app/service principal of the customer tenant and the client secret from the service tenant.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s important to understand that I now gave another tenant permission to read all call records in my (customer) tenant without a signed in user of my (customer) tenant.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;4bffbf87-53a0-4fce-b58b-4179cb3a3b7d&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$appId&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;c199b3df-a49b-4739-b314-c2ee50e6c0bc&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$appSecret&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;Read-Host&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-AsSecureString&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;****************************************&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$clientSecretCredential&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;New-Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;Management&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;Automation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;PSCredential&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$appId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$appSecret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Connect-MgGraph&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-ClientSecretCredential&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$clientSecretCredential&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-TenantId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-NoWelcome&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-82.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-82_hu_34670cc3595451de.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-82_hu_b82f8279b60d9dd2.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Connecting to Graph PowerShell with app only authentication&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s check the Graph context.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-84.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-84_hu_bacbabb7ee1a0d5d.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-84_hu_7ba4db2b2ab44ec4.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Output of Mg-Context&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;The only scope that&amp;rsquo;s currently available is &lt;strong&gt;CallRecords.Read.All&lt;/strong&gt; because that&amp;rsquo;s the only application permission. All the other ones are delegated permissions so they&amp;rsquo;re not available in this session. AuthType is now &lt;strong&gt;AppOnly&lt;/strong&gt; and we&amp;rsquo;re still using the &lt;strong&gt;Graph PowerShell (Multi-Tenant) V4&lt;/strong&gt; app with the client secret from the service tenant.&lt;/p&gt;
&lt;p&gt;Finally, let&amp;rsquo;s see if I can use the app to retrieve a call record from the customer tenant with app only authentication as the service tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-85.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-85_hu_cf2f40e9f4f339ac.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-85_hu_c025040d7c178572.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Getting a call record with app only permission as the service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Yep, it&amp;rsquo;s working. It took quite a while for the sign-in logs to appear, but I can now see a logged sign in for the service principal in the customer tenant. In the details, I can see the name of the application and the service principal. I can also see the &lt;strong&gt;Application ID&lt;/strong&gt; which is the app id of the app registration in the service tenant and of course, also the app id of the enterprise app/service principal in the customer tenant. The &lt;strong&gt;Client credential type&lt;/strong&gt; is now &lt;strong&gt;Client secret&lt;/strong&gt;. And finally, the &lt;strong&gt;Service principal ID&lt;/strong&gt; is the &lt;strong&gt;Object Id&lt;/strong&gt; of the enterprise app/service principal in the customer tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-86.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-86_hu_143d4ee9e573057a.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-86_hu_cfb61eef857605b6.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Service principal sign in logs in customer tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-87.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-87_hu_56b048d64874e1de.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-87_hu_4c5d7c7466767480.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Sign in details&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Out of curiosity, I checked the sign in logs in the service tenant as well. I want to point out that the enterprise app in the service tenant is still untouched and does not have any consented permissions. Nevertheless, the sign-in logs of the service tenant still log the sign-in activity, even when the sign in happened in the customer tenant. It also lists the &lt;strong&gt;Service principal ID&lt;/strong&gt; of the customer tenant even though that object id doesn&amp;rsquo;t exist in the service tenant. There is no reference of the customer tenant id, though.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-88.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-88_hu_cd2fda8d4c6a0827.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-88_hu_358babf75a7d3fe4.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise app permissions in service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-89.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-89_hu_3937f686c2cf9ab5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-89_hu_9839f0a2816271f1.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Sign-in log details from service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;When application permissions are used in multi-tenant apps, only the owner/publisher of the app registration will be able to use the application permissions, because you don&amp;rsquo;t have access to the secret and you can&amp;rsquo;t create one for yourself either because you don&amp;rsquo;t have access to the app registration.&lt;/p&gt;
&lt;h3 id=&#34;accessing-graph-as-app-from-your-own-tenant&#34;&gt;Accessing Graph as App from your Own Tenant
&lt;/h3&gt;&lt;p&gt;If you want to use Graph PowerShell with application permission (without a signed in user) in your own tenant, the process is exactly the same as I&amp;rsquo;ve just shown you for a multi-tenant scenario.&lt;/p&gt;
&lt;p&gt;You just need to create your own app registration, assign the required permissions and create a client secret or a certificate for the app. In that case, you&amp;rsquo;ll obviously have to grant admin consent because you want to access Graph as an app in your own tenant.&lt;/p&gt;
&lt;h3 id=&#34;accessing-graph-as-app-using-your-own-app-registration-from-a-3rd-party-app&#34;&gt;Accessing Graph as App using your own App Registration from a 3rd Party App
&lt;/h3&gt;&lt;p&gt;What I described in &lt;a class=&#34;link&#34; href=&#34;#accessing-graph-as-application-from-the-service-tenant&#34; &gt;Accessing Graph as application from the Service Tenant&lt;/a&gt; would allow the service tenant to read call records of all tenants that have consented to their app. Another scenario you might encounter is that a vendor of a software/service asks you to create your own app registration but share/configure your secret in their service.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ll use Bitwarden, which is my favorite password manager, as an example for this. Bitwarden allows an organization to sync their Entra ID users to Bitwarden so that you can then specify which of your Entra users will be able to use Bitwarden from their admin portal.&lt;/p&gt;
&lt;p&gt;This is a perfect example of why an app would need &lt;strong&gt;Users.Read.All&lt;/strong&gt; and &lt;strong&gt;Groups.Read.All&lt;/strong&gt; application permissions.&lt;/p&gt;
&lt;p&gt;Bitwarden doesn&amp;rsquo;t actually provide their own enterprise app which can be added to your tenant. Instead, their documentation states that you as the customer have to create your own app registration and which delegated and application permissions you need to add to it.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-106.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-106_hu_998d5b39fd55356d.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-106_hu_c0041cfe3618c18b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Required delegated and app permissions for Bitwarden Directory Connector&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Further down the line, their documentation explains that you need to create a client secret. Once you have everything, namely the tenant id, the app id and the client secret, you need to add them to their &lt;strong&gt;Directory Connector&lt;/strong&gt; app.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-110.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-110_hu_2deb8254c23266dc.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-110_hu_af249a0cf305b053.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Bitwarden documentation on how to connect Directory Connector to your Entra app&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t know all the details about this Bitwarden Directory Connector but to put it simply, adding your tenant id, app id and client secret to it, will allow the Directory Connector to read all your Entra users and sync them to the Bitwarden admin portal.&lt;/p&gt;
&lt;p&gt;By doing it like this, Bitwarden delegates the management of the app registration to the customer and they&amp;rsquo;re also making sure that the data in your tenant can only be accessed by your app secret/your own instance of Directory Connector.&lt;/p&gt;
&lt;h2 id=&#34;deleting-apps&#34;&gt;Deleting Apps
&lt;/h2&gt;&lt;p&gt;Lastly, after all this testing, it&amp;rsquo;s time to clean up my lab. Let&amp;rsquo;s see what happens when enterprise apps and app registrations are deleted.&lt;/p&gt;
&lt;h3 id=&#34;deleting-an-enterprise-app&#34;&gt;Deleting an Enterprise App
&lt;/h3&gt;&lt;h4 id=&#34;you-do-not-own-the-app-registration-1&#34;&gt;You Do Not Own the App Registration
&lt;/h4&gt;&lt;p&gt;Since enterprise apps are always tenant specific, deleting an enterprise app will only delete it from your tenant. This has no impact on other tenants. Enterprise applications can be deleted from the &lt;strong&gt;Properties&lt;/strong&gt; menu.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-90.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-90_hu_a681cf6335edfd3c.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-90_hu_3c18b1f8aa6539fb.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Properties of multi-tenant enterprise app in customer tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;If you delete an enterprise app by accident, you can easily add it again by granting consent again. Depending on the app and the required permissions, you can do this by signing into Graph PowerShell or by using the admin consent link again. Because enterprise apps can&amp;rsquo;t be restored, adding one again will generate a new object id for the enterprise app/service principal.&lt;/p&gt;
&lt;h4 id=&#34;your-own-enterprise-applications&#34;&gt;Your Own Enterprise Applications
&lt;/h4&gt;&lt;p&gt;If you delete an enterprise application for which you own the app registration and both are in the same tenant, deleting the enterprise app won&amp;rsquo;t delete the app registration as well. However, deleting the enterprise app will remove previously consented permissions on the app registration too.&lt;/p&gt;
&lt;p&gt;Here, I&amp;rsquo;m deleting the enterprise app called &lt;strong&gt;Graph PowerShell Demo (Created in Portal)&lt;/strong&gt;. Deleting an enterprise app will result in revoking all admin consents, including configured permissions.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-91.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-91_hu_e421691dcfa8b48f.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-91_hu_4fda3211bd0da3c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration permissions before the enterprise app was deleted&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-92.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-92_hu_c6e0580ad1c8f922.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-92_hu_a2225e9186288c92.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;App registration permissions after the enterprise app was deleted&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;If you delete the enterprise app by accident, you can create a new one by granting admin consent on the app registration again. Keep in mind that the new enterprise app will have a different &lt;strong&gt;Object ID&lt;/strong&gt;. The &lt;strong&gt;Application ID&lt;/strong&gt; stays the same, as it&amp;rsquo;s the one of the app registration anyway.&lt;/p&gt;
&lt;h3 id=&#34;deleting-an-app-registration&#34;&gt;Deleting an App Registration
&lt;/h3&gt;&lt;p&gt;When you&amp;rsquo;re deleting app registrations you need to be much more careful.&lt;/p&gt;
&lt;h3 id=&#34;your-own-single-tenant-app-registrations&#34;&gt;Your Own Single-Tenant App Registrations
&lt;/h3&gt;&lt;p&gt;If you delete an app registration for which an enterprise app exists in the same tenant as well, both objects will be deleted.&lt;/p&gt;
&lt;p&gt;App registrations can be deleted from the &lt;strong&gt;Overview&lt;/strong&gt; page.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-93.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-93_hu_7d189012460e6345.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-93_hu_e619223ae10605f8.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Delete app registration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;a-multi-tenant-app-registration-which-you-own&#34;&gt;A Multi-Tenant App registration which you own
&lt;/h3&gt;&lt;p&gt;If you&amp;rsquo;re the publisher/owner of a multi-tenant app registration and you delete the app registration from your service tenant, both the app registration and the enterprise app/service principal will be deleted from the service tenant. &lt;strong&gt;The enterprise app won&amp;rsquo;t be deleted from customer tenants but customers will no longer be able to sing in and use the app!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Let me share a great real life example with you. Until September 9th 2024, the PnP.PowerShell team has provided a multi-tenant app which could be used to sign into the PnP Management Shell. They &lt;a class=&#34;link&#34; href=&#34;https://pnp.github.io/blog/post/changes-pnp-management-shell-registration/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;announced&lt;/a&gt; that the app will be deleted on that day. As a result, any tenant that had added this app as an enterprise app to their tenant can no longer use it. Instead, admins need to &lt;a class=&#34;link&#34; href=&#34;https://pnp.github.io/powershell/articles/registerapplication&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;create their own app&lt;/a&gt; to access the PnP Management Shell.&lt;/p&gt;
&lt;p&gt;If the app registration is deleted in its home tenant by the app publisher/owner, it&amp;rsquo;s best to remove the enterprise app from your own tenant as well.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s get back to my lab. I&amp;rsquo;ve now deleted the app registration for &lt;strong&gt;Graph PowerShell (Multi-Tenant) V4&lt;/strong&gt; from the service tenant.&lt;/p&gt;
&lt;p&gt;As expected, after deleting the app registration from the service tenant, it&amp;rsquo;s not possible to sign into the enterprise app in the customer tenant anymore, even though the enterprise app still exists and the permissions of the enterprise app remain unchanged.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-97.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-97_hu_dc56bb54438ff4a5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-97_hu_75ea54c7f0106496.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Error message when app registration was deleted in service (home) tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-95.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-95_hu_54a299d9f641936b.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-95_hu_8f82bb347cd131a7.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permissions of enterprise app in customer tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;restoring-app-registrations&#34;&gt;Restoring App Registrations
&lt;/h2&gt;&lt;p&gt;Unlike enterprise apps/service principals, app registrations can be restored for up to 30 days. If an app registration was deleted by accident, you can restore it from &lt;strong&gt;Deleted applications&lt;/strong&gt; in the &lt;strong&gt;App registrations&lt;/strong&gt; menu.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-96.png&#34;
	width=&#34;2322&#34;
	height=&#34;1548&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-96_hu_bcd2af6a91f63a2f.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-96_hu_6dc5c190e47fa686.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Restoring deleted app registration in service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;150&#34;
		data-flex-basis=&#34;360px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This will restore the enterprise app in the home tenant as well. In my case, both the consented permissions for the enterprise app and the app registration were restored as well. I did restore it right after deleting it though. The results might be different, if more time passes between deletion and restore.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s get to the million dollar question. Is there any action to be taken in the customer tenant after an app registration was deleted and restored from the service tenant?&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-94.png&#34;
	width=&#34;1734&#34;
	height=&#34;957&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-94_hu_76037a741d2d7135.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-94_hu_e7e5c53760327774.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Successful sign in after the app registration was restored in the service tenant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;In my case, signing in to Graph PowerShell worked again just a few seconds after the app registration was restored in the service tenant. Again, this might differ if the time difference between deletion and restore is bigger.&lt;/p&gt;
&lt;h2 id=&#34;other-types-of-service-principals&#34;&gt;Other Types of Service Principals
&lt;/h2&gt;&lt;p&gt;So far, we&amp;rsquo;ve learned that every enterprise application is also a service principal. But is every service principal also an enterprise application? Not quite. If you navigate to the &lt;strong&gt;Enterprise applications&lt;/strong&gt; page in Entra Admin Center, you&amp;rsquo;ll notice that the filter is automatically set to &lt;code&gt;Application type == Enterprise Application&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-111.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-111_hu_f01b25551ad3a315.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-111_hu_bc5cbffa2b8f1590.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Enterprise applications view&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;That means that the portal will only show enterprise apps which have explicitly been added by an admin (or a user if not blocked) to your tenant.&lt;/p&gt;
&lt;p&gt;To block users from adding enterprise apps to your tenant, go to &lt;strong&gt;Enterprise applications&lt;/strong&gt; in Entra Admin Center and then click on &lt;strong&gt;Consent and permissions&lt;/strong&gt; on the left navigation pane.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-127.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-127_hu_1940e9f95f974fe4.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-127_hu_ef0581bf83859541.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Consent and permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-125.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-125_hu_a580fa4e39248152.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-125_hu_fdeb6c264ed4203.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Do not allow user consent&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;However, there are also different types of service principals which are also part of the enterprise applications menu, but not included with the default filter.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-112.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-112_hu_145da1f6f0ff5fe3.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-112_hu_687bf9a9e5e31c9a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Service principal types&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;microsoft-applications&#34;&gt;Microsoft Applications
&lt;/h3&gt;&lt;p&gt;Microsoft applications are apps owned by Microsoft and they mostly include apps which allow Entra ID users to access various systems and services within Azure and Microsoft 365. My lab tenant currently lists 585 Microsoft apps. That is way too much to go into detail for all of them but let&amp;rsquo;s look at the example of the &lt;strong&gt;Microsoft Graph&lt;/strong&gt;. This is the actual Graph API and not the Microsoft Graph Command Line Tools enterprise app.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s also an Application and an Object ID for &lt;strong&gt;Microsoft Graph&lt;/strong&gt;. Unlike Enterprise apps, Microsoft apps can&amp;rsquo;t be deleted and various properties such as &lt;strong&gt;Assignment required?&lt;/strong&gt; are not available. Searching for the app id will list it as enterprise application/service principal as well.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-113.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-113_hu_a9c2a50737576bc1.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-113_hu_68227a671e37993c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Microsoft Graph (Microsoft application)&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt; &lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-114.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-114_hu_960b61b75b114531.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-114_hu_14f22a4dcfd8bc63.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Entra Admin Center search result&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;A list of the most commonly used app ids for Microsoft applications can be found &lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/en-us/troubleshoot/azure/entra/entra-id/governance/verify-first-party-apps-sign-in#application-ids-of-commonly-used-microsoft-applications&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The actual Graph application doesn&amp;rsquo;t have or needs any permissions consented.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-115.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-115_hu_91f8cd0633aa1414.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-115_hu_ab48430fb025f226.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Microsoft Graph (Microsoft application) permissions&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;If I go back and look at the sign-in logs of when I signed into Graph PowerShell using my &lt;strong&gt;Graph PowerShell Demo (Created in Portal)&lt;/strong&gt; app, I can see that the &lt;strong&gt;Resource ID&lt;/strong&gt; lists the app id of the Microsoft Graph Microsoft app (&lt;code&gt;00000003-0000-0000-c000-000000000000&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-116.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-116_hu_305ba3679e782be2.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-116_hu_f1da9fbfd2d4c738.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Sign in logs of Graph PowerShell&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I think it&amp;rsquo;s worth pointing out that the service principal is called &lt;strong&gt;GraphAggregatorService&lt;/strong&gt; but the app itself is called &lt;strong&gt;Microsoft Graph&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;managed-identities&#34;&gt;Managed Identities
&lt;/h3&gt;&lt;p&gt;Managed identities are service principals which are tied to specific Azure resources like an automation account or a function app etc.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-117.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-117_hu_b98cb78c80c4fb89.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-117_hu_da37e42659eb4c43.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Managed identity service principals&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;This is an Azure resource of an automation account, for which I&amp;rsquo;ve configured a system assigned managed identity. If you look closely, you can see that the &lt;strong&gt;Object (principal) ID&lt;/strong&gt; is the same as the &lt;strong&gt;Object ID&lt;/strong&gt; of the service principal in the screenshot above.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-122.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-122_hu_5b905972a5d51c63.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-122_hu_4294595f68e093fa.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Managed identity on Azure resource&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
    &lt;p&gt;Once the system assigned managed identity is enabled, this resource will be registered with Microsoft Entra ID. After being registered, you can control its access to other services like storage accounts.&lt;/p&gt;&lt;span class=&#34;cite&#34;&gt;&lt;span&gt;â€• &lt;/span&gt;&lt;span&gt;Azure Portal&lt;/span&gt;&lt;cite&gt;&lt;/cite&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;p&gt;Managed identities do not have an app registration exposed to your tenant but when you enable one for an Azure resource, an app will be registered somewhere in Entra ID (where only Microsoft can see it) and a service principal will be created in your tenant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-119.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-119_hu_de05de1e02e3abbe.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-119_hu_7219e77f78f4552a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Entra Admin Center search results for managed identity object id&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Managed identities are primarily used to grant access to Azure resources, therefore the permissions of the enterprise app are usually empty.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-120.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-120_hu_5054b92080796a3f.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-120_hu_f03ff98a6299069d.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Permissions of managed identity service principal&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;However, it is possible to assign administrative roles to service principals of managed identities or grant them access to Azure resources other than the one for which the managed identity was created for.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-121.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-121_hu_79587a7db2ceb9f5.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-121_hu_bc6ac56ae471c790.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Admin role assignment for service principal (managed identity)&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;A managed identity can only be used by the Azure resource for which it was created for. So, if you create a managed identity for an Azure automation account, only the automation account, or resources within said automation account, for example a runbook will be able to sign in using that managed identity. The managed identity cannot be used in any other way. It&amp;rsquo;s also not possible to create a client secret or a certificate for a managed identity because as the name suggests, Microsoft is doing everything in the background for you.&lt;/p&gt;
&lt;p&gt;To connect to Azure using a managed identity in an Azure runbook, all you need is this code:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# Connect to Azure environment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;Connect-AzAccount&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-Identity&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;-TenantId&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$tenantId&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Service principals of managed identities cannot be deleted from enterprise applications.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-118.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-118_hu_a3c6082f218d9dda.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-118_hu_c01b6d7e0dbac6aa.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Managed identity service principal properties&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Instead, the managed identity must be disabled on the page of the Azure resource for which it was created.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-123.png&#34;
	width=&#34;2322&#34;
	height=&#34;1459&#34;
	srcset=&#34;https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-123_hu_ca29fd7676cddaa4.png 480w, https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-123_hu_c275f3f873f5d540.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Disable managed identity from Azure resource configuration&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;381px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary
&lt;/h2&gt;&lt;p&gt;This is without a doubt the longest blog post I&amp;rsquo;ve ever written. But sometimes, when I&amp;rsquo;m writing about complex topics there is just no other way to do this. I&amp;rsquo;m aware that I&amp;rsquo;ve repeated myself a couple of times in this blog post, but I wanted to make sure that it&amp;rsquo;s clear at all times if I&amp;rsquo;m speaking about an app registration or an enterprise app and in which tenant the afore mentioned object lives.&lt;/p&gt;
&lt;p&gt;I also want to clarify that I&amp;rsquo;ve never developed or worked on an enterprise grade application or anything like that. That&amp;rsquo;s also why this blog post doesn&amp;rsquo;t go into the details like token configuration, exposing APIs etc.&lt;/p&gt;
&lt;p&gt;As a Sys Admin, you&amp;rsquo;re going to have to deal with Entra applications sooner or later. Whether you like it or not. It sure does complicate a lot of things that were easier a couple of years ago, like using the AzureAD PowerShell module and not having to deal with Graph permissions for example. But I believe that it&amp;rsquo;s a necessity for every IT Pro to learn how things work in the new world. It&amp;rsquo;s important to understand what an app registration and what an enterprise app is and what each of them does.&lt;/p&gt;
&lt;p&gt;I actually wrote about a third of this blog twice. The first time I started it was a hot mess and there was no clear common thread to follow. In my first attempt, I tried to sort everything into sections, like creating an app registration and then I had subsections for each possibility like single- and multi-tenant but it just didn&amp;rsquo;t make much sense to talk about registering multi-tenant apps, when I hadn&amp;rsquo;t even explained what a multi-tenant app is or in which scenarios they&amp;rsquo;re used.&lt;/p&gt;
&lt;p&gt;Then I started from scratch again and I tried really hard two write a story that unfolds naturally. I started with things you might already know and introduced new stuff that builds on previously mentioned details in each topic.&lt;/p&gt;
&lt;p&gt;Let us reminisce one last time what Entra applications are and what the key differences between app registrations and enterprise apps are.&lt;/p&gt;
&lt;p&gt;An Entra application in general is referring to what&amp;rsquo;s used when certain resources like the Graph API are accessed in Entra ID. Access to resources can either use delegated permissions, where a signed in user is required or they can use application permissions, where either a client secret or a certificate instead of a signed in user is required. An application can have any combination of delegated and application permissions.&lt;/p&gt;
&lt;p&gt;An Entra application is not like a traditional application. When we hear the word application or app, most people will think about an app that can be installed on a device or accessed through a web browser. The purpose of an Entra application is to allow &lt;em&gt;actual&lt;/em&gt; apps, like for example the Zoom client to access resources like your calendar in Entra ID/Graph. Any Entra application must be registered in an Entra ID tenant before it can be used in applications or scripts that are built by developers.&lt;/p&gt;
&lt;p&gt;An app registration is essentially the same thing as an application. The process of creating a new application is called registering an app and that&amp;rsquo;s why the Entra Admin Center typically calls them app registrations. In PowerShell or Entra ID logs, app registrations are always called applications.&lt;/p&gt;
&lt;p&gt;In theory, an app registration can exist without an enterprise app, but an enterprise app can&amp;rsquo;t exist without an app registration. The registered application for an enterprise app can either be in the same tenant or it can be homed in a different tenant.&lt;/p&gt;
&lt;p&gt;When you&amp;rsquo;re building an internal application, the app registration is usually homed in your own tenant. When you&amp;rsquo;re purchasing, using or building a SaaS app, the app registration usually lives in a service tenant.&lt;/p&gt;
&lt;p&gt;When an app is registered, a globally unique (across all Entra ID tenants) application id is assigned by Entra ID, and an app can be registered as a single- or a multi-tenant app. Single-tenant apps can only be used by your organization. Multi-tenant apps can be added to and used by any tenant, if admin consent for the app is granted.&lt;/p&gt;
&lt;p&gt;Enterprise apps are the same thing as service principals but not all service principal types are also called enterprise apps. Microsoft applications and managed identities are the exception to this. The Entra Admin Center refers to service principals as enterprise applications in most UI elements but logs in Entra ID or PowerShell Cmdlets and object properties typically refer to them as service principals.&lt;/p&gt;
&lt;p&gt;Service principals allow you or a publisher of a multi-tenant app to access resources in your tenant. The permission model is very granular and almost any action requires an explicitly granted admin consent before an app is allowed to perform any actions. This also applies when using delegated permissions and means that you won&amp;rsquo;t be able to perform an action against the Microsoft Graph API before admin consent has been granted, even if your account has the required admin roles assigned and you&amp;rsquo;re able to perform the same action in the portal.&lt;/p&gt;
&lt;p&gt;To use app only authentication a client secret or a certificate is needed, and they must be configured on the app registration, even though the service principal is used for the actual sign in process.&lt;/p&gt;
&lt;p&gt;In conclusion, an Entra application is a combination of both an app registration and an enterprise app. You can&amp;rsquo;t have an enterprise app without a registered app, and you can&amp;rsquo;t use an application to sign into a resource, such as Microsoft Graph without also having an enterprise app/service principal for it.&lt;/p&gt;
&lt;p&gt;I hope that this explanation makes sense to you. I certainly learned a lot in the days I dedicated my time to writing this blog post. If you too understand the difference between app registrations and enterprise apps now, feel free to buy me a &lt;a class=&#34;link&#34; href=&#34;https://heusser.pro/support-me&#34; &gt;coffee&lt;/a&gt;. ðŸ˜Š&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
