<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="In this (very long) blog post, I'm explaining everything you need to know about Entra ID applications, app registrations, enterprise apps and service principals from the view of a system engineer (not from a developer's perspective).">
<title>Understanding Microsoft Entra ID App Registrations, Enterprise Apps and Service Principals</title>

<link rel='canonical' href='https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="Understanding Microsoft Entra ID App Registrations, Enterprise Apps and Service Principals">
<meta property='og:description' content="In this (very long) blog post, I'm explaining everything you need to know about Entra ID applications, app registrations, enterprise apps and service principals from the view of a system engineer (not from a developer's perspective).">
<meta property='og:url' content='https://heusser.pro/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/'>
<meta property='og:site_name' content='HEUSSER.PRO'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2024-12-05T15:17:25&#43;00:00'/><meta property='article:modified_time' content='2024-12-05T15:17:25&#43;00:00'/>
<meta name="twitter:title" content="Understanding Microsoft Entra ID App Registrations, Enterprise Apps and Service Principals">
<meta name="twitter:description" content="In this (very long) blog post, I'm explaining everything you need to know about Entra ID applications, app registrations, enterprise apps and service principals from the view of a system engineer (not from a developer's perspective).">
    <link rel="shortcut icon" href="/favicon.png" />

    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "kozb6q2xjn");
    </script>    

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_fe2816fc44d850d2.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ðŸ«¡</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">HEUSSER.PRO</a></h1>
            <h2 class="site-description">Martin Heusser | M365 MVP</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/mozziemozz'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://x.com/@mozzeph'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about-me/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About Me</span>
            </a>
        </li>
        
        
        <li >
            <a href='/support-me/' >
                
                
                
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-cup"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 11h14v-3h-14z" /><path d="M17.5 11l-1.5 10h-8l-1.5 -10" /><path d="M6 8v-1a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v1" /><path d="M15 5v-2" /></svg>
                
                <span>Support Me</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/imprint/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-info-circle" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0" /><path d="M12 9h.01" /><path d="M11 12h1v4h1" /></svg>
                
                <span>Imprint</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#intro">Intro</a></li>
    <li><a href="#whats-the-difference-between-an-enterprise-app-and-a-service-principal">What&rsquo;s the difference between an enterprise app and a service principal?</a>
      <ol>
        <li><a href="#whats-the-difference-between-the-application-id-and-the-object-id-of-an-enterprise-app">What&rsquo;s the difference between the application ID and the Object ID of an Enterprise App?</a>
          <ol>
            <li><a href="#application-id">Application ID</a></li>
            <li><a href="#object-id">Object ID</a></li>
          </ol>
        </li>
        <li><a href="#adding-an-enterprise-app-to-your-tenant">Adding an Enterprise App to Your Tenant</a></li>
      </ol>
    </li>
    <li><a href="#im-a-sys-admin-why-should-i-care-about-all-of-this">I&rsquo;m a Sys Admin, why should I care about all of this?</a></li>
    <li><a href="#what-are-app-registrations">What Are App Registrations?</a>
      <ol>
        <li><a href="#create-an-app-registration">Create an App Registration</a>
          <ol>
            <li><a href="#in-entra-admin-center">In Entra Admin Center</a></li>
            <li><a href="#in-powershell">In PowerShell</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#connect-to-graph-powershell-using-your-own-app">Connect to Graph PowerShell Using Your Own App</a>
      <ol>
        <li><a href="#what-if-there-is-no-enterprise-appservice-principal-yet">What if there is no Enterprise App/Service Principal Yet?</a></li>
        <li><a href="#quickly-switch-between-an-app-registration-and-its-service-principal">Quickly Switch Between an App Registration and It&rsquo;s Service Principal</a></li>
      </ol>
    </li>
    <li><a href="#quick-recap">Quick Recap</a></li>
    <li><a href="#renaming-apps">Renaming Apps</a></li>
    <li><a href="#creating-a-multi-tenant-app">Creating a Multi-Tenant App</a>
      <ol>
        <li><a href="#adding-multi-tenant-app-to-another-tenant">Adding Multi-Tenant App to Another Tenant</a></li>
        <li><a href="#renaming-a-multi-tenant-app">Renaming a Multi-Tenant App</a></li>
      </ol>
    </li>
    <li><a href="#am-i-using-the-service-principal-or-the-app-registration-to-sign-in">Am I using the Service Principal or the App registration to Sign In?</a></li>
    <li><a href="#control-who-can-sign-into-your-app">Control Who Can Sign Into Your App</a></li>
    <li><a href="#permissions-on-applications">Permissions on Applications</a>
      <ol>
        <li><a href="#delegated-vs-application-permissions">Delegated vs Application Permissions</a></li>
      </ol>
    </li>
    <li><a href="#add-permissions-to-applications">Add Permissions to Applications</a>
      <ol>
        <li><a href="#you-own-the-app-registration">You own the App Registration</a>
          <ol>
            <li><a href="#add-a-permission-without-adding-it-configured-permissions-first">Add a permission without adding it configured permissions first</a></li>
          </ol>
        </li>
        <li><a href="#remove-permissions">Remove Permissions</a></li>
        <li><a href="#you-do-not-own-the-app-registration">You do not own the App registration</a></li>
        <li><a href="#quick-recap-1">Quick Recap</a>
          <ol>
            <li><a href="#delegated-permissions">Delegated Permissions</a></li>
            <li><a href="#application-permissions">Application Permissions</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#application-permissions--app-only-authentication">Application Permissions / App Only Authentication</a>
      <ol>
        <li><a href="#accessing-graph-as-application-from-the-service-tenant">Accessing Graph as application from the Service Tenant</a>
          <ol>
            <li><a href="#get-admin-consent-url">Get Admin Consent URL</a></li>
          </ol>
        </li>
        <li><a href="#create-a-secret">Create a Secret</a></li>
        <li><a href="#accessing-graph-as-app-from-your-own-tenant">Accessing Graph as App from your Own Tenant</a></li>
        <li><a href="#accessing-graph-as-app-using-your-own-app-registration-from-a-3rd-party-app">Accessing Graph as App using your own App Registration from a 3rd Party App</a></li>
      </ol>
    </li>
    <li><a href="#deleting-apps">Deleting Apps</a>
      <ol>
        <li><a href="#deleting-an-enterprise-app">Deleting an Enterprise App</a>
          <ol>
            <li><a href="#you-do-not-own-the-app-registration-1">You Do Not Own the App Registration</a></li>
            <li><a href="#your-own-enterprise-applications">Your Own Enterprise Applications</a></li>
          </ol>
        </li>
        <li><a href="#deleting-an-app-registration">Deleting an App Registration</a></li>
        <li><a href="#your-own-single-tenant-app-registrations">Your Own Single-Tenant App Registrations</a></li>
        <li><a href="#a-multi-tenant-app-registration-which-you-own">A Multi-Tenant App registration which you own</a></li>
      </ol>
    </li>
    <li><a href="#restoring-app-registrations">Restoring App Registrations</a></li>
    <li><a href="#other-types-of-service-principals">Other Types of Service Principals</a>
      <ol>
        <li><a href="#microsoft-applications">Microsoft Applications</a></li>
        <li><a href="#managed-identities">Managed Identities</a></li>
      </ol>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/entra-id/" >
                Entra ID
            </a>
        
            <a href="/categories/app-registrations/" >
                App Registrations
            </a>
        
            <a href="/categories/enterprise-aps/" >
                Enterprise Aps
            </a>
        
            <a href="/categories/microsoft-graph/" >
                Microsoft Graph
            </a>
        
            <a href="/categories/powershell/" style="background-color: #141e2c; color: #fff;">
                PowerShell
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/">Understanding Microsoft Entra ID App Registrations, Enterprise Apps and Service Principals</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            In this (very long) blog post, I&#39;m explaining everything you need to know about Entra ID applications, app registrations, enterprise apps and service principals from the view of a system engineer (not from a developer&#39;s perspective).
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Dec 05, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    53 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="intro">Intro
</h2><p>I once read a joke on X which I just vaguely remembered. Somebody was looking for a job in IT and the person hiring was like:</p>
<blockquote>
    <p><em>If you can tell me the difference between an Entra app registration and an enterprise app, I&rsquo;ll hire you.</em></p><span class="cite"><span>â€• </span><span>Some guy on X</span><cite></cite></span></blockquote>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/cover.png"
	width="726"
	height="669"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/cover_hu_79cae35b24a4d528.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/cover_hu_b8a8b0395ae5c27c.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="108"
		data-flex-basis="260px"
	
></p>
<p>If you&rsquo;re a seasoned developer, you might already know all of this but if you&rsquo;re a systems administrator coming from a more traditional world, like I am, much of the stuff I&rsquo;m covering today might be new, confusing, overwhelming or all the above to you. But rest assured, I didn&rsquo;t fully understand it either until today.</p>
<p>I want to highlight that identity isn&rsquo;t my primary focus, but it was still very important to me to understand all aspects of Entra applications. Most of the blog posts that already exist about Entra applications are written by professional developers and just assume that you&rsquo;re already familiar with certain things. That&rsquo;s what I&rsquo;m trying to do differently with this article.</p>
<p>I&rsquo;ll give you an example. Let&rsquo;s say you need to change the usage location of an Entra ID user, and you want to do it with PowerShell. A couple of years ago, you could just install the AzureAD PowerShell module, log in with your account and get it done by running <code>Set-AzureADUser -ObjectId user@domain.com -UsageLocation CH</code>.</p>
<p>In today&rsquo;s world you need to connect to Microsoft Graph using the Microsoft Graph PowerShell SDK (Microsoft.Graph.* PowerShell modules) and you need to make sure that the appropriate permissions have been granted to the enterprise app before you can do that, even if the account you&rsquo;re using to sign in already has the permissions to do the same action in the Entra Admin Center.</p>
<p>In this particular example, I&rsquo;m talking about what&rsquo;s referred to as an enterprise app or an enterprise application. The name of the official enterprise app that&rsquo;s used to access your tenant when using the Graph PowerShell modules is <strong>Microsoft Graph Command Line Tools</strong>.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image_hu_96263d9e9aee30a.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image_hu_b23b3e1ed1942567.png 1024w"
	loading="lazy"
	
		alt="Microsoft Graph Command Line Tools Enterprise Application"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>You can see that it says <strong>Enterprise Application</strong> below the name in the screenshot above. However, when you search for its Application ID, it lists the name under <strong>Enterprise Applications</strong>, but it also says <strong>Service Principal</strong> next to it.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-1.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-1_hu_a7d43b28fd91fa6.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-1_hu_eda6b27c5396877a.png 1024w"
	loading="lazy"
	
		alt="Application ID search results"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>Because this app is owned and published by Microsoft, there&rsquo;s no app registration for it in your tenant. You can only see the enterprise app. Only Microsoft can see the app registration in the tenant in which they registered the app (created the app registration).</p>
<p>Let&rsquo;s recap this quickly. Microsoft created an app registration for the Microsoft Graph Command Line Tools and published it. Any Entra ID admin can now add this app to their tenant as an enterprise app and use it to connect to Microsoft Graph via PowerShell.</p>
<p>So, when I use <code>Connect-MgGraph</code> and don&rsquo;t specify my own Client Id, I&rsquo;m automatically signing in to Microsoft&rsquo;s enterprise app.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-3.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-3_hu_ba3d95f260795a3c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-3_hu_7cfa598ab939230e.png 1024w"
	loading="lazy"
	
		alt="Partial output of Get-MgContext"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<h2 id="whats-the-difference-between-an-enterprise-app-and-a-service-principal">What&rsquo;s the difference between an enterprise app and a service principal?
</h2><p>They are the same thing. Enterprise apps are just what they are called in the Entra Admin Center but they&rsquo;re essentially service principals. The naming and UI elements here are very confusing. We already saw that searching for the app id in Entra Admin Center will say Service Principal next to the app but throughout this article, I&rsquo;m going to show you more proof why every enterprise app is a service principal.</p>
<p>What&rsquo;s a service principal then?</p>
<p>A service principal is always linked to an application (registration) either in your tenant or in another tenant. They inherit and share some of their properties, like the app id from their linked application. In essence, a service principal is an instance, or a child object, if you will, of a global application registered in Entra ID but it&rsquo;s unique to your tenant. Even if another tenant owns the app, service principals will allow you to manage how and by which users the app will be used.</p>
<p>If you search for <code>Service Principal</code> in the global Entra Admin Center search box it will list <strong>Enterprise applications</strong> as the top result.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-4.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-4_hu_c5e5a15bfee28006.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-4_hu_8fb91e57aab5e3f4.png 1024w"
	loading="lazy"
	
		alt="Entra Admin Center search results"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<h3 id="whats-the-difference-between-the-application-id-and-the-object-id-of-an-enterprise-app">What&rsquo;s the difference between the application ID and the Object ID of an Enterprise App?
</h3><p>These are the descriptions when you click on the little (i) icons on an enterprise app in Entra Admin Center:</p>
<h4 id="application-id">Application ID
</h4><blockquote>
    <p>This is the unique application ID of this application in your directory. You can use this application ID if you ever need help from Microsoft Support, or if you want to perform operations against this specific instance of the application using Microsoft Graph or PowerShell APIs.</p><span class="cite"><span>â€• </span><span>Entra Admin Center</span><cite></cite></span></blockquote>
<p>The application id is the same in all tenants where the enterprise app has been added to.</p>
<h4 id="object-id">Object ID
</h4><blockquote>
    <p>This is the unique ID of the service principal object associated with this application. This ID can be useful when performing management operations against this application using PowerShell or other programmatic interfaces.</p><span class="cite"><span>â€• </span><span>Entra Admin Center</span><cite></cite></span></blockquote>
<p>The object id is unique in every tenant to which the enterprise app has been added to. If an enterprise app is deleted and later added again, the object id will also change. The application id on the other hand is the same in every tenant because it&rsquo;s derived of the application id of the registered app for which the service principal was created.</p>
<h3 id="adding-an-enterprise-app-to-your-tenant">Adding an Enterprise App to Your Tenant
</h3><p>Providers/publishers of enterprise apps will typically give you a link which you have to open in order to grant admin consent on behalf of your organization. Granting admin consent will add the enterprise app to your tenant and requires global administrator rights.</p>
<p>In the case of the Microsoft Graph Command Line Tools, the enterprise app can be added simply by running <code>Connect-MgGraph</code>. This will open the browser and ask you for your consent.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-6.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-6_hu_cb95241fa5bb298a.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-6_hu_d06298f67c7aa572.png 1024w"
	loading="lazy"
	
		alt="Grant admin consent to add the enterprise app"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>I&rsquo;ve just added the Microsoft Graph Command Line Tools enterprise app to a tenant where it didn&rsquo;t exist before. If I check the audit log of the enterprise app, I can clearly see that there&rsquo;s been an action for <strong>Add service principal</strong> even though the portal is calling it an enterprise application.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-7.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-7_hu_1c541fef0100fa4f.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-7_hu_632cb95c0d77d8c0.png 1024w"
	loading="lazy"
	
		alt="Enterprise application audit log"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-8.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-8_hu_3352a86bb5b65a88.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-8_hu_a4093eb35702e4bb.png 1024w"
	loading="lazy"
	
		alt="Add service principal audit log details"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Since it&rsquo;s obvious that the same thing is sometimes called an enterprise app but sometimes it&rsquo;s also called a service principal, I&rsquo;ll try my best to stick to whatever the screenshots or code examples are calling it at the time. So, if the screenshot/code example is saying enterprise app, I&rsquo;ll call it an enterprise app. If it&rsquo;s saying service principal, I&rsquo;m referring to it as a service principal as well.</p>
<h2 id="im-a-sys-admin-why-should-i-care-about-all-of-this">I&rsquo;m a Sys Admin, why should I care about all of this?
</h2><p>Let&rsquo;s quickly go back to the example I used in the intro of this post. Let&rsquo;s assume that all you want to do is to use PowerShell to change the usage location of a user. Why should you care about all of this? Why do you need an app for this? And what even is an app in this context? Is it an enterprise app or an app registration?</p>
<p>If you use the official Microsoft Graph Command Line Tools enterprise app, which you are when you run <code>Connect-MgGraph</code> without specifying your own <code>-ClientId</code> then you don&rsquo;t need to worry about all this too much. All you need to do is to ask somebody with global admin permissions to add the enterprise app to your tenant and consent to the <code>User.Write.All</code> permission. That is, if you don&rsquo;t have global admin rights yourself.</p>
<p>I purposely chose the Microsoft Graph Command Line Tools enterprise app for this example because a lot of Sys Admins will need that to do their job. The thing with PowerShell scripts is that there won&rsquo;t always be something that&rsquo;s graspable, something that can be referred to as an app. A script is not really an app, but it still needs an Entra application to sign into Microsoft Graph to do whatever it needs to do.</p>
<p>This is different from when we look at a <em>real</em>, graspable app like Zoom for example. In that case, we have the Zoom app (the Zoom client installed on a device). But we&rsquo;ll also need to grant permissions the Zoom enterprise app to read/write the signed in user&rsquo;s calendar information if users want to link their Exchange calendar to Zoom.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-10.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-10_hu_569c1f1df82738c5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-10_hu_a42209a2fc4066e7.png 1024w"
	loading="lazy"
	
		alt="Example: Zoom enterprise app"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>The Zoom app and the Zoom enterprise app are definitely not the same thing even though both are called an app. Assigning the enterprise app to users won&rsquo;t install Zoom on their devices. That&rsquo;s what Intune is for.</p>
<p>So, as a Sys Admin, you might not be developing the next Zoom app that will be used by millions of people in thousands of Entra ID tenants, but you simply want to create a PowerShell script that changes the usage location of an Entra ID user.</p>
<p>The Microsoft Graph Command Line Tools enterprise app can only exist once in each tenant so if the entire IT staff of a company is using the same app to manage Entra ID, consented permissions can accumulate and spiral out of control rather quickly. There is a good article about that from Tony Redmond over at <a class="link" href="https://practical365.com/connect-microsoft-graph-powershell-sdk/"  target="_blank" rel="noopener"
    >Practical 365</a>.</p>
<p>If you want to avoid that, then you&rsquo;ll need to create your own app to connect to Graph. This is where you&rsquo;ll have to deal with app registrations.</p>
<h2 id="what-are-app-registrations">What Are App Registrations?
</h2><p>Adding an enterprise app is only possible when an app registration already exists either in your own tenant or in an external one.</p>
<p>When I go to enterprise apps in Entra Admin Center and click on <strong>Create your own application</strong> and then select <strong>Register an application to integrate with Microsoft Entra ID (App you&rsquo;re developing)</strong> and click <strong>Create</strong> nothing happens just yet. Instead, I&rsquo;m redirected to the <strong>App registrations</strong> page.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-11.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-11_hu_c9861e2986b0040e.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-11_hu_3530a8176326e3d9.png 1024w"
	loading="lazy"
	
		alt="Trying to create a new enterprise appâ€¦"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-9.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-9_hu_6f8fe73ad55f4294.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-9_hu_f9ed2205ba4ca686.png 1024w"
	loading="lazy"
	
		alt="â€¦will take you to App registrations"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>This means that there is no such thing as an enterprise app without an existing app registration. Not even in PowerShell. I&rsquo;ll talk more about this later.</p>
<p>The Entra Admin Center specifically says <strong>App you&rsquo;re developing</strong> but it could also be <em>just</em> a script that you&rsquo;re developing.</p>
<h3 id="create-an-app-registration">Create an App Registration
</h3><h4 id="in-entra-admin-center">In Entra Admin Center
</h4><p>App registrations can be found in the Entra Portal under <code>Identity\Applications\App registrations</code>. Enterprise applications are also found in the same menu, which is another reason why it&rsquo;s so hard to differentiate between the two. As you can see in the screenshot below, there is no app registration for <strong>Microsoft Graph Command Line Tools</strong> in my tenant even though I&rsquo;ve added the enterprise app before.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-12.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-12_hu_215a71c17754e958.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-12_hu_9717079fced8f001.png 1024w"
	loading="lazy"
	
		alt="App registrations in Microsoft Entra Admin Center"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>An app registration is essentially exactly what the name says. It simply registers an app in Entra ID. When you create a new app registration, you&rsquo;re basically just telling Entra ID that this app now exists but you can&rsquo;t really do anything with the app registration alone.</p>
<p>An Entra app can be registered to be added to either a single tenant (the tenant in which you register it), Multitenant (any Entra ID tenant) or Multitenant + personal Microsoft Accounts which are used for sign-ins with Microsoft 365 Family/Outlook.com/Skype/Xbox etc.</p>
<p>If you want to use this app to connect to Graph PowerShell in a script and you only need to manage your own tenant, making it available in your tenant only is the choice to go with. If you were in fact developing the next Zoom, you should choose to make it multi-tenant.</p>
<p>Here I&rsquo;m creating a new single-tenant app registration called <strong>Graph PowerShell Demo (Created in Portal)</strong>. If you want to sign into your app in Graph PowerShell, you also need to set the <strong>Redirect URI</strong> to <strong>Public client/native (mobile &amp; desktop)</strong> and configure <code>http://localhost</code> as the redirect URI.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-13.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-13_hu_c11a9b2d342776d3.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-13_hu_de77d22d1a62c0ad.png 1024w"
	loading="lazy"
	
		alt="Register a new application"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>This is what you&rsquo;ll see after the app registration has been created.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-16.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-16_hu_7af48fd2ed59da16.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-16_hu_5f8e08a3a6017951.png 1024w"
	loading="lazy"
	
		alt="App registration after itâ€™s been created in the portal"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>A very important part which is not often mentioned is that when you register a new app in the portal, an enterprise app (service principal) is automatically created for it as well.</p>
<p>When I search for the <strong>application (client) ID</strong> of the newly created app in Entra ID, two objects are returned. An app registration (application) and an enterprise application (service principal).</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-14.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-14_hu_db88a2ac764698c2.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-14_hu_543d45edae755870.png 1024w"
	loading="lazy"
	
		alt="App registration and enterprise application in search results"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>We can also see this very clearly in the audit log. First the application (app registration) is added and immediately after that, the service principal (enterprise app) is added as well.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-15.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-15_hu_fa3b13b0b2763fc8.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-15_hu_642beffd97ca7fd3.png 1024w"
	loading="lazy"
	
		alt="Audit log after creating a new app registration in the portal"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>In the details for the <strong>Add application</strong> activity the modified properties include a property named <strong>ServicePrincipalLockConfiguration</strong> which is a Json object and includes <code>&quot;IsEnabled&quot;: &quot;true&quot;</code>. I <em>think</em> that this is the part where the Entra Admin Center tells the provisioning backend to create a service principal for the app registration as well.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-18.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-18_hu_bbf1282aac997bde.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-18_hu_2ac4f322832ae06.png 1024w"
	loading="lazy"
	
		alt="Add application log details"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>For the <strong>Add service principal</strong> activity we can see that the modified properties include the <strong>Application (client) ID</strong> as value for the <strong>ServicePrincipalName</strong> and <strong>TargetId.ServicePrincipalNames</strong> properties.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-17.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-17_hu_24aa6a2fade84e52.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-17_hu_28f1008dec6d6558.png 1024w"
	loading="lazy"
	
		alt="Add service principal log details"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<h4 id="in-powershell">In PowerShell
</h4><p>To register a new app in PowerShell you have two options. You can either use the recently <a class="link" href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/introducing-the-microsoft-entra-powershell-module/ba-p/4173546/page/2"  target="_blank" rel="noopener"
    >announced</a> <strong>Microsoft.Graph.Entra</strong> module which is still in preview at the time of writing, or you can use the Cmdlet which is part of the <strong>Microsoft.Graph.Applications</strong> module.</p>
<h5 id="with-entra-powershell-module">With Entra PowerShell Module
</h5><p><a class="link" href="https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.entra/new-entraapplication?view=entra-powershell"  target="_blank" rel="noopener"
    >Docs</a> for <code>New-EntraApplication</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="nb">Connect-Entra</span> <span class="n">-Scopes</span> <span class="s2">&#34;Application.ReadWrite.All&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$appName</span> <span class="p">=</span> <span class="s2">&#34;Graph PowerShell Demo (Created with Entra PS)&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$newApp</span> <span class="p">=</span> <span class="nb">New-EntraApplication</span> <span class="n">-DisplayName</span> <span class="nv">$appName</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="with-microsoft-graph-powershell">With Microsoft Graph PowerShell
</h5><p><a class="link" href="https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.applications/new-mgapplication?view=graph-powershell-1.0"  target="_blank" rel="noopener"
    >Docs</a> for <code>New-MgApplication</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="nb">Connect-MgGraph</span> <span class="n">-Scopes</span> <span class="s2">&#34;Application.ReadWrite.All&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$appName</span> <span class="p">=</span> <span class="s2">&#34;Graph PowerShell Demo (Created with Graph PS)&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$newApp</span> <span class="p">=</span> <span class="nb">New-MgApplication</span> <span class="n">-DisplayName</span> <span class="nv">$appName</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Both Cmdlets are called <code>New-*Application</code> but in the portal this action is called <strong>Register an application</strong>. The menu which lists applications in the portal is called <strong>App registrations</strong> but in PowerShell we use <code>Get-EntraApplication</code> or <code>Get-MgApplication</code> to retrieve registered apps.</p>
<p>As if this wasn&rsquo;t confusing enough already, we now have to understand that what is presented to us as an <strong>app registration</strong> in the portal is sometimes also called <em>just</em> an <strong>application</strong>. When you create a new app registration, you&rsquo;re creating a new application by registering it. The portal takes the verb <strong>registering</strong> and converts it into a noun by calling it an <strong>app registration</strong>.</p>
<p>The outcome of both the above examples is exactly the same. For the sake of simplicity, I&rsquo;m only going to focus on <strong>Graph PowerShell Demo (Created with Entra PS)</strong> in this section.</p>
<p>As you can see below, when the app is created through PowerShell, no enterprise app is created automatically. Only the application is created (registered).</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-19.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-19_hu_d3baf158c8ac2a9c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-19_hu_896013b4b3edeef8.png 1024w"
	loading="lazy"
	
		alt="The enterprise app/service principal is missing"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>We have the audit log to back this up. It&rsquo;s only showing an <strong>Add application</strong> action.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-20.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-20_hu_906f42a891559c3c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-20_hu_ea3130e717c2acea.png 1024w"
	loading="lazy"
	
		alt="Audit log is only showing add application"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<h6 id="add-a-service-principal-with-powershell">Add a Service Principal with PowerShell
</h6><p>When you view the <a class="link" href="https://learn.microsoft.com/en-us/powershell/entra-powershell/manage-apps?view=entra-powershell"  target="_blank" rel="noopener"
    >documentation</a> for managing applications using the Entra PowerShell module, it becomes clear that registering an application and adding a service principal are two separate actions requiring different Cmdelts. There is absolutely no reference at all about enterprise apps on that Microsoft Learn page. They only talk about service principals.</p>
<p>To add a service principal for an app you registered using <code>New-EntraApplication</code> you&rsquo;ll need to run this code to add a service principal for it:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">New-EntraServicePrincipal</span> <span class="n">-AppId</span> <span class="nv">$newApp</span><span class="p">.</span><span class="py">AppId</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>After this, you&rsquo;ll see an app registration and an enterprise app when you search for the app id in the Entra Admin Center.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-21.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-21_hu_c3d1b401cf387193.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-21_hu_c30cbf154c3f2931.png 1024w"
	loading="lazy"
	
		alt="Enterprise app created with PowerShell"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>I told you earlier that you cannot create an enterprise app/service principal if no app has been registered for it before.</p>
<p>I tried to create a new service principal without specifying an app id anyway and I was immediately prompted for an AppId.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-23.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-23_hu_1828a45eddccfe0.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-23_hu_2f985137096462cc.png 1024w"
	loading="lazy"
	
		alt="Prompt for required parameter -AppId"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>As expected, the <a class="link" href="https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.entra/new-entraserviceprincipal?view=entra-powershell#-appid"  target="_blank" rel="noopener"
    >documentation</a> for <code>NewEntraServicePrincipal</code> lists the <code>-AppId</code> parameter as required. Funny enough, the <a class="link" href="https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.applications/new-mgserviceprincipal?view=graph-powershell-1.0#-appid"  target="_blank" rel="noopener"
    >docs</a> for <code>New-MgServicePrincipal</code> say it&rsquo;s not required but that&rsquo;s definitely not the case.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-24.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-24_hu_31de6e487d1e4b3.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-24_hu_1d1f9deb719a739.png 1024w"
	loading="lazy"
	
		alt="Error details of New-MgServicePrincipal without -AppId"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<h2 id="connect-to-graph-powershell-using-your-own-app">Connect to Graph PowerShell Using Your Own App
</h2><p>Now that I have an app registration and a service principal, I can use the application id to sign into Graph PowerShell.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="nv">$tenantId</span> <span class="p">=</span> <span class="s2">&#34;4bffbf87-53a0-4fce-b58b-4179cb3a3b7d&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$appId</span> <span class="p">=</span> <span class="s2">&#34;90b85c34-0c3f-4d69-9668-ea74f20e5d62&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">Connect-MgGraph</span> <span class="n">-NoWelcome</span> <span class="n">-TenantId</span> <span class="nv">$tenantId</span> <span class="n">-ClientId</span> <span class="nv">$appId</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>If I&rsquo;m doing this for the first time, I&rsquo;m prompted for admin consent. Note that you&rsquo;ll need to specify the redirect URI either when creating the app registration through PowerShell or you&rsquo;ll have to do it manually in the portal afterwards. Otherwise, this won&rsquo;t work.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-26.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-26_hu_b4ac1020c17096f1.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-26_hu_5e0075b5da97ff3b.png 1024w"
	loading="lazy"
	
		alt="Admin consent request"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>Now you can see that I&rsquo;m signed in using my own app and I&rsquo;m not using the <strong>Microsoft Graph Command Line Tools</strong> app anymore.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-98.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-98_hu_fa8a8a9961191ac3.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-98_hu_c28c6f1e8c1b446b.png 1024w"
	loading="lazy"
	
		alt="Partial output of Get-MgContext"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>When I finally try to update a user&rsquo;s usage location with an account that has global admin rights, I still get an error message because of insufficient privileges. This is because the <strong>User.ReadWrite.All</strong> permission is not part of the <strong>Scopes</strong> yet. I&rsquo;ll show you how to add that later on.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-27.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-27_hu_7d658d3680f5fd30.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-27_hu_e37d8416fb4eab8c.png 1024w"
	loading="lazy"
	
		alt="Insufficient privileges"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<h3 id="what-if-there-is-no-enterprise-appservice-principal-yet">What if there is no Enterprise App/Service Principal Yet?
</h3><p>When you&rsquo;re automating the registering of an app through a script, there&rsquo;s no reason why you wouldn&rsquo;t also create the service principal through the same PowerShell script but since this is a deep dive, I&rsquo;m going to show you an alternative way anyway.</p>
<p>If an app registration is only telling Entra ID that an app exists, and no service principal exists for the app registration, will I still be able to sing in and use it?</p>
<p>The answer to this question is yes and no. Technically, you cannot use only an app registration to sign into the app. However, when you connect to Microsoft Graph and specify the <code>-ClientId</code> of an app registration that does not have a service principal yet, one is automatically created after you&rsquo;ve granted admin consent.</p>
<p>Since I&rsquo;ve already added a service principal for <strong>Graph PowerShell Demo (Created with Entra PS)</strong> with PowerShell, I&rsquo;m going to demo this using the app called <strong>Graph PowerShell Demo (Created with Graph PS)</strong> which I&rsquo;ve created with <code>New-MgApplication</code>.</p>
<p>This app currently only has an app registration but no enterprise app/service principal.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-25.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-25_hu_ca50d1bd6c25ee20.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-25_hu_cb683a4629c8efbe.png 1024w"
	loading="lazy"
	
		alt="Graph PowerShell Demo (Created with Graph PS)"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>I did however add <code>http://localhost</code> as a redirect URI in the app registration through the portal after I&rsquo;ve created the app with PowerShell.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-28.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-28_hu_68d327a8bf66cb0c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-28_hu_def9a61d9e1119ce.png 1024w"
	loading="lazy"
	
		alt="Authentication page of the app registration"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>Now watch what happens when I sign into the app through <code>Connect-MgGraph</code>.</p>
<p>First of all, I need to grant consent for this app as well.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-30.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-30_hu_ecd8c5a1b1f2a855.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-30_hu_fb959ef2b554cb81.png 1024w"
	loading="lazy"
	
		alt="Admin consent request"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>After granting the consent I&rsquo;m in.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-29.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-29_hu_82dc275bc51301b6.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-29_hu_40de374f4ef6863b.png 1024w"
	loading="lazy"
	
		alt="Partial output of Get-MgContext"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>But how is that possible when there&rsquo;s no service principal for this app registration yet? Well, this also triggered the creation of a new service principal, just like signing into Graph PowerShell using the Microsoft Graph Command Line Tools did.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-31.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-31_hu_a2d7a65f77fa279b.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-31_hu_9c211b345a72ba1b.png 1024w"
	loading="lazy"
	
		alt="The enterprise app/service principal was created after consent was granted."
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>And of course, this can also be seen in the audit log.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-35.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-35_hu_efe324c066177228.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-35_hu_859424e52c9cb847.png 1024w"
	loading="lazy"
	
		alt="Audit log actions after signing into the app for the first time"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<h3 id="quickly-switch-between-an-app-registration-and-its-service-principal">Quickly Switch Between an App Registration and It&rsquo;s Service Principal
</h3><p>When you&rsquo;re managing apps and frequently need to switch between configuring the app registration and it&rsquo;s enterprise app, the quickest way to do so is to open the <strong>API permissions</strong> menu on the app registration or the <strong>Permissions</strong> menu on the enterprise app.</p>
<p>When you&rsquo;re viewing an app registration, there&rsquo;s a link called <strong>Enterprise applications</strong> at the bottom of the browser window which will take you directly to the enterprise app of this app registration.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-32.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-32_hu_261a2eaf1a1e39a2.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-32_hu_73164bc3fbe3935e.png 1024w"
	loading="lazy"
	
		alt="API permissions in an app registration"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>To get from an enterprise to its app registration (if it was registered in your tenant) you can click on the <strong>Application registration</strong> link in the middle of the browser window.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-33.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-33_hu_b15133ba8a7b1cf5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-33_hu_3620e6a76e2ba28d.png 1024w"
	loading="lazy"
	
		alt="Permissions in enterprise app"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>Obviously, this part is missing from an enterprise app for which no app registration exists in your tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-34.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-34_hu_a2c39101c81fa360.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-34_hu_9f19262d3c0773d4.png 1024w"
	loading="lazy"
	
		alt="Example: Microsoft Graph Command Line Tools"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<h2 id="quick-recap">Quick Recap
</h2><p>If you&rsquo;re still with me, I&rsquo;d like to recap and elaborate on a couple of things. App registrations register an app in the Microsoft Entra Eco System. An application (client) ID of an app registration is unique across all Entra ID tenants. That&rsquo;s documented <a class="link" href="https://learn.microsoft.com/en-us/powershell/entra-powershell/manage-apps?view=entra-powershell#register-an-application"  target="_blank" rel="noopener"
    >here</a>. Therefore, an app registration can only exist in <strong>one</strong> tenant.</p>
<p>An enterprise app is the same thing as a service principal. The Entra Admin center and other UI elements typically use the term enterprise application but Graph PowerShell and audit logs typically use the term service principal for them.</p>
<p>Enterprise apps can be added and exist in any tenant. If you register a new app in the Entra Admin Center, you&rsquo;ll see both an app registration and an enterprise app for it in your tenant. Because they&rsquo;re directly linked to each other, they always share the same display name and application id.</p>
<p>If you&rsquo;re adding an enterprise app from a vendor, you won&rsquo;t see an app registration in your tenant because the app was registered as a multi-tenant app in a different tenant.</p>
<p>When you create an app registration in the portal, a service principal is automatically added as well. When you create a new app registration through PowerShell you have to manually create a service principal for it.</p>
<p>App registrations are also called <em>just</em> applications and until a service principal is created for them, they don&rsquo;t really do anything except telling Entra ID that the app exists and specifying what permissions should be requested when an enterprise app for the app registration is added. When signing into your app, the service principal is used.</p>
<h2 id="renaming-apps">Renaming Apps
</h2><p>Entra Admin Center will allow you to rename app registrations and enterprise apps. When you rename either one of them, the other one is automatically updated as well.</p>
<p>I first changed the name of the enterprise app by adding <code> - Enterprise App</code> to it, hoping this would result in different names to better distinguish between the app registration and the enterprise app. But this is not the case. In the audit log I can now see that both the service principal and the app registration were updated.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-36.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-36_hu_889865e684c75d92.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-36_hu_d0a28be6fd7a5051.png 1024w"
	loading="lazy"
	
		alt="Service principal rename audit log"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-37.png"
	width="2324"
	height="1550"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-37_hu_6f097f80794cf86c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-37_hu_ea167b8db9da76b0.png 1024w"
	loading="lazy"
	
		alt="App registration rename audit log"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="359px"
	
></p>
<p>It&rsquo;s the same case the other way around. When you change the name of an app registration, the enterprise app is renamed as well.</p>
<p>What about renaming a multi-tenant enterprise app? If I&rsquo;m not the owner of the app/if the app hasn&rsquo;t been registered in my tenant, it&rsquo;s not possible to rename an enterprise app. Here&rsquo;s the example of the Microsoft Graph Command Line Tools enterprise app again to demonstrate this.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-38.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-38_hu_24f935ac95f9d9af.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-38_hu_63935db3bda7a281.png 1024w"
	loading="lazy"
	
		alt="The name is greyed out"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<blockquote>
    <p>â€‹Some of the displayed properties that are not editable are managed on the application registration in the application&rsquo;s home tenant.</p><span class="cite"><span>â€• </span><span>Entra Admin Center</span><cite></cite></span></blockquote>
<p>To show you what happens to enterprise apps in other tenants, when you&rsquo;re the owner of a multi-tenant app and you&rsquo;re renaming the app registration, I must first create one.</p>
<h2 id="creating-a-multi-tenant-app">Creating a Multi-Tenant App
</h2><p>As I&rsquo;ve briefly explained before, the reason why you&rsquo;d want to register a multi-tenant app is if you&rsquo;re developing an app which will need to access data from customer tenants through Microsoft Graph. This could also be something much simpler though. For example, it could be a reporting solution which will access and process Teams call records from customer tenants.</p>
<p>It&rsquo;s good practice to register multi-tenant apps in dedicated tenants. If you&rsquo;re planning to develop an app which needs a registered Entra application, don&rsquo;t create it in your main tenant you need for your internal day to day operations. Instead, create a dedicated service tenant which is only used to administer the resources needed for the app/service you&rsquo;re developing/providing.</p>
<p>For this article, I&rsquo;ll call the tenant in which I register the multi-tenant app the <strong>Service Tenant</strong>. After all, the call records I want to access are in my lab tenant and I want to show you how data in my lab tenant can be accessed from another tenant. So, if I registered the multi-tenant app in my lab tenant, I&rsquo;d need another lab tenant with actual data in it. For this part, I&rsquo;m going to call my lab tenant the <strong>Customer Tenant</strong>.</p>
<p>Note: Although the icons are very small, you can see which tenant I&rsquo;m currently in by looking at the Edge profile icon (top left) or the user account icon (top right) in the screenshots.</p>
<p>This time, I&rsquo;m creating a new app registration for a multi-tenant app and I&rsquo;m doing this in the service tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-40.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-40_hu_2a90c588eaf15222.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-40_hu_b9f3055fca9ecb93.png 1024w"
	loading="lazy"
	
		alt="Register a new multi-tenant application"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Because I used the portal to do this, this creates an app registration and an enterprise app in the service tenant.</p>
<p>I&rsquo;ve added a couple of delegated permissions to this app now, but I didn&rsquo;t grant admin consent in the service tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-39.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-39_hu_9c966924aa0c7a09.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-39_hu_2a808d44aa3b42e.png 1024w"
	loading="lazy"
	
		alt="Delegated permissions of multi-tenant app registration"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<h3 id="adding-multi-tenant-app-to-another-tenant">Adding Multi-Tenant App to Another Tenant
</h3><p>To add the multi-tenant app to my customer tenant, I&rsquo;m simply connecting to Microsoft Graph PowerShell using it&rsquo;s app id and the tenant id of the customer tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-41.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-41_hu_52a552f9ee79b34c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-41_hu_c9c7df7107e2e36a.png 1024w"
	loading="lazy"
	
		alt="Connect-MgGraph to add multi-tenant app"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>Of course, I&rsquo;ll have to grant consent for this as well.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-42.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-42_hu_c07f4cfd494fe628.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-42_hu_8a2aad0a2ed0b785.png 1024w"
	loading="lazy"
	
		alt="Consent request dialog"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>After granting admin consent, the enterprise app has been added to my customer tenant, even though the app registration was created in the service tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-43.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-43_hu_824f7396f79a2656.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-43_hu_d8f1652ed6156fe3.png 1024w"
	loading="lazy"
	
		alt="Enterprise app of multi-tenant app registration"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>In <strong>Permissions</strong> I can see that the enterprise app has the same permissions that were configured on the app registration in the service tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-44.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-44_hu_3f0dca0048b1883b.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-44_hu_9404b5a8e9aa69a0.png 1024w"
	loading="lazy"
	
		alt="Multi-tenant enterprise app permissions"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<h3 id="renaming-a-multi-tenant-app">Renaming a Multi-Tenant App
</h3><p>Now that I have a multi-tenant app, let&rsquo;s revisit what happens when it&rsquo;s renamed.</p>
<p>In the service tenant, I&rsquo;ve now renamed the app from <strong>Graph PowerShell (Multi-Tenant)</strong> to <strong>Graph PowerShell (Multi-Tenant) V2</strong>. In my customer tenant, the name of the enterprise app/service principal was not updated, however, the name of the app was updated under properties.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-45.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-45_hu_29cb25b9bb5004c4.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-45_hu_fce38b4071d43049.png 1024w"
	loading="lazy"
	
		alt="Updated name in properties"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>When I check the Microsoft Graph context after signing in, I can also see the new app name. The tenant id is the one from my customer tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-46.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-46_hu_792005a3f4ce36e8.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-46_hu_cfc76d8c856a4973.png 1024w"
	loading="lazy"
	
		alt="Partial output of Get-MgContext"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>This is a great example to show that the app name and the app id of the enterprise app are in fact linked to the app registration of the service tenant but since the enterprise app is a unique instance with its own object id only present in the customer tenant, the enterprise app&rsquo;s display name was not updated.</p>
<h2 id="am-i-using-the-service-principal-or-the-app-registration-to-sign-in">Am I using the Service Principal or the App registration to Sign In?
</h2><p>Wait, didn&rsquo;t I say before that the service principal and not the app registration is used to sign into an app? So why does it show the new name of the app and not the unchanged name of the service principal in Microsoft Graph context?</p>
<p>This is very confusing indeed. But looking at this from a multi-tenant perspective should help clear things up. In the customer tenant, there is no app registration, only a service principal. How would I be able to sign into the customer tenant using the app registration, if it doesn&rsquo;t exist in the customer tenant? It&rsquo;s just not possible.</p>
<p>But let&rsquo;s compare the app registration and the enterprise app in the service tenant again. By the way, here you can see that both the app registration and the enterprise app were renamed, just like when I renamed the single tenant app in my customer tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-47.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-47_hu_593ae52e9782ac69.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-47_hu_fde595bccf18bbbe.png 1024w"
	loading="lazy"
	
		alt="App registration"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-48.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-48_hu_5669ba721e059c69.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-48_hu_301e530ac8e7dde0.png 1024w"
	loading="lazy"
	
		alt="Enterprise app"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Notice how there is no <strong>Activity</strong> section on the left navigation pane for the app registration. <strong>Sign-in logs</strong> are only available for the enterprise app. This is another fact which proves that the service principal is used for signing in.</p>
<p>Since I&rsquo;ve never signed in to the app in the service tenant, the sign-in logs are empty there.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-49.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-49_hu_8c63fe561363e94b.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-49_hu_dea45fded1d7468f.png 1024w"
	loading="lazy"
	
		alt="Empty sign-in logs in service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>In the customer tenant, the sign-in logs show two sign ins because I signed in again, after I changed the name of the app registration in the service tenant. The name of the enterprise app now says <strong>Graph PowerShell (Multi-Tenant) V2</strong> because I&rsquo;ve deleted the enterprise app and added it again, to test if it would be added with the new name. Since the log filter is set to <strong>application</strong> it will show sign in logs from both the old and the new service principal but in this particular example, the name of the application changed to <strong>V2</strong> without deleting and adding the app again.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-51.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-51_hu_1e9bccadd22969e5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-51_hu_770f9af13ed7db15.png 1024w"
	loading="lazy"
	
		alt="Sign-in logs in the customer tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>As I&rsquo;ve said before, the service principal object is created in the customer tenant, when the multi-tenant app is added. Therefore, the name of the service principal does not update when the app registration is renamed in the service (home) tenant but the name of the app that&rsquo;s linked to this service principal does update in all tenants.</p>
<p>If the enterprise app is deleted from the customer tenant and added again, the enterprise app/service principal will be created with the new name of the app registration.</p>
<p>If you pay attention to the sign in logs of the enterprise app/service principal, you can see that that it filters for <strong>Application contains</strong> and it&rsquo;s using the app id and not the object id of the service principal as value. I couldn&rsquo;t find any reference of the service principal&rsquo;s object id in the sign-in logs. The key is that the service principal is linked to the app registration by its application id. I <em>think</em> this is how Entra knows which service principal needs to be used.</p>
<p>Let&rsquo;s turn to Microsoft Graph to see if I can find more information. To get the properties of the service principal, I need to specify the object id of the service principal because the app registration does not exist in the customer tenant.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nv">$mgServicePrincipal</span> <span class="p">=</span> <span class="nb">Get-MgServicePrincipal</span> <span class="n">-ServicePrincipalId</span> <span class="s2">&#34;e66c003a-c7e0-46c0-906a-4e30e0d85ab4&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$mgServicePrincipal</span> <span class="p">|</span> <span class="nb">Format-List</span> <span class="p">*</span><span class="n">name</span><span class="p">*,</span> <span class="p">*</span><span class="n">id</span><span class="p">*,</span> <span class="p">*</span><span class="n">princ</span><span class="p">*,</span> <span class="p">*</span><span class="n">audience</span><span class="p">*</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-50.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-50_hu_f24c758f762b1827.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-50_hu_6d2a3d9fca9598c1.png 1024w"
	loading="lazy"
	
		alt="Partial output of Get-MgServicePrincipal"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>There are a couple of things to unwrap here. First of all, the <strong>AppOwnerOrganizationId</strong> includes the tenant id of the service tenant (tenant in which the application was registered). The <strong>Id</strong> of the service principal is what&rsquo;s listed in Entra Admin Center as <strong>Object Id</strong>. I should probably mention again that I deleted the enterprise app and added it again, that&rsquo;s why both names are the same now.</p>
<p>Both the <strong>AppId</strong> and the <strong>ServicePrincipalNames</strong> are set to the app id of the app registration in the service tenant. The portal doesn&rsquo;t show you this, but I <em>think</em> that&rsquo;s why you only see the app id but never the object id of the service principal.</p>
<p>I wouldn&rsquo;t be me if I didn&rsquo;t rename the app registration in the service tenant to <strong>Graph PowerShell (Multi-Tenant) V3</strong> again after discovering this.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-52.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-52_hu_28f4809ec777a0ee.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-52_hu_d47ce6b5ca690.png 1024w"
	loading="lazy"
	
		alt="AppDisplayName and DisplayName are now different"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>This tells us that the <strong>AppDisplayName</strong> is the display name of the app registration which comes from the service (home) tenant. The <strong>DisplayName</strong> is the name of the enterprise app/service principal display name specific to the customer tenant.</p>
<p>In conclusion, you&rsquo;re using the application to sign in, but you&rsquo;ll need a service principal for the app to do so.</p>
<h2 id="control-who-can-sign-into-your-app">Control Who Can Sign Into Your App
</h2><p>Further proof that enterprise apps/service principals are used when signing in is that you define who can use/access your app on the enterprise app configuration page and not on the app registration. If you want to limit who can sign into your app, you need to enable <strong>Assignment required?</strong> and set this to <strong>Yes</strong> on the enterprise app&rsquo;s <strong>Properties</strong>. In the screenshot below, I&rsquo;m modifying the properties of the multi-tenant enterprise app which I&rsquo;ve previously added to my customer tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-54.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-54_hu_a8f562b04dfa30cc.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-54_hu_85e7fc7395ada832.png 1024w"
	loading="lazy"
	
		alt="Set assignment required to yes"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Under <strong>Users and groups</strong> I can now define which users and/or groups are allowed to sign into the app.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-53.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-53_hu_f6b395e4790d5acc.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-53_hu_893a4327184b59d1.png 1024w"
	loading="lazy"
	
		alt="Users and groups configuration of enterprise app"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>When I try to sign in with a user which isn&rsquo;t allowed under <strong>Users and groups</strong> I get an error message.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-55.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-55_hu_fb852084957fbeb3.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-55_hu_4d85cc8e465eb6c0.png 1024w"
	loading="lazy"
	
		alt="Error message when user doesnâ€™t have the enterprise app assigned"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>If assignment required? is enabled, not even global admins can sign in, if they&rsquo;re not explicitly allowed.</p>
<h2 id="permissions-on-applications">Permissions on Applications
</h2><p>As you may have noticed, there are permissions in both app registrations and enterprise apps. But what do they do?</p>
<h3 id="delegated-vs-application-permissions">Delegated vs Application Permissions
</h3><p>First, you need to understand the difference between delegated and application permissions. Delegated permissions require a signed in user and requests are made as the signed in user but the app which is used to connect to Graph has to have the appropriate delegated permissions.</p>
<p>For example, if you want to change the usage location of an Entra ID user via Graph PowerShell, your account needs to have the <strong>User Administrator</strong> role assigned and the app which you are using to connect to Graph needs to have the delegated permission <strong>User.Write.All</strong> configured and consented.</p>
<p>Just because your account can perform an action in the Entra Admin Center, it doesn&rsquo;t mean that you&rsquo;ll also be able to perform the same action in Graph PowerShell unless the delegated permission has been specifically configured on the app that you&rsquo;re using to connect to Graph. Configuring something in the portal doesn&rsquo;t require explicit permissions in addition to having an Entra Admin role assigned. But doing the same action through the Graph API requires an explicit permission on the app you want to use.</p>
<p>You should always follow the <strong>least</strong> <strong>privilege</strong> principle and only configure the permission that are actually needed. This <a class="link" href="https://learn.microsoft.com/en-us/graph/permissions-reference"  target="_blank" rel="noopener"
    >link</a> is a good reference to learn what each permission does. I also highly recommend checking all your existing applications which can access Graph via PowerShell and make sure that only admin users are allowed to sign into the apps.</p>
<p>Application permissions mean that an app will be able to perform actions without a signed in user. In this case, the action is performed as the app itself. You&rsquo;ll need either a client secret or a certificate for that.</p>
<h2 id="add-permissions-to-applications">Add Permissions to Applications
</h2><p>Let&rsquo;s look at different examples/scenarios.</p>
<h3 id="you-own-the-app-registration">You own the App Registration
</h3><p>In this example, I&rsquo;m using the <strong>Graph PowerShell Demo (Created in Portal)</strong> app which was created in the customer tenant again. When the app registration is created through the portal, the delegated permission <strong>User.Read</strong> is added as a <strong>configured</strong> permission by default. Admin consent has not been granted yet and I&rsquo;ve never signed into this app before. Thus, the permissions of the enterprise app are empty.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-56.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-56_hu_a43f4a693c647559.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-56_hu_3439b3849a9b8f81.png 1024w"
	loading="lazy"
	
		alt="Configured permissions of app registration"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-57.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-57_hu_740d4126d8a1b982.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-57_hu_178e51d088955217.png 1024w"
	loading="lazy"
	
		alt="Permissions of enterprise app"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>When I click <strong>Grant admin consent</strong> on the enterprise app, a new browser window opens and asks me to consent to the permissions which are configured in the app registration. Signing into this app through Graph PowerShell for the first time would have the same effect.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-58.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-58_hu_7ee771578e0b00e5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-58_hu_11d0ea7a7b7333ad.png 1024w"
	loading="lazy"
	
		alt="Admin consent request"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>Let me add a new configured permission on the app registration.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-59.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-59_hu_b0fd00e22ffb5d2b.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-59_hu_d7ec25a1d79496a3.png 1024w"
	loading="lazy"
	
		alt="User.Read.All added to configured permissions of app registration"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>I have not yet consented <strong>User.Read.All</strong>, that&rsquo;s why it&rsquo;s showing as <strong>Not granted</strong>.</p>
<p>When I sign into Graph PowerShell using the app id of this app, the scope is not added to the session.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-60.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-60_hu_5a5267369e8e7ec2.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-60_hu_1d94417ae47e224.png 1024w"
	loading="lazy"
	
		alt="User.Read.All scope is missing"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>I can grant admin consent for the added permission on the app registration from the portal.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-61.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-61_hu_5c8ffa19a1b31018.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-61_hu_c9a7b4d0f4571f1a.png 1024w"
	loading="lazy"
	
		alt="Grant admin consent on app registration"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>When I connect to Graph again and check the context again, I can now see the <strong>User.Read.All</strong> scope.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-62.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-62_hu_b4c8cc061dd0341b.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-62_hu_f20d5b718cb96c9a.png 1024w"
	loading="lazy"
	
		alt="Available scopes/permissions"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>The configured permissions of an app registration tell the enterprise app what permissions should be requested during the consent process.</p>
<blockquote>
    <p>Applications are authorized to call APIs when they are granted permissions by users/admins as part of the consent process. The list of configured permissions should include all the permissions the application needs.</p><span class="cite"><span>â€• </span><span>Entra Admin Center</span><cite></cite></span></blockquote>
<p>When I check the permissions of the enterprise app, I can see that the <strong>User.Read.All</strong> permission was also added to the enterprise app.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-63.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-63_hu_5f808091225125d5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-63_hu_62b54b3ed17240ed.png 1024w"
	loading="lazy"
	
		alt="Added permission on enterprise app"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<h4 id="add-a-permission-without-adding-it-configured-permissions-first">Add a permission without adding it configured permissions first
</h4><p>Although this isn&rsquo;t following best practice, it&rsquo;s also possible to add new permissions to the enterprise app without adding them to the app registration&rsquo;s configured permissions first. To do so, I&rsquo;m simply adding the scopes I want when I&rsquo;m connecting to Graph PowerShell.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">Connect-MgGraph</span> <span class="n">-NoWelcome</span> <span class="n">-TenantId</span> <span class="nv">$tenantId</span> <span class="n">-ClientId</span> <span class="nv">$appId</span> <span class="n">-Scopes</span> <span class="s2">&#34;Group.Read.All&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Guess what happens now? Yep, I&rsquo;m prompted to consent again.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-64.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-64_hu_5cc9a2f57533d25b.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-64_hu_f319f20f87fb86a3.png 1024w"
	loading="lazy"
	
		alt="New consent request dialog"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>When I check the permissions of the enterprise app, I can see that the <strong>Group.Read.All</strong> permission was added to it.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-65.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-65_hu_cc90cb38e541b92b.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-65_hu_35d308fe4889a75a.png 1024w"
	loading="lazy"
	
		alt="Enterprise app permissions"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>However, when I go back to the app registration, the freshly consented permission shows up under <strong>Other permissions granted</strong> and not under <strong>Configured permissions</strong>.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-66.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-66_hu_ff95f616ff886e2e.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-66_hu_d4eb8854c3d51f10.png 1024w"
	loading="lazy"
	
		alt="App registration permissions"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Entra Admin Center says the following about this:</p>
<blockquote>
    <p>These permissions have been granted for NoCapTech but aren&rsquo;t in the configured permissions list. If your application requires these permissions, you should consider adding them to the configured permissions list.</p><span class="cite"><span>â€• </span><span>Entra Admin Center</span><cite></cite></span></blockquote>
<p>If a permission is required for your app, you can use the three dots to add other permissions to the app&rsquo;s configured permissions.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-99.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-99_hu_650dd29f15fa4f68.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-99_hu_42814f299ecb514a.png 1024w"
	loading="lazy"
	
		alt="Add other permissions to configured permissions of app registration"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<h3 id="remove-permissions">Remove Permissions
</h3><p>Let&rsquo;s not forget that we&rsquo;re still on a mission to change a user&rsquo;s usage location using PowerShell. The <strong>Users.Read.All</strong> permission won&rsquo;t help us here because it doesn&rsquo;t include <strong>write</strong> permission. Let&rsquo;s remove that one and add <strong>Users.Write.All</strong>.</p>
<p>I can either remove a permission or only revoke its admin consent. In this case I want to remove it entirely, so I must first remove it and then revoke the admin consent.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-100.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-100_hu_fd1c44287fb94cf2.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-100_hu_eaac84311b700301.png 1024w"
	loading="lazy"
	
		alt="Remove permission from app registration"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-101.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-101_hu_90173876dfe440ad.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-101_hu_652de3aada54597b.png 1024w"
	loading="lazy"
	
		alt="Revoke admin consent for permission"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>Now I&rsquo;m going to add the <strong>Users.ReadWrite.All</strong> permission and grant admin consent for it.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-102.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-102_hu_def984ec1abd2f3d.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-102_hu_55b7bc7c7602f6ac.png 1024w"
	loading="lazy"
	
		alt="Add permission"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-103.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-103_hu_251cb4c768598e95.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-103_hu_78546bb6a60a02f5.png 1024w"
	loading="lazy"
	
		alt="Grant admin consent"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>Because I&rsquo;ve added this permission to the configured permissions, the next time I&rsquo;m signing into Graph PowerShell using this app id, the permission will be available by default.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-104.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-104_hu_12ca02eb2c4a365e.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-104_hu_848fe65ccd2e7fb6.png 1024w"
	loading="lazy"
	
		alt="Partial output of Get-MgContext"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>This means that I&rsquo;m now finally able to update a user&rsquo;s usage location using PowerShell.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-105.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-105_hu_6833fdbb91afcb83.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-105_hu_f4f0e8537ddf677a.png 1024w"
	loading="lazy"
	
		alt="No more error messages!"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>In case you were wondering, this doesn&rsquo;t work if the signed in user doesn&rsquo;t have the <strong>User Administrator</strong> (or higher permissions) assigned to them. Just because a delegated permission like <strong>User.Write.All</strong> has been configured and consented on an Entra application, it doesn&rsquo;t mean that any user which is allowed to sign into Graph PowerShell will be able to perform write actions on users.</p>
<p>Because I didn&rsquo;t set <strong>Assignment required?</strong> to <strong>Yes</strong>, any user (including non-admin users) in the customer tenant can now sign into Graph PowerShell but they can&rsquo;t use all the consented scopes/permissions.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-124.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-124_hu_8f8930fa591021c5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-124_hu_745bfb4800b1fafa.png 1024w"
	loading="lazy"
	
		alt="Error message when the signed in user doesnâ€™t have admin permissions"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<h3 id="you-do-not-own-the-app-registration">You do not own the App registration
</h3><p>In this example, I&rsquo;m using the <strong>Graph PowerShell (Multi-Tenant)</strong> from the service tenant. Note: I&rsquo;ve re-created this app in the service tenant and named it <strong>V4</strong> so Ids in screenshots are now different.</p>
<p>Here are the configured permissions of the service tenant&rsquo;s app registration and the customer tenant&rsquo;s enterprise app in comparison. I&rsquo;m not sure why <strong>email</strong> hasn&rsquo;t been added to enterprise app. It might be because it&rsquo;s already part of one of the other permissions.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-67.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-67_hu_b01f1dea9ad0bcb3.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-67_hu_76b3fcdbe5094853.png 1024w"
	loading="lazy"
	
		alt="App registration permissions in service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-68.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-68_hu_4a45b084a71cbf9f.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-68_hu_77475a7028e2fe85.png 1024w"
	loading="lazy"
	
		alt="Enterprise app permissions in customer tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Interestingly enough, <strong>email</strong> appears in the Graph context.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-69.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-69_hu_5de02b571f68fd5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-69_hu_136115ed6adc8dd.png 1024w"
	loading="lazy"
	
		alt="Output of Graph context"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>Because the app registration in the service tenant has configured permissions, they&rsquo;re automatically requested during the consent process when the app is added as an enterprise app to the customer tenant.</p>
<p>Let&rsquo;s start playing around by adding a new delegated permission to the enterprise app in the customer tenant. For this, I&rsquo;m signing into Graph again by specifying the customer tenant id and the app id of the multi-tenant app that is registered in the service tenant and I&rsquo;m adding <code>-Scopes &quot;User.Read.All&quot;</code> to <code>Connect-MgGraph</code>. Because this is a new permission, I have to grant consent for it.</p>
<p>As expected, the <strong>User.Read.All</strong> permission is now listed on the enterprise app in the customer tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-70.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-70_hu_6700d66ae453c256.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-70_hu_724cd26fd372a28.png 1024w"
	loading="lazy"
	
		alt="Enterprise app permissions"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>This permission has not been added to <strong>Other permissions granted</strong> in the app registration of the service tenant like it was the case when both the app registration and the enterprise app were available in the same tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-71.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-71_hu_42959b0f1324e5ba.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-71_hu_2098b25c50f99762.png 1024w"
	loading="lazy"
	
		alt="Permissions on app registration in service tenant remain unchanged"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>This actually makes a lot of sense. Imagine how many permissions would be here if this was the Microsoft Graph Command Line Tools in Microsoft&rsquo;s service tenant.</p>
<h3 id="quick-recap-1">Quick Recap
</h3><p>This means that the owner/publisher of the app registration defines what permissions are needed for their app by adding the required permissions as configured permissions. Whatever permissions are configured on the app registration will be the permissions for which the enterprise app will request consent for. Basically, the configured permissions are the minimal permissions required but if you want, you can still add more permissions to your enterprise app because that is specific to your tenant.</p>
<p>Another interesting discovery is that the service tenant doesn&rsquo;t actually need to have admin consent granted for the permissions on the app registration or on the enterprise app. When the enterprise app is added to the customer tenant, the consent is granted for this tenant only.</p>
<p>Admin consent in the service tenant would only be required if the publisher of the app needed to access information in their own service tenant through their own app.</p>
<p>When I was researching this topic, I briefly panicked and thought that all permissions which are added to the enterprise app/service principal would automatically allow the owner of the app to use these permissions. That would be especially problematic for application permissions. But as I&rsquo;ve just proven, that&rsquo;s not the case. The owner of the app can only use what they&rsquo;ve added under <strong>configured permissions</strong>. They won&rsquo;t even see what other delegated permissions you&rsquo;ve added to your own enterprise app.</p>
<h4 id="delegated-permissions">Delegated Permissions
</h4><p>With delegated permissions, a signed-in user is required. Now what does that mean exactly? When we&rsquo;re talking about using Microsoft Graph PowerShell, this is pretty clear. When you run <code>Connect-MgGraph</code> you&rsquo;re prompted to sign using your username, password and hopefully MFA.</p>
<p>After signing in, the PowerShell session will have an access token which includes information about your user account and the app id that you used to sign in.</p>
<p>This is great for managing Entra ID users and Microsoft 365 services with PowerShell on the fly, like changing the usage location of a user. What delegated permissions are not great for is trying to use them in PowerShell scripts which should run autonomously. If a script is running on some server or in an Azure automation account, there&rsquo;s no way that you&rsquo;ll securely get a token for another user. In that case, you&rsquo;ll want to use application permissions.</p>
<p>Let&rsquo;s examine another example of delegated permissions using Zoom as a <em>real</em> app example again. The difference between Zoom and a PowerShell script is that you&rsquo;re signed into Zoom using Entra SSO, so Zoom knows your Entra identity, and it also knows that the signed in user is allowed to read/write the calendar. Unlike a PowerShell script, the Zoom app is something that is continuously running on a user&rsquo;s machine, and there&rsquo;s a server piece to it.</p>
<p>When you&rsquo;re launching the app, you&rsquo;re authenticating yourself to Zoom and that&rsquo;s when Zoom acquires the token which allows it to read/write your calendar. Therefore, Zoom can&rsquo;t access your calendar when the app is not running or when you&rsquo;re not signed in.</p>
<h5 id="microsoft-authentication-library-msal">Microsoft Authentication Library (MSAL)
</h5><p>Then there&rsquo;s the <a class="link" href="https://learn.microsoft.com/en-us/entra/identity-platform/msal-overview"  target="_blank" rel="noopener"
    >MSAL</a> which is available as a PowerShell module (MSAL.PS). In theory, it could be used in a script but if you&rsquo;re not a developer (like I&rsquo;m not) then this will be a whole new rabbit hole to go down. Anyway, even if you were using the MSAL authentication library in a PowerShell script, it would still require the user&rsquo;s credentials which must be passed in an interactive log in flow in order to acquire a token which could then be used inside the script.</p>
<p>In other words, delegated permissions which typically end in <code>*Read|Write.All</code> are most commonly used by IT admins when they sign into Microsoft Graph PowerShell interactively by providing their admin credentials. Delegated permissions which do not end in <code>*.All</code> usually allow an app to only read/write information of the signed in user. They&rsquo;re commonly used by apps like Zoom to access relevant data like a user&rsquo;s calendar.</p>
<h4 id="application-permissions">Application Permissions
</h4><p>Application permissions are used if an app or a script needs access to Entra ID resources without a signed in user. Let&rsquo;s just say you have a script which runs daily and checks if all the usage location is matching the country property for all Entra ID users. If that script were to use delegated permissions, somebody would need to manually run it every day because the script would prompt for admin credentials in a browser pop-up every time. Such a script will need to utilize application permissions to run in a truly automated way.</p>
<p>To be able to use application permissions, you need a client secret or a certificate and these can only be created on the app registration. That means that if a multi-tenant app were to require application permissions, they would need to be part of the app registration&rsquo;s configured permissions and you would be prompted to grant consent when you&rsquo;re adding the enterprise app.</p>
<p>If you own the app registration yourself, you can add new application permissions to the app registration yourself, but you can&rsquo;t add them directly to the enterprise app, like you can with delegated permissions.</p>
<h2 id="application-permissions--app-only-authentication">Application Permissions / App Only Authentication
</h2><h3 id="accessing-graph-as-application-from-the-service-tenant">Accessing Graph as application from the Service Tenant
</h3><p>I&rsquo;m still using <strong>Graph PowerShell (Multi-Tenant) V4</strong> as an example. This time, I&rsquo;m going to add a new application permission to the app registration in the service tenant. For this example, I&rsquo;m going to add <strong>CallRecords.Read.All</strong>.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-72.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-72_hu_26b44d6c7718dd24.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-72_hu_726b7c5872ea3d63.png 1024w"
	loading="lazy"
	
		alt="Add application permissions"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p><strong>CallRecords.Read.All</strong> is now added as <strong>application</strong> permission in <strong>configured permissions</strong>. Note that admin consent hasn&rsquo;t been granted for the service tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-73.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-73_hu_8f8a3b7a68a2d6c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-73_hu_3bc2c09749d3e10f.png 1024w"
	loading="lazy"
	
		alt="Configured permissions of app registration in service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Because this is an application permission, I can&rsquo;t simply run <code>Connect-MgGraph</code> and add <code>-Scopes &quot;CallRecords.Read.All</code>. <a class="link" href="https://learn.microsoft.com/en-us/graph/permissions-reference#callrecordsreadall"  target="_blank" rel="noopener"
    >This permission</a> doesn&rsquo;t even exist as a delegated permission.</p>
<p>Additionally, adding <code>-Scopes</code> is not supported when <code>-ClientSecretCredential</code> is also specified.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-107.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-107_hu_ef6460e5a0eba62.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-107_hu_213b3147102182ec.png 1024w"
	loading="lazy"
	
		alt="Invalid parameter combination error"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>To add the application permission, I need to get a hold of the admin consent link. Normally, when you add an enterprise app, you don&rsquo;t need to manually copy and paste a link. This process is usually neatly integrated into the UI of apps that request permission to access your data through Microsoft Graph.</p>
<p>As an example, this is the web page that lets me connect Zoom to my Microsoft 365 calendar. As you can see, there is a nice little <strong>Authorize</strong> button directly embedded in the Zoom admin portal.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-74.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-74_hu_e03aeaf58d87205f.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-74_hu_efa921ae79e60549.png 1024w"
	loading="lazy"
	
		alt="Zoom authorization UI/UX example"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>When I click <strong>Authorize</strong> the admin consent dialog is opened in the browser.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-75.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-75_hu_8ff1e7786020d778.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-75_hu_58b3652e24fed9cf.png 1024w"
	loading="lazy"
	
		alt="Zoom admin consent example"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Granting the consent will add the enterprise app. While I&rsquo;m at it, let&rsquo;s check out the permissions which were added for Zoom.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-76.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-76_hu_5792c9ff59d02eaa.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-76_hu_68f5713a45bb1856.png 1024w"
	loading="lazy"
	
		alt="Zoom enterprise app permissions"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Since these are all delegated permissions, it means that the Zoom app can only access my calendar and contacts when I&rsquo;m signed into the Zoom app. But the consent flow is the same for both application and delegated permissions.</p>
<h4 id="get-admin-consent-url">Get Admin Consent URL
</h4><p>With the above example, I just wanted to show you what adding an enterprise app usually looks like. I&rsquo;m not sure if there&rsquo;s a better way to obtain the consent link to implement it in your own app but for now, what I&rsquo;m showing you will have to do.</p>
<p>From the enterprise app in the service tenant, I can click <strong>Grant admin consent</strong> which will open a new browser window. This only works from the enterprise app. If you clicked grant admin consent on the app registration, the grant consent button will open on the same page, and you won&rsquo;t be able to copy the URL.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-77.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-77_hu_9c09585a62def349.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-77_hu_7f529ea8663c01e9.png 1024w"
	loading="lazy"
	
		alt="Grant admin consent button"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-108.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-108_hu_38e9b0775f2eee19.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-108_hu_4a02a988d453217e.png 1024w"
	loading="lazy"
	
		alt="New browser window with admin consent URL"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>The new browser window will allow me to copy the URL which will look something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">https://login.microsoftonline.com/536f948a-babb-4048-836d-717833aa0da5/adminConsent?client_id=c199b3df-a49b-4739-b314-c2ee50e6c0bc&amp;redirect_uri=https://entra.microsoft.com/TokenAuthorize
</span></span></code></pre></td></tr></table>
</div>
</div><p>The first GUID after <strong>login.microsoftonline.com</strong> is the tenant id of the service tenant. Now I can either replace it with a specific tenant id or just replace it with <code>common</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">https://login.microsoftonline.com/common/adminConsent?client_id=c199b3df-a49b-4739-b314-c2ee50e6c0bc&amp;redirect_uri=https://entra.microsoft.com/TokenAuthorize
</span></span></code></pre></td></tr></table>
</div>
</div><p>When I open this link and sign in with the global admin of the customer tenant, I can see the name of the app and that it&rsquo;s requesting the <strong>Read all call records</strong> permission.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-109.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-109_hu_9d3d319f2a8bad9.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-109_hu_a6dcb2c51caf540a.png 1024w"
	loading="lazy"
	
		alt="Admin consent request for Read all call records"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>Unfortunately, application permissions are not labeled explicitly as such which makes it hard to understand what permissions are really requested unless the vendor of the enterprise app includes this info in their documentation. An easy way to figure it out is to search for the permission title or the description in the <a class="link" href="https://learn.microsoft.com/en-us/graph/permissions-reference#callrecordsreadall"  target="_blank" rel="noopener"
    >permission reference</a>.</p>
<p>Back in Entra Admin Center, I can now see that the <strong>CallRecords.Read.All</strong> permission has been added to my enterprise app.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-78.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-78_hu_4191d42244df55a6.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-78_hu_853f07bc488bea75.png 1024w"
	loading="lazy"
	
		alt="Enterprise app permissions before granting consent"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-79.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-79_hu_fb0ed3dedb631de4.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-79_hu_bf7bb37654771b1c.png 1024w"
	loading="lazy"
	
		alt="Enterprise app permissions after granting permissions"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Just to emphasize on this again, I did not grant admin consent to the configured permissions on the app registration in the service tenant. Remember that consent is always tenant specific.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-80.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-80_hu_46c77f31596e5a2c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-80_hu_fb1eeb4bfcb475f3.png 1024w"
	loading="lazy"
	
		alt="App registration permissions in service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<h3 id="create-a-secret">Create a Secret
</h3><p>An application can access Graph without a signed in user either through a certificate or a client secret. I&rsquo;m only going to focus on client secrets today.</p>
<p>On the app registration in the service tenant, I&rsquo;m creating a new client secret.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-81.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-81_hu_80e1778cb6d50704.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-81_hu_8a991ed9c0f7392c.png 1024w"
	loading="lazy"
	
		alt="Add a client secret"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Important: the secret is only shown once. As soon as you navigate away from this page, you won&rsquo;t be able to access it again. When you do this, you&rsquo;ll see your client secret. It&rsquo;s only showing a bunch of asterisks for me because I&rsquo;m using the <a class="link" href="https://github.com/microsoft/cloudcloak"  target="_blank" rel="noopener"
    >Cloud Cloak</a> extension for Microsoft Edge.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-83.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-83_hu_34076d0105e6dda5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-83_hu_818454b745a80e8b.png 1024w"
	loading="lazy"
	
		alt="Added client secret"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Using the code below, I (or rather the service tenant) can now sign into the customer tenant using the enterprise app/service principal of the customer tenant and the client secret from the service tenant.</p>
<p>It&rsquo;s important to understand that I now gave another tenant permission to read all call records in my (customer) tenant without a signed in user of my (customer) tenant.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nv">$tenantId</span> <span class="p">=</span> <span class="s2">&#34;4bffbf87-53a0-4fce-b58b-4179cb3a3b7d&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$appId</span> <span class="p">=</span> <span class="s2">&#34;c199b3df-a49b-4739-b314-c2ee50e6c0bc&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$appSecret</span> <span class="p">=</span> <span class="nb">Read-Host</span> <span class="n">-AsSecureString</span>
</span></span><span class="line"><span class="cl"><span class="p">****************************************</span>
</span></span><span class="line"><span class="cl"><span class="nv">$clientSecretCredential</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">System</span><span class="p">.</span><span class="py">Management</span><span class="p">.</span><span class="py">Automation</span><span class="p">.</span><span class="py">PSCredential</span> <span class="p">(</span><span class="nv">$appId</span><span class="p">,</span> <span class="nv">$appSecret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">Connect-MgGraph</span> <span class="n">-ClientSecretCredential</span> <span class="nv">$clientSecretCredential</span> <span class="n">-TenantId</span> <span class="nv">$tenantId</span> <span class="n">-NoWelcome</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-82.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-82_hu_34670cc3595451de.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-82_hu_b82f8279b60d9dd2.png 1024w"
	loading="lazy"
	
		alt="Connecting to Graph PowerShell with app only authentication"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>Let&rsquo;s check the Graph context.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-84.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-84_hu_bacbabb7ee1a0d5d.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-84_hu_7ba4db2b2ab44ec4.png 1024w"
	loading="lazy"
	
		alt="Output of Mg-Context"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>The only scope that&rsquo;s currently available is <strong>CallRecords.Read.All</strong> because that&rsquo;s the only application permission. All the other ones are delegated permissions so they&rsquo;re not available in this session. AuthType is now <strong>AppOnly</strong> and we&rsquo;re still using the <strong>Graph PowerShell (Multi-Tenant) V4</strong> app with the client secret from the service tenant.</p>
<p>Finally, let&rsquo;s see if I can use the app to retrieve a call record from the customer tenant with app only authentication as the service tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-85.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-85_hu_cf2f40e9f4f339ac.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-85_hu_c025040d7c178572.png 1024w"
	loading="lazy"
	
		alt="Getting a call record with app only permission as the service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>Yep, it&rsquo;s working. It took quite a while for the sign-in logs to appear, but I can now see a logged sign in for the service principal in the customer tenant. In the details, I can see the name of the application and the service principal. I can also see the <strong>Application ID</strong> which is the app id of the app registration in the service tenant and of course, also the app id of the enterprise app/service principal in the customer tenant. The <strong>Client credential type</strong> is now <strong>Client secret</strong>. And finally, the <strong>Service principal ID</strong> is the <strong>Object Id</strong> of the enterprise app/service principal in the customer tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-86.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-86_hu_143d4ee9e573057a.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-86_hu_cfb61eef857605b6.png 1024w"
	loading="lazy"
	
		alt="Service principal sign in logs in customer tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-87.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-87_hu_56b048d64874e1de.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-87_hu_4c5d7c7466767480.png 1024w"
	loading="lazy"
	
		alt="Sign in details"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>Out of curiosity, I checked the sign in logs in the service tenant as well. I want to point out that the enterprise app in the service tenant is still untouched and does not have any consented permissions. Nevertheless, the sign-in logs of the service tenant still log the sign-in activity, even when the sign in happened in the customer tenant. It also lists the <strong>Service principal ID</strong> of the customer tenant even though that object id doesn&rsquo;t exist in the service tenant. There is no reference of the customer tenant id, though.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-88.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-88_hu_cd2fda8d4c6a0827.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-88_hu_358babf75a7d3fe4.png 1024w"
	loading="lazy"
	
		alt="Enterprise app permissions in service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-89.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-89_hu_3937f686c2cf9ab5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-89_hu_9839f0a2816271f1.png 1024w"
	loading="lazy"
	
		alt="Sign-in log details from service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>When application permissions are used in multi-tenant apps, only the owner/publisher of the app registration will be able to use the application permissions, because you don&rsquo;t have access to the secret and you can&rsquo;t create one for yourself either because you don&rsquo;t have access to the app registration.</p>
<h3 id="accessing-graph-as-app-from-your-own-tenant">Accessing Graph as App from your Own Tenant
</h3><p>If you want to use Graph PowerShell with application permission (without a signed in user) in your own tenant, the process is exactly the same as I&rsquo;ve just shown you for a multi-tenant scenario.</p>
<p>You just need to create your own app registration, assign the required permissions and create a client secret or a certificate for the app. In that case, you&rsquo;ll obviously have to grant admin consent because you want to access Graph as an app in your own tenant.</p>
<h3 id="accessing-graph-as-app-using-your-own-app-registration-from-a-3rd-party-app">Accessing Graph as App using your own App Registration from a 3rd Party App
</h3><p>What I described in <a class="link" href="#accessing-graph-as-application-from-the-service-tenant" >Accessing Graph as application from the Service Tenant</a> would allow the service tenant to read call records of all tenants that have consented to their app. Another scenario you might encounter is that a vendor of a software/service asks you to create your own app registration but share/configure your secret in their service.</p>
<p>I&rsquo;ll use Bitwarden, which is my favorite password manager, as an example for this. Bitwarden allows an organization to sync their Entra ID users to Bitwarden so that you can then specify which of your Entra users will be able to use Bitwarden from their admin portal.</p>
<p>This is a perfect example of why an app would need <strong>Users.Read.All</strong> and <strong>Groups.Read.All</strong> application permissions.</p>
<p>Bitwarden doesn&rsquo;t actually provide their own enterprise app which can be added to your tenant. Instead, their documentation states that you as the customer have to create your own app registration and which delegated and application permissions you need to add to it.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-106.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-106_hu_998d5b39fd55356d.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-106_hu_c0041cfe3618c18b.png 1024w"
	loading="lazy"
	
		alt="Required delegated and app permissions for Bitwarden Directory Connector"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>Further down the line, their documentation explains that you need to create a client secret. Once you have everything, namely the tenant id, the app id and the client secret, you need to add them to their <strong>Directory Connector</strong> app.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-110.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-110_hu_2deb8254c23266dc.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-110_hu_af249a0cf305b053.png 1024w"
	loading="lazy"
	
		alt="Bitwarden documentation on how to connect Directory Connector to your Entra app"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>I don&rsquo;t know all the details about this Bitwarden Directory Connector but to put it simply, adding your tenant id, app id and client secret to it, will allow the Directory Connector to read all your Entra users and sync them to the Bitwarden admin portal.</p>
<p>By doing it like this, Bitwarden delegates the management of the app registration to the customer and they&rsquo;re also making sure that the data in your tenant can only be accessed by your app secret/your own instance of Directory Connector.</p>
<h2 id="deleting-apps">Deleting Apps
</h2><p>Lastly, after all this testing, it&rsquo;s time to clean up my lab. Let&rsquo;s see what happens when enterprise apps and app registrations are deleted.</p>
<h3 id="deleting-an-enterprise-app">Deleting an Enterprise App
</h3><h4 id="you-do-not-own-the-app-registration-1">You Do Not Own the App Registration
</h4><p>Since enterprise apps are always tenant specific, deleting an enterprise app will only delete it from your tenant. This has no impact on other tenants. Enterprise applications can be deleted from the <strong>Properties</strong> menu.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-90.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-90_hu_a681cf6335edfd3c.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-90_hu_3c18b1f8aa6539fb.png 1024w"
	loading="lazy"
	
		alt="Properties of multi-tenant enterprise app in customer tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>If you delete an enterprise app by accident, you can easily add it again by granting consent again. Depending on the app and the required permissions, you can do this by signing into Graph PowerShell or by using the admin consent link again. Because enterprise apps can&rsquo;t be restored, adding one again will generate a new object id for the enterprise app/service principal.</p>
<h4 id="your-own-enterprise-applications">Your Own Enterprise Applications
</h4><p>If you delete an enterprise application for which you own the app registration and both are in the same tenant, deleting the enterprise app won&rsquo;t delete the app registration as well. However, deleting the enterprise app will remove previously consented permissions on the app registration too.</p>
<p>Here, I&rsquo;m deleting the enterprise app called <strong>Graph PowerShell Demo (Created in Portal)</strong>. Deleting an enterprise app will result in revoking all admin consents, including configured permissions.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-91.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-91_hu_e421691dcfa8b48f.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-91_hu_4fda3211bd0da3c.png 1024w"
	loading="lazy"
	
		alt="App registration permissions before the enterprise app was deleted"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-92.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-92_hu_c6e0580ad1c8f922.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-92_hu_a2225e9186288c92.png 1024w"
	loading="lazy"
	
		alt="App registration permissions after the enterprise app was deleted"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>If you delete the enterprise app by accident, you can create a new one by granting admin consent on the app registration again. Keep in mind that the new enterprise app will have a different <strong>Object ID</strong>. The <strong>Application ID</strong> stays the same, as it&rsquo;s the one of the app registration anyway.</p>
<h3 id="deleting-an-app-registration">Deleting an App Registration
</h3><p>When you&rsquo;re deleting app registrations you need to be much more careful.</p>
<h3 id="your-own-single-tenant-app-registrations">Your Own Single-Tenant App Registrations
</h3><p>If you delete an app registration for which an enterprise app exists in the same tenant as well, both objects will be deleted.</p>
<p>App registrations can be deleted from the <strong>Overview</strong> page.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-93.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-93_hu_7d189012460e6345.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-93_hu_e619223ae10605f8.png 1024w"
	loading="lazy"
	
		alt="Delete app registration"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<h3 id="a-multi-tenant-app-registration-which-you-own">A Multi-Tenant App registration which you own
</h3><p>If you&rsquo;re the publisher/owner of a multi-tenant app registration and you delete the app registration from your service tenant, both the app registration and the enterprise app/service principal will be deleted from the service tenant. <strong>The enterprise app won&rsquo;t be deleted from customer tenants but customers will no longer be able to sing in and use the app!</strong></p>
<p>Let me share a great real life example with you. Until September 9th 2024, the PnP.PowerShell team has provided a multi-tenant app which could be used to sign into the PnP Management Shell. They <a class="link" href="https://pnp.github.io/blog/post/changes-pnp-management-shell-registration/"  target="_blank" rel="noopener"
    >announced</a> that the app will be deleted on that day. As a result, any tenant that had added this app as an enterprise app to their tenant can no longer use it. Instead, admins need to <a class="link" href="https://pnp.github.io/powershell/articles/registerapplication"  target="_blank" rel="noopener"
    >create their own app</a> to access the PnP Management Shell.</p>
<p>If the app registration is deleted in its home tenant by the app publisher/owner, it&rsquo;s best to remove the enterprise app from your own tenant as well.</p>
<p>Let&rsquo;s get back to my lab. I&rsquo;ve now deleted the app registration for <strong>Graph PowerShell (Multi-Tenant) V4</strong> from the service tenant.</p>
<p>As expected, after deleting the app registration from the service tenant, it&rsquo;s not possible to sign into the enterprise app in the customer tenant anymore, even though the enterprise app still exists and the permissions of the enterprise app remain unchanged.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-97.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-97_hu_dc56bb54438ff4a5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-97_hu_75ea54c7f0106496.png 1024w"
	loading="lazy"
	
		alt="Error message when app registration was deleted in service (home) tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-95.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-95_hu_54a299d9f641936b.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-95_hu_8f82bb347cd131a7.png 1024w"
	loading="lazy"
	
		alt="Permissions of enterprise app in customer tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<h2 id="restoring-app-registrations">Restoring App Registrations
</h2><p>Unlike enterprise apps/service principals, app registrations can be restored for up to 30 days. If an app registration was deleted by accident, you can restore it from <strong>Deleted applications</strong> in the <strong>App registrations</strong> menu.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-96.png"
	width="2322"
	height="1548"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-96_hu_bcd2af6a91f63a2f.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-96_hu_6dc5c190e47fa686.png 1024w"
	loading="lazy"
	
		alt="Restoring deleted app registration in service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="360px"
	
></p>
<p>This will restore the enterprise app in the home tenant as well. In my case, both the consented permissions for the enterprise app and the app registration were restored as well. I did restore it right after deleting it though. The results might be different, if more time passes between deletion and restore.</p>
<p>Let&rsquo;s get to the million dollar question. Is there any action to be taken in the customer tenant after an app registration was deleted and restored from the service tenant?</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-94.png"
	width="1734"
	height="957"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-94_hu_76037a741d2d7135.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-94_hu_e7e5c53760327774.png 1024w"
	loading="lazy"
	
		alt="Successful sign in after the app registration was restored in the service tenant"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="434px"
	
></p>
<p>In my case, signing in to Graph PowerShell worked again just a few seconds after the app registration was restored in the service tenant. Again, this might differ if the time difference between deletion and restore is bigger.</p>
<h2 id="other-types-of-service-principals">Other Types of Service Principals
</h2><p>So far, we&rsquo;ve learned that every enterprise application is also a service principal. But is every service principal also an enterprise application? Not quite. If you navigate to the <strong>Enterprise applications</strong> page in Entra Admin Center, you&rsquo;ll notice that the filter is automatically set to <code>Application type == Enterprise Application</code>.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-111.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-111_hu_f01b25551ad3a315.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-111_hu_bc5cbffa2b8f1590.png 1024w"
	loading="lazy"
	
		alt="Enterprise applications view"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>That means that the portal will only show enterprise apps which have explicitly been added by an admin (or a user if not blocked) to your tenant.</p>
<p>To block users from adding enterprise apps to your tenant, go to <strong>Enterprise applications</strong> in Entra Admin Center and then click on <strong>Consent and permissions</strong> on the left navigation pane.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-127.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-127_hu_1940e9f95f974fe4.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-127_hu_ef0581bf83859541.png 1024w"
	loading="lazy"
	
		alt="Consent and permissions"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-125.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-125_hu_a580fa4e39248152.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-125_hu_fdeb6c264ed4203.png 1024w"
	loading="lazy"
	
		alt="Do not allow user consent"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>However, there are also different types of service principals which are also part of the enterprise applications menu, but not included with the default filter.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-112.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-112_hu_145da1f6f0ff5fe3.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-112_hu_687bf9a9e5e31c9a.png 1024w"
	loading="lazy"
	
		alt="Service principal types"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<h3 id="microsoft-applications">Microsoft Applications
</h3><p>Microsoft applications are apps owned by Microsoft and they mostly include apps which allow Entra ID users to access various systems and services within Azure and Microsoft 365. My lab tenant currently lists 585 Microsoft apps. That is way too much to go into detail for all of them but let&rsquo;s look at the example of the <strong>Microsoft Graph</strong>. This is the actual Graph API and not the Microsoft Graph Command Line Tools enterprise app.</p>
<p>There&rsquo;s also an Application and an Object ID for <strong>Microsoft Graph</strong>. Unlike Enterprise apps, Microsoft apps can&rsquo;t be deleted and various properties such as <strong>Assignment required?</strong> are not available. Searching for the app id will list it as enterprise application/service principal as well.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-113.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-113_hu_a9c2a50737576bc1.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-113_hu_68227a671e37993c.png 1024w"
	loading="lazy"
	
		alt="Microsoft Graph (Microsoft application)"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
> <img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-114.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-114_hu_960b61b75b114531.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-114_hu_14f22a4dcfd8bc63.png 1024w"
	loading="lazy"
	
		alt="Entra Admin Center search result"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>A list of the most commonly used app ids for Microsoft applications can be found <a class="link" href="https://learn.microsoft.com/en-us/troubleshoot/azure/entra/entra-id/governance/verify-first-party-apps-sign-in#application-ids-of-commonly-used-microsoft-applications"  target="_blank" rel="noopener"
    >here</a>.</p>
<p>The actual Graph application doesn&rsquo;t have or needs any permissions consented.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-115.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-115_hu_91f8cd0633aa1414.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-115_hu_ab48430fb025f226.png 1024w"
	loading="lazy"
	
		alt="Microsoft Graph (Microsoft application) permissions"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>If I go back and look at the sign-in logs of when I signed into Graph PowerShell using my <strong>Graph PowerShell Demo (Created in Portal)</strong> app, I can see that the <strong>Resource ID</strong> lists the app id of the Microsoft Graph Microsoft app (<code>00000003-0000-0000-c000-000000000000</code>).</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-116.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-116_hu_305ba3679e782be2.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-116_hu_f1da9fbfd2d4c738.png 1024w"
	loading="lazy"
	
		alt="Sign in logs of Graph PowerShell"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>I think it&rsquo;s worth pointing out that the service principal is called <strong>GraphAggregatorService</strong> but the app itself is called <strong>Microsoft Graph</strong>.</p>
<h3 id="managed-identities">Managed Identities
</h3><p>Managed identities are service principals which are tied to specific Azure resources like an automation account or a function app etc.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-117.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-117_hu_b98cb78c80c4fb89.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-117_hu_da37e42659eb4c43.png 1024w"
	loading="lazy"
	
		alt="Managed identity service principals"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>This is an Azure resource of an automation account, for which I&rsquo;ve configured a system assigned managed identity. If you look closely, you can see that the <strong>Object (principal) ID</strong> is the same as the <strong>Object ID</strong> of the service principal in the screenshot above.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-122.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-122_hu_5b905972a5d51c63.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-122_hu_4294595f68e093fa.png 1024w"
	loading="lazy"
	
		alt="Managed identity on Azure resource"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<blockquote>
    <p>Once the system assigned managed identity is enabled, this resource will be registered with Microsoft Entra ID. After being registered, you can control its access to other services like storage accounts.</p><span class="cite"><span>â€• </span><span>Azure Portal</span><cite></cite></span></blockquote>
<p>Managed identities do not have an app registration exposed to your tenant but when you enable one for an Azure resource, an app will be registered somewhere in Entra ID (where only Microsoft can see it) and a service principal will be created in your tenant.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-119.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-119_hu_de05de1e02e3abbe.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-119_hu_7219e77f78f4552a.png 1024w"
	loading="lazy"
	
		alt="Entra Admin Center search results for managed identity object id"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>Managed identities are primarily used to grant access to Azure resources, therefore the permissions of the enterprise app are usually empty.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-120.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-120_hu_5054b92080796a3f.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-120_hu_f03ff98a6299069d.png 1024w"
	loading="lazy"
	
		alt="Permissions of managed identity service principal"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>However, it is possible to assign administrative roles to service principals of managed identities or grant them access to Azure resources other than the one for which the managed identity was created for.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-121.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-121_hu_79587a7db2ceb9f5.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-121_hu_bc6ac56ae471c790.png 1024w"
	loading="lazy"
	
		alt="Admin role assignment for service principal (managed identity)"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>A managed identity can only be used by the Azure resource for which it was created for. So, if you create a managed identity for an Azure automation account, only the automation account, or resources within said automation account, for example a runbook will be able to sign in using that managed identity. The managed identity cannot be used in any other way. It&rsquo;s also not possible to create a client secret or a certificate for a managed identity because as the name suggests, Microsoft is doing everything in the background for you.</p>
<p>To connect to Azure using a managed identity in an Azure runbook, all you need is this code:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="c"># Connect to Azure environment</span>
</span></span><span class="line"><span class="cl"><span class="nb">Connect-AzAccount</span> <span class="n">-Identity</span> <span class="n">-TenantId</span> <span class="nv">$tenantId</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Service principals of managed identities cannot be deleted from enterprise applications.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-118.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-118_hu_a3c6082f218d9dda.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-118_hu_c01b6d7e0dbac6aa.png 1024w"
	loading="lazy"
	
		alt="Managed identity service principal properties"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<p>Instead, the managed identity must be disabled on the page of the Azure resource for which it was created.</p>
<p><img src="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-123.png"
	width="2322"
	height="1459"
	srcset="/p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-123_hu_ca29fd7676cddaa4.png 480w, /p/whats-the-difference-between-an-entra-id-app-registration-and-an-enterprise-app-4yyib4g1sk5a/image-123_hu_c275f3f873f5d540.png 1024w"
	loading="lazy"
	
		alt="Disable managed identity from Azure resource configuration"
	
	
		class="gallery-image" 
		data-flex-grow="159"
		data-flex-basis="381px"
	
></p>
<h2 id="summary">Summary
</h2><p>This is without a doubt the longest blog post I&rsquo;ve ever written. But sometimes, when I&rsquo;m writing about complex topics there is just no other way to do this. I&rsquo;m aware that I&rsquo;ve repeated myself a couple of times in this blog post, but I wanted to make sure that it&rsquo;s clear at all times if I&rsquo;m speaking about an app registration or an enterprise app and in which tenant the afore mentioned object lives.</p>
<p>I also want to clarify that I&rsquo;ve never developed or worked on an enterprise grade application or anything like that. That&rsquo;s also why this blog post doesn&rsquo;t go into the details like token configuration, exposing APIs etc.</p>
<p>As a Sys Admin, you&rsquo;re going to have to deal with Entra applications sooner or later. Whether you like it or not. It sure does complicate a lot of things that were easier a couple of years ago, like using the AzureAD PowerShell module and not having to deal with Graph permissions for example. But I believe that it&rsquo;s a necessity for every IT Pro to learn how things work in the new world. It&rsquo;s important to understand what an app registration and what an enterprise app is and what each of them does.</p>
<p>I actually wrote about a third of this blog twice. The first time I started it was a hot mess and there was no clear common thread to follow. In my first attempt, I tried to sort everything into sections, like creating an app registration and then I had subsections for each possibility like single- and multi-tenant but it just didn&rsquo;t make much sense to talk about registering multi-tenant apps, when I hadn&rsquo;t even explained what a multi-tenant app is or in which scenarios they&rsquo;re used.</p>
<p>Then I started from scratch again and I tried really hard two write a story that unfolds naturally. I started with things you might already know and introduced new stuff that builds on previously mentioned details in each topic.</p>
<p>Let us reminisce one last time what Entra applications are and what the key differences between app registrations and enterprise apps are.</p>
<p>An Entra application in general is referring to what&rsquo;s used when certain resources like the Graph API are accessed in Entra ID. Access to resources can either use delegated permissions, where a signed in user is required or they can use application permissions, where either a client secret or a certificate instead of a signed in user is required. An application can have any combination of delegated and application permissions.</p>
<p>An Entra application is not like a traditional application. When we hear the word application or app, most people will think about an app that can be installed on a device or accessed through a web browser. The purpose of an Entra application is to allow <em>actual</em> apps, like for example the Zoom client to access resources like your calendar in Entra ID/Graph. Any Entra application must be registered in an Entra ID tenant before it can be used in applications or scripts that are built by developers.</p>
<p>An app registration is essentially the same thing as an application. The process of creating a new application is called registering an app and that&rsquo;s why the Entra Admin Center typically calls them app registrations. In PowerShell or Entra ID logs, app registrations are always called applications.</p>
<p>In theory, an app registration can exist without an enterprise app, but an enterprise app can&rsquo;t exist without an app registration. The registered application for an enterprise app can either be in the same tenant or it can be homed in a different tenant.</p>
<p>When you&rsquo;re building an internal application, the app registration is usually homed in your own tenant. When you&rsquo;re purchasing, using or building a SaaS app, the app registration usually lives in a service tenant.</p>
<p>When an app is registered, a globally unique (across all Entra ID tenants) application id is assigned by Entra ID, and an app can be registered as a single- or a multi-tenant app. Single-tenant apps can only be used by your organization. Multi-tenant apps can be added to and used by any tenant, if admin consent for the app is granted.</p>
<p>Enterprise apps are the same thing as service principals but not all service principal types are also called enterprise apps. Microsoft applications and managed identities are the exception to this. The Entra Admin Center refers to service principals as enterprise applications in most UI elements but logs in Entra ID or PowerShell Cmdlets and object properties typically refer to them as service principals.</p>
<p>Service principals allow you or a publisher of a multi-tenant app to access resources in your tenant. The permission model is very granular and almost any action requires an explicitly granted admin consent before an app is allowed to perform any actions. This also applies when using delegated permissions and means that you won&rsquo;t be able to perform an action against the Microsoft Graph API before admin consent has been granted, even if your account has the required admin roles assigned and you&rsquo;re able to perform the same action in the portal.</p>
<p>To use app only authentication a client secret or a certificate is needed, and they must be configured on the app registration, even though the service principal is used for the actual sign in process.</p>
<p>In conclusion, an Entra application is a combination of both an app registration and an enterprise app. You can&rsquo;t have an enterprise app without a registered app, and you can&rsquo;t use an application to sign into a resource, such as Microsoft Graph without also having an enterprise app/service principal for it.</p>
<p>I hope that this explanation makes sense to you. I certainly learned a lot in the days I dedicated my time to writing this blog post. If you too understand the difference between app registrations and enterprise apps now, feel free to buy me a <a class="link" href="/support-me" >coffee</a>. ðŸ˜Š</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/find-tenant-owner-company-name-with-only-an-entra-id-tenant-name-qyjkiw0n14bb/">
        
        
            <div class="article-image">
                <img src="/p/find-tenant-owner-company-name-with-only-an-entra-id-tenant-name-qyjkiw0n14bb/Cover.d27f75b1486ba1a383c8ceacca207724_hu_f48b701f8e79df8e.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Find Tenant Owner Company Name with Only an Entra Tenant Id"
                        data-key="/find-tenant-owner-company-name-with-only-an-entra-id-tenant-name-qyjkiw0n14bb" 
                        data-hash="md5-0n91sUhroaODyM6syiB3JA==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Find Tenant Owner Company Name with Only an Entra Tenant Id</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/microsoft-graph-how-to-filter-users-by-phone-number-b659lvqwir32/">
        
        

        <div class="article-details">
            <h2 class="article-title">Microsoft Graph: How To Filter Users by Phone Number</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/microsoft-graph-get-an-access-token-from-an-established-powershell-session-zv37e1xmxr86/">
        
        

        <div class="article-details">
            <h2 class="article-title">Microsoft Graph: Get an Access Token from a PowerShell Session</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/translate-microsoft-365-license-guids-to-product-names-in-powershell-e8fa373ace16/">
        
        

        <div class="article-details">
            <h2 class="article-title">Translate Microsoft 365 License GUIDs to Product Names in PowerShell</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/how-to-handle-microsoft-graph-paging-in-powershell-354663d4b32a/">
        
        

        <div class="article-details">
            <h2 class="article-title">How To Handle Microsoft Graph Paging in PowerShell</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "heusser-pro" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2022 - 
        
        2025 HEUSSER.PRO
    </section>
    
    <section class="powerby">
        
            Hosted on GitHub Pages <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>

